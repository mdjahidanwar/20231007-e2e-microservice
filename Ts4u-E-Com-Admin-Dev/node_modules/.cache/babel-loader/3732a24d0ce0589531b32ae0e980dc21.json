{"ast":null,"code":"import _regeneratorRuntime from\"/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useHistory}from'react-router-dom';import axios from'axios';import{Card,Button,Table,Space,Image,Switch,Popconfirm,Select}from'antd';import{EditOutlined,DeleteOutlined,QuestionCircleOutlined}from'@ant-design/icons';var Option=Select.Option;var ProductList=function ProductList(){var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoadingButton=_useState4[0],setIsLoadingButton=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),products=_useState6[0],setProducts=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),selectedRowKeys=_useState8[0],setSelectedRowKeys=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),selectedRows=_useState10[0],setSelectedRows=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),selectedOption=_useState12[0],setSelectedOption=_useState12[1];useEffect(function(){setIsLoading(true);axios.get('/product/getproductsall').then(function(res){setProducts(res.data.products);setIsLoading(false);}).catch(function(err){setIsLoading(false);console.log(err);});},[]);var deleteProduct=function deleteProduct(id){axios.delete(\"/product/delete/\".concat(id)).then(function(res){setProducts(function(prev){return prev.filter(function(prod){return prod._id!==id;});});}).catch(function(err){console.log(err);});};// const handleSearch = e => {\n//     let target = e.target;\n//     setFilterFn({\n//         fn: items => {\n//             if (target.value == \"\")\n//                 return items;\n//             else\n//                 return items.filter(x => x.name.toLowerCase().includes(target.value))\n//         }\n//     })\n// }\nvar rowSelection={selectedRowKeys:selectedRowKeys,onChange:function onChange(selectedRowKeys,selectedRows){setSelectedRowKeys(selectedRowKeys);setSelectedRows(selectedRows);}};var columns=[{title:'Product Image',dataIndex:'thumbnail',key:'thumbnail',render:function render(thumbnail){return/*#__PURE__*/React.createElement(Image,{width:100,src:thumbnail,fallback:\"data:image/png;base64,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\"});}},{title:'Product Name',dataIndex:'name',key:'name'},{title:'Num of Sale',dataIndex:'sales',key:'sales',sorter:function sorter(a,b){return a.sales-b.sales;}},{title:'Total Stock',dataIndex:'stock',key:'stock',sorter:function sorter(a,b){return a.stock-b.stock;}},{title:'Price',dataIndex:'price',key:'price',sorter:function sorter(a,b){return a.price-b.price;},render:function render(price){return/*#__PURE__*/React.createElement(\"span\",null,\"$ \",price);}},{title:'Discount',key:'discount',dataIndex:'discount',render:function render(discount){return discount.value>0?discount.discountType==='flat'?/*#__PURE__*/React.createElement(\"span\",{className:\"new-price\"},\"$ \",discount.value):/*#__PURE__*/React.createElement(\"span\",{className:\"new-price\"},discount.value,\" %\"):/*#__PURE__*/React.createElement(\"span\",null,\"$ 0\");}},{title:'Published',key:'isActive',dataIndex:'isActive',//sorter: (a, b) => Number(a.isActive) - Number(b.isActive),\nrender:function render(isActive){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Switch,{checked:isActive,onChange:null}));},filters:[{text:'Published',value:true},{text:'Unpublished',value:false}],onFilter:function onFilter(value,record){return record.isActive===value;}},{title:'Featured',key:'isFeatured',dataIndex:'isFeatured',//sorter: (a, b) => Number(a.isFeatured) - Number(b.isFeatured),\nrender:function render(isFeatured){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Switch,{checked:isFeatured,onChange:null}));},filters:[{text:'Featured',value:true},{text:'Unfeatured',value:false}],onFilter:function onFilter(value,record){return record.isFeatured===value;}},{title:'Action',key:'action',render:function render(text,record){return/*#__PURE__*/React.createElement(Space,{size:\"middle\"},/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return history.push(\"/product/edit/\".concat(record.slug));},className:\"d-center\",type:\"primary\",icon:/*#__PURE__*/React.createElement(EditOutlined,null)}),/*#__PURE__*/React.createElement(Popconfirm,{onConfirm:function onConfirm(){return deleteProduct(record._id);},title:\"Are you sure\\uFF1F\",icon:/*#__PURE__*/React.createElement(QuestionCircleOutlined,{style:{color:'red'}})},/*#__PURE__*/React.createElement(Button,{className:\"d-center\",icon:/*#__PURE__*/React.createElement(DeleteOutlined,null),danger:true})));}}];var join=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(updated){var array;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:array=_toConsumableArray(products);updated.map(function(u){var index=array.findIndex(function(arr){return arr._id===u._id;});array[index]=u;});return _context.abrupt(\"return\",array);case 3:case\"end\":return _context.stop();}}},_callee);}));return function join(_x){return _ref.apply(this,arguments);};}();var Filter=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(ids){var array;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:array=_toConsumableArray(products);ids.map(function(id){array=array.filter(function(arr){return arr._id!==id;});});return _context2.abrupt(\"return\",array);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function Filter(_x2){return _ref2.apply(this,arguments);};}();var bulkDelete=function bulkDelete(){setIsLoadingButton(true);var data={ids:selectedRowKeys};axios.patch(\"/product/bulkdelete\",data).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(res){var filtered;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return Filter(selectedRowKeys);case 2:filtered=_context3.sent;setProducts(filtered);setSelectedRowKeys([]);setSelectedRows([]);setIsLoadingButton(false);case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}()).catch(function(err){setIsLoadingButton(false);console.log(err);});};var bulkAction=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(option){var data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(option==='delete')){_context5.next=3;break;}return _context5.abrupt(\"return\",alert(\"You are in guest mode.So you can't perform this action\"));case 3:setIsLoadingButton(true);data={ids:selectedRowKeys};if(option===\"publish\"){data[\"isActive\"]=true;}if(option===\"unpublish\"){data[\"isActive\"]=false;}if(option===\"feature\"){data[\"isFeatured\"]=true;}if(option===\"unfeature\"){data[\"isFeatured\"]=false;}axios.patch(\"/product/bulkedit\",data).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(res){var updated,prod;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:updated=res.data.products;_context4.next=3;return join(updated);case 3:prod=_context4.sent;setProducts(prod);setSelectedRowKeys([]);setSelectedRows([]);setIsLoadingButton(false);case 8:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x5){return _ref5.apply(this,arguments);};}()).catch(function(err){setIsLoadingButton(false);console.log(err);});case 10:case\"end\":return _context5.stop();}}},_callee5);}));return function bulkAction(_x4){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(Card,{title:\"All Products\"},/*#__PURE__*/React.createElement(Select,{disabled:selectedRows.length===0,style:{width:\"180px\"},onChange:function onChange(value){return setSelectedOption(value);},placeholder:\"Select a action\"},/*#__PURE__*/React.createElement(Option,{value:\"publish\"},\"Make Publish\"),/*#__PURE__*/React.createElement(Option,{value:\"unpublish\"},\"Make Unpublish\"),/*#__PURE__*/React.createElement(Option,{value:\"feature\"},\"Make Featured\"),/*#__PURE__*/React.createElement(Option,{value:\"unfeature\"},\"Make Unfeatured\"),/*#__PURE__*/React.createElement(Option,{value:\"delete\"},\"Delete\")),/*#__PURE__*/React.createElement(Button,{loading:isLoadingButton,style:{marginLeft:\"10px\"},onClick:function onClick(){return bulkAction(selectedOption);},disabled:selectedRows.length===0||selectedOption==='',type:\"primary\"},\"Bulk action\"),selectedRows.length>0&&/*#__PURE__*/React.createElement(\"strong\",{style:{marginLeft:\"10px\"}},selectedRows.length,\" Product seleted\"),/*#__PURE__*/React.createElement(Table,{rowKey:\"_id\",rowSelection:rowSelection,loading:isLoading,columns:columns,dataSource:products,pagination:{defaultPageSize:10,showSizeChanger:true,pageSizeOptions:['10','20','30'],showQuickJumper:true}}));};export default ProductList;","map":{"version":3,"sources":["/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/src/pages/product/ProductList.js"],"names":["React","useEffect","useState","useHistory","axios","Card","Button","Table","Space","Image","Switch","Popconfirm","Select","EditOutlined","DeleteOutlined","QuestionCircleOutlined","Option","ProductList","history","isLoading","setIsLoading","isLoadingButton","setIsLoadingButton","products","setProducts","selectedRowKeys","setSelectedRowKeys","selectedRows","setSelectedRows","selectedOption","setSelectedOption","get","then","res","data","catch","err","console","log","deleteProduct","id","delete","prev","filter","prod","_id","rowSelection","onChange","columns","title","dataIndex","key","render","thumbnail","sorter","a","b","sales","stock","price","discount","value","discountType","isActive","filters","text","onFilter","record","isFeatured","push","slug","color","join","updated","array","map","u","index","findIndex","arr","Filter","ids","bulkDelete","patch","filtered","bulkAction","option","alert","length","width","marginLeft","defaultPageSize","showSizeChanger","pageSizeOptions","showQuickJumper"],"mappings":"qwBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,UAAT,KAA2B,kBAA3B,CAIA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAGA,OAASC,IAAT,CAAeC,MAAf,CAAuBC,KAAvB,CAA8BC,KAA9B,CAAqCC,KAArC,CAA4CC,MAA5C,CAAoDC,UAApD,CAAgEC,MAAhE,KAA8E,MAA9E,CACA,OAASC,YAAT,CAAuBC,cAAvB,CAAuCC,sBAAvC,KAAqE,mBAArE,CAEA,GAAQC,CAAAA,MAAR,CAAmBJ,MAAnB,CAAQI,MAAR,CAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtB,GAAMC,CAAAA,OAAO,CAAGf,UAAU,EAA1B,CACA,cAAkCD,QAAQ,CAAC,KAAD,CAA1C,wCAAOiB,SAAP,eAAkBC,YAAlB,eACA,eAA8ClB,QAAQ,CAAC,KAAD,CAAtD,yCAAOmB,eAAP,eAAwBC,kBAAxB,eACA,eAAgCpB,QAAQ,CAAC,EAAD,CAAxC,yCAAOqB,QAAP,eAAiBC,WAAjB,eACA,eAA8CtB,QAAQ,CAAC,EAAD,CAAtD,yCAAOuB,eAAP,eAAwBC,kBAAxB,eACA,eAAwCxB,QAAQ,CAAC,EAAD,CAAhD,0CAAOyB,YAAP,gBAAqBC,eAArB,gBAEA,gBAA4C1B,QAAQ,CAAC,EAAD,CAApD,2CAAO2B,cAAP,gBAAuBC,iBAAvB,gBAIA7B,SAAS,CAAC,UAAM,CACZmB,YAAY,CAAC,IAAD,CAAZ,CACAhB,KAAK,CAAC2B,GAAN,CAAU,yBAAV,EACKC,IADL,CACU,SAAAC,GAAG,CAAI,CACTT,WAAW,CAACS,GAAG,CAACC,IAAJ,CAASX,QAAV,CAAX,CACAH,YAAY,CAAC,KAAD,CAAZ,CACH,CAJL,EAKKe,KALL,CAKW,SAAAC,GAAG,CAAI,CACVhB,YAAY,CAAC,KAAD,CAAZ,CACAiB,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACH,CARL,EASH,CAXQ,CAWN,EAXM,CAAT,CAaA,GAAMG,CAAAA,aAAa,CAAC,QAAdA,CAAAA,aAAc,CAACC,EAAD,CAAM,CACtBpC,KAAK,CAACqC,MAAN,2BAAgCD,EAAhC,GACCR,IADD,CACM,SAAAC,GAAG,CAAE,CACPT,WAAW,CAAC,SAAAkB,IAAI,QAAEA,CAAAA,IAAI,CAACC,MAAL,CAAY,SAAAC,IAAI,QAAEA,CAAAA,IAAI,CAACC,GAAL,GAAaL,EAAf,EAAhB,CAAF,EAAL,CAAX,CACH,CAHD,EAICL,KAJD,CAIO,SAAAC,GAAG,CAAE,CACRC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACH,CAND,EAOH,CARD,CAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA,GAAMU,CAAAA,YAAY,CAAG,CACjBrB,eAAe,CAAfA,eADiB,CAEjBsB,QAAQ,CAAE,kBAACtB,eAAD,CAAkBE,YAAlB,CAAmC,CAEzCD,kBAAkB,CAACD,eAAD,CAAlB,CACAG,eAAe,CAACD,YAAD,CAAf,CACH,CANgB,CAArB,CAYA,GAAMqB,CAAAA,OAAO,CAAG,CAEZ,CACIC,KAAK,CAAE,eADX,CAEIC,SAAS,CAAE,WAFf,CAGIC,GAAG,CAAE,WAHT,CAIIC,MAAM,CAAE,gBAAAC,SAAS,qBAAI,oBAAC,KAAD,EACjB,KAAK,CAAE,GADU,CAGjB,GAAG,CAAEA,SAHY,CAIjB,QAAQ,CAAC,gqGAJQ,EAAJ,EAJrB,CAFY,CAaZ,CACIJ,KAAK,CAAE,cADX,CAEIC,SAAS,CAAE,MAFf,CAGIC,GAAG,CAAE,MAHT,CAbY,CAkBZ,CACIF,KAAK,CAAE,aADX,CAEIC,SAAS,CAAE,OAFf,CAGIC,GAAG,CAAE,OAHT,CAIIG,MAAM,CAAE,gBAACC,CAAD,CAAIC,CAAJ,QAAUD,CAAAA,CAAC,CAACE,KAAF,CAAUD,CAAC,CAACC,KAAtB,EAJZ,CAlBY,CAwBZ,CACIR,KAAK,CAAE,aADX,CAEIC,SAAS,CAAE,OAFf,CAGIC,GAAG,CAAE,OAHT,CAIIG,MAAM,CAAE,gBAACC,CAAD,CAAIC,CAAJ,QAAUD,CAAAA,CAAC,CAACG,KAAF,CAAUF,CAAC,CAACE,KAAtB,EAJZ,CAxBY,CA8BZ,CACIT,KAAK,CAAE,OADX,CAEIC,SAAS,CAAE,OAFf,CAGIC,GAAG,CAAE,OAHT,CAIIG,MAAM,CAAE,gBAACC,CAAD,CAAIC,CAAJ,QAAUD,CAAAA,CAAC,CAACI,KAAF,CAAUH,CAAC,CAACG,KAAtB,EAJZ,CAKIP,MAAM,CAAE,gBAAAO,KAAK,qBACT,qCAASA,KAAT,CADS,EALjB,CA9BY,CAuCZ,CACIV,KAAK,CAAE,UADX,CAEIE,GAAG,CAAE,UAFT,CAGID,SAAS,CAAE,UAHf,CAIIE,MAAM,CAAE,gBAACQ,QAAD,QACJA,CAAAA,QAAQ,CAACC,KAAT,CAAiB,CAAjB,CACID,QAAQ,CAACE,YAAT,GAA0B,MAA1B,cACI,4BAAM,SAAS,CAAC,WAAhB,OAA+BF,QAAQ,CAACC,KAAxC,CADJ,cAEI,4BAAM,SAAS,CAAC,WAAhB,EAA6BD,QAAQ,CAACC,KAAtC,MAHR,cAIM,sCALF,EAJZ,CAvCY,CAmDZ,CACIZ,KAAK,CAAE,WADX,CAEIE,GAAG,CAAE,UAFT,CAGID,SAAS,CAAE,UAHf,CAII;AACAE,MAAM,CAAE,gBAAAW,QAAQ,qBACZ,qDACI,oBAAC,MAAD,EAAQ,OAAO,CAAEA,QAAjB,CAA2B,QAAQ,CAAE,IAArC,EADJ,CADY,EALpB,CAUIC,OAAO,CAAE,CACL,CAAEC,IAAI,CAAE,WAAR,CAAqBJ,KAAK,CAAC,IAA3B,CADK,CAEL,CAAEI,IAAI,CAAE,aAAR,CAAuBJ,KAAK,CAAE,KAA9B,CAFK,CAVb,CAcIK,QAAQ,CAAE,kBAACL,KAAD,CAAQM,MAAR,QAAmBA,CAAAA,MAAM,CAACJ,QAAP,GAAoBF,KAAvC,EAdd,CAnDY,CAmEZ,CACIZ,KAAK,CAAE,UADX,CAEIE,GAAG,CAAE,YAFT,CAGID,SAAS,CAAE,YAHf,CAII;AACAE,MAAM,CAAE,gBAAAgB,UAAU,qBACd,qDACI,oBAAC,MAAD,EAAQ,OAAO,CAAEA,UAAjB,CAA6B,QAAQ,CAAE,IAAvC,EADJ,CADc,EALtB,CAUIJ,OAAO,CAAE,CACL,CAAEC,IAAI,CAAE,UAAR,CAAoBJ,KAAK,CAAC,IAA1B,CADK,CAEL,CAAEI,IAAI,CAAE,YAAR,CAAsBJ,KAAK,CAAE,KAA7B,CAFK,CAVb,CAcIK,QAAQ,CAAE,kBAACL,KAAD,CAAQM,MAAR,QAAmBA,CAAAA,MAAM,CAACC,UAAP,GAAsBP,KAAzC,EAdd,CAnEY,CAmFZ,CACIZ,KAAK,CAAE,QADX,CAEIE,GAAG,CAAE,QAFT,CAGIC,MAAM,CAAE,gBAACa,IAAD,CAAOE,MAAP,qBACJ,oBAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,eACI,oBAAC,MAAD,EAAQ,OAAO,CAAE,yBAAMjD,CAAAA,OAAO,CAACmD,IAAR,yBAA8BF,MAAM,CAACG,IAArC,EAAN,EAAjB,CAAqE,SAAS,CAAC,UAA/E,CAA0F,IAAI,CAAC,SAA/F,CAAyG,IAAI,cAAE,oBAAC,YAAD,MAA/G,EADJ,cAEI,oBAAC,UAAD,EAAY,SAAS,CAAE,2BAAM/B,CAAAA,aAAa,CAAC4B,MAAM,CAACtB,GAAR,CAAnB,EAAvB,CAAwD,KAAK,CAAC,oBAA9D,CAA8E,IAAI,cAAE,oBAAC,sBAAD,EAAwB,KAAK,CAAE,CAAE0B,KAAK,CAAE,KAAT,CAA/B,EAApF,eACI,oBAAC,MAAD,EAAQ,SAAS,CAAC,UAAlB,CAA6B,IAAI,cAAE,oBAAC,cAAD,MAAnC,CAAuD,MAAM,KAA7D,EADJ,CAFJ,CADI,EAHZ,CAnFY,CAAhB,CAkGA,GAAIC,CAAAA,IAAI,0FAAC,iBAAMC,OAAN,4HACDC,KADC,oBACWnD,QADX,EAELkD,OAAO,CAACE,GAAR,CAAY,SAAAC,CAAC,CAAE,CACX,GAAIC,CAAAA,KAAK,CAAGH,KAAK,CAACI,SAAN,CAAgB,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAAClC,GAAJ,GAAY+B,CAAC,CAAC/B,GAAhB,EAAnB,CAAZ,CACA6B,KAAK,CAACG,KAAD,CAAL,CAAeD,CAAf,CACH,CAHD,EAFK,gCAMEF,KANF,wDAAD,kBAAJF,CAAAA,IAAI,4CAAR,CAUA,GAAIQ,CAAAA,MAAM,2FAAC,kBAAMC,GAAN,gIACHP,KADG,oBACSnD,QADT,EAEP0D,GAAG,CAACN,GAAJ,CAAQ,SAAAnC,EAAE,CAAE,CACRkC,KAAK,CAAGA,KAAK,CAAC/B,MAAN,CAAa,SAAAoC,GAAG,QAAEA,CAAAA,GAAG,CAAClC,GAAJ,GAAWL,EAAb,EAAhB,CAAR,CACH,CAFD,EAFO,iCAKAkC,KALA,0DAAD,kBAANM,CAAAA,MAAM,8CAAV,CAQA,GAAME,CAAAA,UAAU,CAAC,QAAXA,CAAAA,UAAW,EAAI,CACjB5D,kBAAkB,CAAC,IAAD,CAAlB,CACA,GAAIY,CAAAA,IAAI,CAAG,CACP+C,GAAG,CAAExD,eADE,CAAX,CAIArB,KAAK,CAAC+E,KAAN,CAAY,qBAAZ,CAAkCjD,IAAlC,EACCF,IADD,2FACM,kBAAMC,GAAN,0JAEiB+C,CAAAA,MAAM,CAACvD,eAAD,CAFvB,QAEC2D,QAFD,gBAGH5D,WAAW,CAAC4D,QAAD,CAAX,CACA1D,kBAAkB,CAAC,EAAD,CAAlB,CACAE,eAAe,CAAC,EAAD,CAAf,CACAN,kBAAkB,CAAC,KAAD,CAAlB,CANG,wDADN,kEASGa,KATH,CASS,SAAAC,GAAG,CAAE,CACVd,kBAAkB,CAAC,KAAD,CAAlB,CACAe,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACH,CAZD,EAaH,CAnBD,CAsBA,GAAMiD,CAAAA,UAAU,2FAAE,kBAAOC,MAAP,oIACXA,MAAM,GAAK,QADA,4DAEHC,KAAK,CAAC,wDAAD,CAFF,SAOdjE,kBAAkB,CAAC,IAAD,CAAlB,CAEIY,IATU,CASH,CACP+C,GAAG,CAAExD,eADE,CATG,CAYd,GAAG6D,MAAM,GAAK,SAAd,CAAwB,CACpBpD,IAAI,CAAC,UAAD,CAAJ,CAAmB,IAAnB,CACH,CACD,GAAGoD,MAAM,GAAK,WAAd,CAA0B,CACtBpD,IAAI,CAAC,UAAD,CAAJ,CAAmB,KAAnB,CACH,CACD,GAAGoD,MAAM,GAAK,SAAd,CAAwB,CACpBpD,IAAI,CAAC,YAAD,CAAJ,CAAqB,IAArB,CACH,CACD,GAAGoD,MAAM,GAAK,WAAd,CAA0B,CACtBpD,IAAI,CAAC,YAAD,CAAJ,CAAqB,KAArB,CACH,CACD9B,KAAK,CAAC+E,KAAN,CAAY,mBAAZ,CAAgCjD,IAAhC,EACCF,IADD,2FACM,kBAAMC,GAAN,uIAECwC,OAFD,CAEWxC,GAAG,CAACC,IAAJ,CAASX,QAFpB,wBAGaiD,CAAAA,IAAI,CAACC,OAAD,CAHjB,QAGC7B,IAHD,gBAIHpB,WAAW,CAACoB,IAAD,CAAX,CACAlB,kBAAkB,CAAC,EAAD,CAAlB,CACAE,eAAe,CAAC,EAAD,CAAf,CACAN,kBAAkB,CAAC,KAAD,CAAlB,CAPG,wDADN,kEAUGa,KAVH,CAUS,SAAAC,GAAG,CAAE,CACVd,kBAAkB,CAAC,KAAD,CAAlB,CACAe,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACH,CAbD,EAxBc,yDAAF,kBAAViD,CAAAA,UAAU,8CAAhB,CAyCA,mBACI,oBAAC,IAAD,EAAM,KAAK,CAAC,cAAZ,eAGI,oBAAC,MAAD,EAAQ,QAAQ,CAAE1D,YAAY,CAAC6D,MAAb,GAAwB,CAA1C,CAA6C,KAAK,CAAE,CAAEC,KAAK,CAAE,OAAT,CAApD,CAAwE,QAAQ,CAAE,kBAAA5B,KAAK,QAAI/B,CAAAA,iBAAiB,CAAC+B,KAAD,CAArB,EAAvF,CAAqH,WAAW,CAAC,iBAAjI,eACI,oBAAC,MAAD,EAAQ,KAAK,CAAC,SAAd,iBADJ,cAEI,oBAAC,MAAD,EAAQ,KAAK,CAAC,WAAd,mBAFJ,cAGI,oBAAC,MAAD,EAAQ,KAAK,CAAC,SAAd,kBAHJ,cAII,oBAAC,MAAD,EAAQ,KAAK,CAAC,WAAd,oBAJJ,cAKI,oBAAC,MAAD,EAAQ,KAAK,CAAC,QAAd,WALJ,CAHJ,cAWI,oBAAC,MAAD,EAAQ,OAAO,CAAExC,eAAjB,CAAkC,KAAK,CAAE,CAAEqE,UAAU,CAAE,MAAd,CAAzC,CAAiE,OAAO,CAAE,yBAAML,CAAAA,UAAU,CAACxD,cAAD,CAAhB,EAA1E,CAA4G,QAAQ,CAAEF,YAAY,CAAC6D,MAAb,GAAwB,CAAxB,EAA6B3D,cAAc,GAAK,EAAtK,CAA0K,IAAI,CAAC,SAA/K,gBAXJ,CAaKF,YAAY,CAAC6D,MAAb,CAAsB,CAAtB,eAA2B,8BAAQ,KAAK,CAAE,CAAEE,UAAU,CAAE,MAAd,CAAf,EAAwC/D,YAAY,CAAC6D,MAArD,oBAbhC,cAkBI,oBAAC,KAAD,EACI,MAAM,CAAC,KADX,CAEI,YAAY,CAAE1C,YAFlB,CAGI,OAAO,CAAE3B,SAHb,CAII,OAAO,CAAE6B,OAJb,CAKI,UAAU,CAAEzB,QALhB,CAMI,UAAU,CAAE,CAAEoE,eAAe,CAAE,EAAnB,CAAuBC,eAAe,CAAE,IAAxC,CAA8CC,eAAe,CAAE,CAAC,IAAD,CAAO,IAAP,CAAa,IAAb,CAA/D,CAAmFC,eAAe,CAAE,IAApG,CANhB,EAlBJ,CADJ,CA6BH,CA7QD,CA+QA,cAAe7E,CAAAA,WAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom'\n\n\n\nimport axios from 'axios'\n\n\nimport { Card, Button, Table, Space, Image, Switch, Popconfirm, Select } from 'antd';\nimport { EditOutlined, DeleteOutlined, QuestionCircleOutlined } from '@ant-design/icons'\n\nconst { Option } = Select;\n\nconst ProductList = () => {\n    const history = useHistory()\n    const [isLoading, setIsLoading] = useState(false)\n    const [isLoadingButton, setIsLoadingButton] = useState(false)\n    const [products, setProducts] = useState([])\n    const [selectedRowKeys, setSelectedRowKeys] = useState([])\n    const [selectedRows, setSelectedRows] = useState([])\n\n    const [selectedOption, setSelectedOption] = useState(\"\")\n\n\n\n    useEffect(() => {\n        setIsLoading(true)\n        axios.get('/product/getproductsall')\n            .then(res => {\n                setProducts(res.data.products)\n                setIsLoading(false)\n            })\n            .catch(err => {\n                setIsLoading(false)\n                console.log(err);\n            })\n    }, [])\n\n    const deleteProduct=(id)=>{\n        axios.delete(`/product/delete/${id}`)\n        .then(res=>{\n            setProducts(prev=>prev.filter(prod=>prod._id !== id))\n        })\n        .catch(err=>{\n            console.log(err);\n        })\n    }\n\n    // const handleSearch = e => {\n    //     let target = e.target;\n    //     setFilterFn({\n    //         fn: items => {\n    //             if (target.value == \"\")\n    //                 return items;\n    //             else\n    //                 return items.filter(x => x.name.toLowerCase().includes(target.value))\n    //         }\n    //     })\n    // }\n\n\n\n    const rowSelection = {\n        selectedRowKeys,\n        onChange: (selectedRowKeys, selectedRows) => {\n\n            setSelectedRowKeys(selectedRowKeys);\n            setSelectedRows(selectedRows)\n        },\n    };\n\n\n\n\n    const columns = [\n\n        {\n            title: 'Product Image',\n            dataIndex: 'thumbnail',\n            key: 'thumbnail',\n            render: thumbnail => <Image\n                width={100}\n\n                src={thumbnail}\n                fallback=\"data:image/png;base64,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\"\n            />\n        },\n        {\n            title: 'Product Name',\n            dataIndex: 'name',\n            key: 'name',\n        },\n        {\n            title: 'Num of Sale',\n            dataIndex: 'sales',\n            key: 'sales',\n            sorter: (a, b) => a.sales - b.sales,\n        },\n        {\n            title: 'Total Stock',\n            dataIndex: 'stock',\n            key: 'stock',\n            sorter: (a, b) => a.stock - b.stock,\n        },\n        {\n            title: 'Price',\n            dataIndex: 'price',\n            key: 'price',\n            sorter: (a, b) => a.price - b.price,\n            render: price =>\n                <span>$ {price}</span>\n\n        },\n        {\n            title: 'Discount',\n            key: 'discount',\n            dataIndex: 'discount',\n            render: (discount) =>\n                discount.value > 0 ?\n                    discount.discountType === 'flat' ?\n                        <span className=\"new-price\">$ {discount.value}</span> :\n                        <span className=\"new-price\">{discount.value} %</span>\n                    : <span>$ 0</span>\n        },\n\n        {\n            title: 'Published',\n            key: 'isActive',\n            dataIndex: 'isActive',\n            //sorter: (a, b) => Number(a.isActive) - Number(b.isActive),\n            render: isActive => (\n                <>\n                    <Switch checked={isActive} onChange={null} />\n                </>\n            ),\n            filters: [\n                { text: 'Published', value:true },\n                { text: 'Unpublished', value: false },\n            ],\n            onFilter: (value, record) => record.isActive === value\n        },\n        {\n            title: 'Featured',\n            key: 'isFeatured',\n            dataIndex: 'isFeatured',\n            //sorter: (a, b) => Number(a.isFeatured) - Number(b.isFeatured),\n            render: isFeatured => (\n                <>\n                    <Switch checked={isFeatured} onChange={null} />\n                </>\n            ),\n            filters: [\n                { text: 'Featured', value:true },\n                { text: 'Unfeatured', value: false },\n            ],\n            onFilter: (value, record) => record.isFeatured === value\n        },\n        {\n            title: 'Action',\n            key: 'action',\n            render: (text, record) => (\n                <Space size=\"middle\">\n                    <Button onClick={() => history.push(`/product/edit/${record.slug}`)} className='d-center' type='primary' icon={<EditOutlined />}></Button>\n                    <Popconfirm onConfirm={() => deleteProduct(record._id)} title=\"Are you sure？\" icon={<QuestionCircleOutlined style={{ color: 'red' }} />}>\n                        <Button className='d-center' icon={<DeleteOutlined />} danger></Button>\n                    </Popconfirm>\n\n                </Space>\n            ),\n        },\n    ];\n\n    let join=async(updated)=>{\n        let array = [...products]\n        updated.map(u=>{\n            let index = array.findIndex(arr=>arr._id === u._id)\n            array[index] = u\n        })\n        return array\n    }\n\n\n    let Filter=async(ids)=>{\n        let array = [...products]\n        ids.map(id=>{\n            array = array.filter(arr=>arr._id !==id)\n        })\n        return array\n    }\n\n    const bulkDelete=()=>{\n        setIsLoadingButton(true)\n        let data = {\n            ids :selectedRowKeys\n        }\n\n        axios.patch(\"/product/bulkdelete\",data)\n        .then(async(res)=>{\n          \n           let filtered =await Filter(selectedRowKeys)\n           setProducts(filtered)\n           setSelectedRowKeys([])\n           setSelectedRows([])\n           setIsLoadingButton(false)\n           \n        }).catch(err=>{\n            setIsLoadingButton(false)\n            console.log(err);\n        })\n    }\n\n\n    const bulkAction =async (option) => {\n        if(option === 'delete'){\n            return alert(\"You are in guest mode.So you can't perform this action\")\n            return bulkDelete()\n        }\n\n\n        setIsLoadingButton(true)\n\n        let data = {\n            ids :selectedRowKeys\n        }\n        if(option === \"publish\"){\n            data[\"isActive\"] = true\n        }\n        if(option === \"unpublish\"){\n            data[\"isActive\"] = false\n        }\n        if(option === \"feature\"){\n            data[\"isFeatured\"] = true\n        }\n        if(option === \"unfeature\"){\n            data[\"isFeatured\"] = false\n        }\n        axios.patch(\"/product/bulkedit\",data)\n        .then(async(res)=>{\n          \n           let updated = res.data.products\n           let prod =await join(updated)\n           setProducts(prod)\n           setSelectedRowKeys([])\n           setSelectedRows([])\n           setIsLoadingButton(false)\n           \n        }).catch(err=>{\n            setIsLoadingButton(false)\n            console.log(err);\n        })\n    }\n\n\n    return (\n        <Card title=\"All Products\">\n\n\n            <Select disabled={selectedRows.length === 0} style={{ width: \"180px\" }} onChange={value => setSelectedOption(value)} placeholder='Select a action'>\n                <Option value=\"publish\">Make Publish</Option>\n                <Option value=\"unpublish\">Make Unpublish</Option>\n                <Option value=\"feature\">Make Featured</Option>\n                <Option value=\"unfeature\">Make Unfeatured</Option>\n                <Option value=\"delete\">Delete</Option>\n            </Select>\n\n            <Button loading={isLoadingButton} style={{ marginLeft: \"10px\" }} onClick={() => bulkAction(selectedOption)} disabled={selectedRows.length === 0 || selectedOption === ''} type='primary'>Bulk action</Button>\n\n            {selectedRows.length > 0 && <strong style={{ marginLeft: \"10px\" }}>{selectedRows.length} Product seleted</strong>}\n\n\n\n\n            <Table\n                rowKey=\"_id\"\n                rowSelection={rowSelection}\n                loading={isLoading}\n                columns={columns}\n                dataSource={products}\n                pagination={{ defaultPageSize: 10, showSizeChanger: true, pageSizeOptions: ['10', '20', '30'], showQuickJumper: true }}\n            />\n        </Card>\n    );\n};\n\nexport default ProductList;\n\n"]},"metadata":{},"sourceType":"module"}