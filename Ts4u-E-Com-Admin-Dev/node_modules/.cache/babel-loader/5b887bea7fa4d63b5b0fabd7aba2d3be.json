{"ast":null,"code":"var _jsxFileName = \"/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/src/pages/auth/Login.js\";\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\nimport { Form, Input, Button, Checkbox, Alert } from 'antd';\nimport './auth.scss';\nconst layout = {\n  labelCol: {\n    span: 6\n  },\n  wrapperCol: {\n    span: 18\n  }\n};\n\nfunction Login() {\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const onFinish = values => {\n    setLoading(true);\n    axios.post('/admin/signin', values).then(res => {\n      setLoading(false);\n      console.log(res.data);\n\n      if (res.status === 200) {\n        if (res.data.user.role === 'user') {\n          return setError({\n            message: \"Access denied\"\n          });\n        } //console.log(res.data.token);\n\n\n        Cookies.set(\"ecom\", res.data.token);\n        window.location.pathname = '/';\n      }\n    }).catch(err => {\n      setLoading(false);\n      setError(err && err.response && err.response.data); //console.log(err && err.response && err.response.data);\n    });\n  };\n\n  const onFinishFailed = errorInfo => {\n    console.log('Failed:', errorInfo);\n  };\n\n  const onCloseAlert = () => {\n    setError(null);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"auth_container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"auth\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, error && error.message && /*#__PURE__*/React.createElement(Alert, {\n    message: error.message,\n    type: \"error\",\n    closable: true,\n    onClose: onCloseAlert,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(Form, Object.assign({}, layout, {\n    name: \"basic\",\n    initialValues: {\n      remember: true\n    },\n    onFinish: onFinish,\n    onFinishFailed: onFinishFailed,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Form.Item, {\n    initialValue: \"demo@demo.com\",\n    label: \"Emai\",\n    name: \"email\",\n    className: \"label mb-3\",\n    validateStatus: error && error.email ? \"error\" : \"succcess\",\n    help: error && error.email ? error.email : null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Enter your email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    initialValue: \"123456\",\n    label: \"Password\",\n    name: \"password\",\n    className: \"label\",\n    validateStatus: error && error.password ? \"error\" : \"succcess\",\n    help: error && error.password ? error.password : null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Input.Password, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    loading: loading,\n    className: \"primary_btn my-3\",\n    type: \"primary\",\n    htmlType: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }, \"Login\")))));\n}\n\nexport default Login;","map":{"version":3,"sources":["/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/src/pages/auth/Login.js"],"names":["React","useState","axios","Cookies","Form","Input","Button","Checkbox","Alert","layout","labelCol","span","wrapperCol","Login","error","setError","loading","setLoading","onFinish","values","post","then","res","console","log","data","status","user","role","message","set","token","window","location","pathname","catch","err","response","onFinishFailed","errorInfo","onCloseAlert","remember","email","password"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport axios from 'axios'\nimport Cookies from 'js-cookie'\nimport { Form, Input, Button, Checkbox,Alert } from 'antd';\nimport './auth.scss'\nconst layout = {\n  labelCol: {\n    span: 6,\n  },\n  wrapperCol: {\n    span: 18,\n  },\n};\n\nfunction Login() {\n  const [error, setError] = useState(null)\n  const [loading, setLoading] = useState(false)\n\n  const onFinish = (values) => {\n    setLoading(true)\n      axios.post('/admin/signin',values)\n      .then(res=>{\n        setLoading(false)\n        console.log( res.data);\n        if(res.status === 200){\n          if (res.data.user.role === 'user') {\n            return setError({message:\"Access denied\"})\n          }\n         \n          //console.log(res.data.token);\n          Cookies.set(\"ecom\", res.data.token);\n          \n              window.location.pathname = '/'\n        \n      }\n      })\n      .catch(err=>{\n        setLoading(false)\n        setError(err && err.response && err.response.data);\n        //console.log(err && err.response && err.response.data);\n      })\n    \n  };\n\n  const onFinishFailed = (errorInfo) => {\n    console.log('Failed:', errorInfo);\n  };\n\n  const onCloseAlert=()=>{\n      setError(null)\n  }\n\n\n\n  return (\n    <div className=\"auth_container\">\n    <div className=\"auth\">\n      <div className='mb-3'>\n        {\n          error && error.message && <Alert\n            message={error.message}\n            type=\"error\"\n            closable\n            onClose={onCloseAlert}\n          />\n        }\n      </div>\n      <Form\n        {...layout}\n        name=\"basic\"\n        initialValues={{\n          remember: true,\n        }}\n        onFinish={onFinish}\n        onFinishFailed={onFinishFailed}\n      >\n        <Form.Item\n        initialValue=\"demo@demo.com\"\n          label=\"Emai\"\n          name=\"email\"\n          className=\"label mb-3\"\n          validateStatus={error && error.email ? \"error\" : \"succcess\"}\n          help={error && error.email ? error.email : null}\n\n        >\n          <Input placeholder=\"Enter your email\" />\n        </Form.Item>\n\n        <Form.Item\n        initialValue=\"123456\"\n          label=\"Password\"\n          name=\"password\"\n          className=\"label\"\n          validateStatus={error && error.password ? \"error\" : \"succcess\"}\n          help={error && error.password ? error.password : null}\n        >\n          <Input.Password />\n        </Form.Item>\n\n\n\n        <div className='text-center'>\n          <Button loading={loading} className=\"primary_btn my-3\" type=\"primary\" htmlType=\"submit\">\n            Login\n    </Button>\n          {/* <span className='register'> Dont't have an account ? <Link href=\"/auth/register\"><a>register now!</a></Link></span> */}\n        </div>\n      </Form>\n    </div>\n    </div>\n  )\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}