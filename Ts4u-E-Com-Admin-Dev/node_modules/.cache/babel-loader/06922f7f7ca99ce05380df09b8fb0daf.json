{"ast":null,"code":"import _slicedToArray from\"/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import{Tag,Select,Button}from'antd';import Stepper from'@material-ui/core/Stepper';import Step from'@material-ui/core/Step';import StepLabel from'@material-ui/core/StepLabel';import axios from'axios';import moment from'moment';import CheckCircleOutlineIcon from'@material-ui/icons/CheckCircleOutline';import'./orderdetails.scss';import CloseIcon from'@material-ui/icons/Close';var Option=Select.Option;function getSteps(){return['Pending','Processing',\"Shipped\",\"delivered\"];}function reverse(array){return array.map(function(item,idx){return array[array.length-1-idx];});}function OrderDetails(){var params=useParams();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showEdit=_useState2[0],setShowEdit=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),order=_useState4[0],setOrder=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),activeStep=_useState6[0],setActiveStep=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),paymentStatus=_useState8[0],setPaymentStatus=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),orderStatus=_useState10[0],setOrderStatus=_useState10[1];var steps=getSteps();var setStep=function setStep(orderStatus){if(orderStatus===\"pending\"){setActiveStep(0);}if(orderStatus===\"processing\"){setActiveStep(1);}if(orderStatus===\"shipped\"){setActiveStep(2);}if(orderStatus===\"delivered\"){setActiveStep(3);}};useEffect(function(){if(params.invoice){axios.get(\"/order/single/\".concat(params.invoice)).then(function(res){setOrder(res.data.order);setPaymentStatus(res.data.order.paymentStatus);setOrderStatus(res.data.order.orderStatus);setStep(res.data.order.orderStatus);}).catch(function(err){console.log(err);});}},[params]);var handleChangeOrderStatus=function handleChangeOrderStatus(e){if(!showEdit){setShowEdit(true);}setOrderStatus(e);};var handleChangePaymentStatus=function handleChangePaymentStatus(e){if(!showEdit){setShowEdit(true);}setPaymentStatus(e);};var cancleShow=function cancleShow(){setPaymentStatus(order.paymentStatus);setOrderStatus(order.orderStatus);setShowEdit(false);};var updateStatus=function updateStatus(){var data={};if(order.orderStatus!==orderStatus){data.orderStatus=orderStatus;}if(order.paymentStatus!==paymentStatus){data.paymentStatus=paymentStatus;}axios.patch(\"/order/update/\".concat(order.invoice),data).then(function(res){setOrder(res.data.order);setPaymentStatus(res.data.order.paymentStatus);setOrderStatus(res.data.order.orderStatus);setStep(res.data.order.orderStatus);setShowEdit(false);}).catch(function(err){console.log(err);});};return/*#__PURE__*/React.createElement(\"div\",{id:\"orderdetails\"},/*#__PURE__*/React.createElement(\"div\",{className:\"details\"},/*#__PURE__*/React.createElement(\"div\",{className:\"header_info py-4\"},/*#__PURE__*/React.createElement(\"h5\",null,\"Invoice: \",order&&order.invoice),/*#__PURE__*/React.createElement(\"span\",null,moment(order&&order.createdAt).format(\"DD MMM YYYY, hh:mm A\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"order_section\"},/*#__PURE__*/React.createElement(\"div\",{className:\"section_heading\"},/*#__PURE__*/React.createElement(\"h6\",null,\"ORDER STATUS\")),/*#__PURE__*/React.createElement(\"div\",{className:\"status\"},/*#__PURE__*/React.createElement(\"div\",{className:\"status_wrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input_group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Order status\"),/*#__PURE__*/React.createElement(Select,{value:orderStatus,onChange:function onChange(e){return handleChangeOrderStatus(e);},style:{width:120}},/*#__PURE__*/React.createElement(Option,{value:\"pending\"},\"Pending\"),/*#__PURE__*/React.createElement(Option,{value:\"processing\"},\"Processing\"),/*#__PURE__*/React.createElement(Option,{value:\"shipped\"},\"Shipped\"),/*#__PURE__*/React.createElement(Option,{value:\"delivered\"},\"Delivered\"),/*#__PURE__*/React.createElement(Option,{value:\"cancelled\"},\"Cancelled\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"input_group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Payment status\"),/*#__PURE__*/React.createElement(Select,{value:paymentStatus,onChange:function onChange(e){return handleChangePaymentStatus(e);},style:{width:120}},/*#__PURE__*/React.createElement(Option,{value:\"paid\"},\"Paid\"),/*#__PURE__*/React.createElement(Option,{value:\"unpaid\"},\"Unpaid\"),/*#__PURE__*/React.createElement(Option,{value:\"refunded\"},\"Refunded\"),/*#__PURE__*/React.createElement(Option,{value:\"cod\"},\"Cod\"))),showEdit&&/*#__PURE__*/React.createElement(\"div\",{className:\"button\"},/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return cancleShow();},style:{background:\"red\",color:\"white\",marginRight:\"10px\"}},\"Cancle\"),/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return updateStatus();},type:\"primary\"},\"Save\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"step\"},/*#__PURE__*/React.createElement(Stepper,{activeStep:activeStep,alternativeLabel:true},steps.map(function(label){return/*#__PURE__*/React.createElement(Step,{key:label},order&&order.orderStatus==='cancelled'?/*#__PURE__*/React.createElement(StepLabel,{icon:/*#__PURE__*/React.createElement(CloseIcon,{style:{background:\"red\",color:\"white\",borderRadius:\"50%\"}})},label):/*#__PURE__*/React.createElement(StepLabel,null,label));}))),/*#__PURE__*/React.createElement(\"div\",{className:\"order_section\"},/*#__PURE__*/React.createElement(\"div\",{className:\"section_heading\"},/*#__PURE__*/React.createElement(\"h6\",null,\"ORDER SUMMARY\")),/*#__PURE__*/React.createElement(\"div\",{className:\"summary\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-6 col-md-12\"},/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"Order Date:\"),/*#__PURE__*/React.createElement(\"td\",null,order&&moment(order.createdAt).format(\"DD MMM YYYY, hh:mm A\"))),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"Order ID:\"),/*#__PURE__*/React.createElement(\"td\",null,order&&order.invoice)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\" Payment Method:\"),/*#__PURE__*/React.createElement(\"td\",null,order&&order.paymentMethod||\"N/A\")),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"Payment Status:\"),/*#__PURE__*/React.createElement(\"td\",null,order&&order.paymentStatus)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"Order Status:\"),/*#__PURE__*/React.createElement(\"td\",null,order&&order.orderStatus)))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-6 col-md-12\"},/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\" Name:\"),/*#__PURE__*/React.createElement(\"td\",null,order&&order.addressId.name)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"Phone:\"),/*#__PURE__*/React.createElement(\"td\",null,order&&order.addressId.mobileNumber)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\" Shipping Region:\"),/*#__PURE__*/React.createElement(\"td\",null,order&&order.addressId.region)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\" Shipping Area:\"),/*#__PURE__*/React.createElement(\"td\",null,order&&order.addressId.area)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\" Shipping Address:\"),/*#__PURE__*/React.createElement(\"td\",null,order&&order.addressId.address))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"order_section\"},/*#__PURE__*/React.createElement(\"div\",{className:\"section_heading\"},/*#__PURE__*/React.createElement(\"h6\",null,\"ORDER DETAILS\")),/*#__PURE__*/React.createElement(\"div\",{className:\"item_details p-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"overflow-auto\"},/*#__PURE__*/React.createElement(\"table\",{className:\"w-100 border_bottom\"},/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",{className:\"border_bottom\"},/*#__PURE__*/React.createElement(\"td\",{style:{width:\"60%\"}},\"Description\"),/*#__PURE__*/React.createElement(\"td\",{className:\"text-center\"},\"Quantity\"),/*#__PURE__*/React.createElement(\"td\",{className:\"text-center\"},\"Amount\")),order&&order.items.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index,className:\"\"},/*#__PURE__*/React.createElement(\"td\",{className:\"mt-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center mt-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"img\",{style:{height:\"80px\",width:\"80px\",objectFit:\"cover\",marginRight:\"10px\"},src:item.thumbnail})),/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"a\",{href:\"#\"},/*#__PURE__*/React.createElement(\"p\",{className:\"\"},item.productName))))),/*#__PURE__*/React.createElement(\"td\",{className:\"text-center\"},/*#__PURE__*/React.createElement(\"p\",{className:\"font-weight-bold\"},\"$ \",item.payablePrice,\" X \",item.purchasedQty)),/*#__PURE__*/React.createElement(\"td\",{className:\"text-center\"},/*#__PURE__*/React.createElement(\"p\",{className:\"font-weight-bold\"},\"$ \",parseInt(item.payablePrice)*parseInt(item.purchasedQty))));}))),/*#__PURE__*/React.createElement(\"table\",{className:\"w-100 mt-4\"},/*#__PURE__*/React.createElement(\"tbody\",{className:\"mt-4\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{style:{width:\"50%\"}},\"Status: \",order&&order.paymentStatus),/*#__PURE__*/React.createElement(\"td\",{style:{width:\"13%\"}},/*#__PURE__*/React.createElement(\"span\",null,\"Total price :\"),/*#__PURE__*/React.createElement(\"div\",{className:\"font-weight-bold\"},\"$ \",order&&order.totalAmount)),/*#__PURE__*/React.createElement(\"td\",{className:\"text-center\",style:{width:\"13%\"}},/*#__PURE__*/React.createElement(\"span\",null,\"Total paid :\"),/*#__PURE__*/React.createElement(\"div\",{className:\"font-weight-bold\"},\"$ \",order&&order.paidAmount)),/*#__PURE__*/React.createElement(\"td\",{className:\"text-center\",style:{width:\"13%\"}},/*#__PURE__*/React.createElement(\"span\",null,\"Due :\"),/*#__PURE__*/React.createElement(\"div\",{className:\"font-weight-bold\"},\"$ \",order&&order.totalAmount-order.paidAmount)))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"order_section\"},/*#__PURE__*/React.createElement(\"div\",{className:\"section_heading\"},/*#__PURE__*/React.createElement(\"h6\",null,\"ORDER TIMELINE\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"steps\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"timeline\"},order&&reverse(order.orderHistories).map(function(history,index){return/*#__PURE__*/React.createElement(\"div\",{key:index,className:\"timeline-container primary\"},/*#__PURE__*/React.createElement(\"div\",{className:\"timeline-icon\"},/*#__PURE__*/React.createElement(CheckCircleOutlineIcon,{className:\"icon\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"timeline-body\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"timeline-title\"},/*#__PURE__*/React.createElement(\"span\",{className:\"badge\"},history.type)),/*#__PURE__*/React.createElement(\"p\",null,history.note),/*#__PURE__*/React.createElement(\"p\",{className:\"timeline-subtitle\"},moment(history.date).fromNow())));}))))));}export default OrderDetails;","map":{"version":3,"sources":["/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/src/pages/orders/OrderDetails.js"],"names":["React","useState","useEffect","useParams","Tag","Select","Button","Stepper","Step","StepLabel","axios","moment","CheckCircleOutlineIcon","CloseIcon","Option","getSteps","reverse","array","map","item","idx","length","OrderDetails","params","showEdit","setShowEdit","order","setOrder","activeStep","setActiveStep","paymentStatus","setPaymentStatus","orderStatus","setOrderStatus","steps","setStep","invoice","get","then","res","data","catch","err","console","log","handleChangeOrderStatus","e","handleChangePaymentStatus","cancleShow","updateStatus","patch","createdAt","format","width","background","color","marginRight","label","borderRadius","paymentMethod","addressId","name","mobileNumber","region","area","address","items","index","height","objectFit","thumbnail","productName","payablePrice","purchasedQty","parseInt","totalAmount","paidAmount","orderHistories","history","type","note","date","fromNow"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useParams } from 'react-router-dom'\nimport { Tag, Select,Button } from 'antd';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport axios from 'axios'\nimport moment from 'moment'\nimport CheckCircleOutlineIcon from '@material-ui/icons/CheckCircleOutline';\nimport './orderdetails.scss'\nimport CloseIcon from '@material-ui/icons/Close';\nconst { Option } = Select;\nfunction getSteps() {\n    return ['Pending', 'Processing', \"Shipped\", \"delivered\"];\n}\nfunction reverse(array){\n    return array.map((item,idx) => array[array.length-1-idx])\n  }\n\nfunction OrderDetails() {\n    const params = useParams()\n\n    const [showEdit, setShowEdit] = useState(false)\n    const [order, setOrder] = useState(null)\n    const [activeStep, setActiveStep] = useState(0);\n\n    const [paymentStatus, setPaymentStatus] = useState(\"\")\n    const [orderStatus, setOrderStatus] = useState(\"\")\n\n    const steps = getSteps();\n\n    const setStep=(orderStatus)=>{\n        if(orderStatus === \"pending\"){\n            setActiveStep(0)\n        }\n        if(orderStatus === \"processing\"){\n            setActiveStep(1)\n        }\n        if(orderStatus === \"shipped\"){\n            setActiveStep(2)\n        }\n        if(orderStatus === \"delivered\"){\n            setActiveStep(3)\n        }\n    }\n    useEffect(() => {\n        if (params.invoice) {\n            axios.get(`/order/single/${params.invoice}`)\n                .then(res => {\n                    setOrder(res.data.order)\n                    setPaymentStatus(res.data.order.paymentStatus);\n                    setOrderStatus(res.data.order.orderStatus);\n                    setStep(res.data.order.orderStatus)\n                })\n                .catch(err => {\n                    console.log(err);\n                })\n        }\n    }, [params])\n\n\n\n    const handleChangeOrderStatus=(e)=>{\n        if(!showEdit){\n            setShowEdit(true)\n        }\n     \n        setOrderStatus(e)\n    }\n    const handleChangePaymentStatus=(e)=>{\n        if(!showEdit){\n            setShowEdit(true)\n        }\n        setPaymentStatus(e)\n    }\n\n    const cancleShow=()=>{\n        setPaymentStatus(order.paymentStatus)\n        setOrderStatus(order.orderStatus)\n    \n        setShowEdit(false)\n    }\n\n    const updateStatus=()=>{\n        let data ={}\n        if(order.orderStatus !== orderStatus){\n            data.orderStatus = orderStatus\n        }\n        if(order.paymentStatus !== paymentStatus){\n            data.paymentStatus = paymentStatus\n        }\n\n        axios.patch(`/order/update/${order.invoice}`,data)\n        .then(res=>{\n            setOrder(res.data.order)\n            setPaymentStatus(res.data.order.paymentStatus);\n            setOrderStatus(res.data.order.orderStatus);\n            setStep(res.data.order.orderStatus)\n            setShowEdit(false)\n        })\n        .catch(err => {\n            console.log(err);\n        })\n    }\n    return (\n        <div id=\"orderdetails\">\n\n            <div className=\"details\">\n                <div className=\"header_info py-4\">\n                    <h5>Invoice: {order && order.invoice}</h5>\n                    <span >{moment(order && order.createdAt).format(\"DD MMM YYYY, hh:mm A\")}</span>\n\n                </div>\n\n                <div className=\"order_section\">\n                    <div className=\"section_heading\">\n                        <h6>ORDER STATUS</h6>\n                    </div>\n                    <div className=\"status\">\n                        <div className=\"status_wrapper\">\n                        <div className=\"input_group\">\n                            <label>Order status</label>\n                            <Select \n                            value={orderStatus}\n                            onChange={(e)=>handleChangeOrderStatus(e)}  \n                            style={{ width: 120 }}\n                            >\n                                <Option value=\"pending\">Pending</Option>\n                                <Option value=\"processing\">Processing</Option>\n                                <Option value=\"shipped\">Shipped</Option>\n                                <Option value=\"delivered\">Delivered</Option>\n                                <Option value=\"cancelled\">Cancelled</Option>\n                            </Select>\n                        </div>\n                        <div className=\"input_group\">\n                            <label>Payment status</label>\n                            <Select \n                            value={paymentStatus}\n                            onChange={(e)=>handleChangePaymentStatus(e)} \n                            style={{ width: 120 }}\n                            >\n                                <Option value=\"paid\">Paid</Option>\n                                <Option value=\"unpaid\">Unpaid</Option>\n                                <Option value=\"refunded\">Refunded</Option>\n                                <Option value=\"cod\">Cod</Option>\n\n                            </Select>\n                        </div>\n                        {\n                            showEdit && <div className=\"button\">\n                            <Button onClick={()=>cancleShow()} style={{background:\"red\",color:\"white\",marginRight:\"10px\"}}   >Cancle</Button>\n                            <Button onClick={()=>updateStatus()} type=\"primary\"  >Save</Button>\n                        </div>\n                        }\n                        \n                        </div>\n                       \n\n                    </div>\n                </div>\n\n                <div className=\"step\">\n\n                    <Stepper   activeStep={activeStep} alternativeLabel>\n                        {steps.map((label) => (\n                            <Step  key={label}>\n                                {\n                                    order && order.orderStatus === 'cancelled' ?\n                                    <StepLabel icon={<CloseIcon style={{background:\"red\",color:\"white\",borderRadius:\"50%\"}}></CloseIcon>} >{label}</StepLabel>:\n                                    <StepLabel >{label}</StepLabel>\n                                    \n                                }\n                                \n                            </Step>\n                        ))}\n                    </Stepper>\n                </div>\n\n                <div className=\"order_section\">\n                    <div className=\"section_heading\">\n                        <h6>ORDER SUMMARY</h6>\n                    </div>\n\n                    <div className=\"summary\">\n                        <div className=\"row\">\n                            <div className=\"col-lg-6 col-md-12\">\n\n                                <table>\n                                    <tr >\n                                        <td>Order Date:</td>\n                                        <td>{order && moment(order.createdAt).format(\"DD MMM YYYY, hh:mm A\")}</td>\n                                    </tr>\n                                    <tr>\n                                        <td>Order ID:</td>\n                                        <td>{order && order.invoice}</td>\n                                    </tr>\n\n                                    <tr>\n                                        <td> Payment Method:</td>\n                                        <td>{order && order.paymentMethod || \"N/A\"}</td>\n                                    </tr>\n                                    <tr>\n                                        <td>Payment Status:</td>\n                                        <td>{order && order.paymentStatus}</td>\n                                    </tr>\n                                    <tr>\n                                        <td>Order Status:</td>\n                                        <td>{order && order.orderStatus}</td>\n                                    </tr>\n                                </table>\n\n\n\n                            </div>\n                            <div className=\"col-lg-6 col-md-12\">\n                                <table>\n                                    <tr>\n                                        <td> Name:</td>\n                                        <td>{order && order.addressId.name}</td>\n                                    </tr>\n                                    <tr>\n                                        <td>Phone:</td>\n                                        <td>{order && order.addressId.mobileNumber}</td>\n                                    </tr>\n                                    <tr>\n                                        <td> Shipping Region:</td>\n                                        <td>{order && order.addressId.region}</td>\n                                    </tr>\n                                    <tr>\n                                        <td> Shipping Area:</td>\n                                        <td>{order && order.addressId.area}</td>\n                                    </tr>\n                                    <tr>\n                                        <td> Shipping Address:</td>\n                                        <td>{order && order.addressId.address}</td>\n                                    </tr>\n\n\n                                </table>\n\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n\n\n\n\n                <div className=\"order_section\">\n                    <div className=\"section_heading\">\n                        <h6>ORDER DETAILS</h6>\n                    </div>\n\n                    <div className=\"item_details p-4\">\n                        <div className=\"overflow-auto\">\n                            <table className=\"w-100 border_bottom\">\n                                <tbody>\n                                    <tr className=\"border_bottom\">\n                                        <td style={{ width: \"60%\" }} >Description</td>\n                                        <td className='text-center' >Quantity</td>\n                                        <td className='text-center'>Amount</td>\n\n                                    </tr>\n\n                                    {\n                                        order && order.items.map((item, index) => {\n                                            return (\n                                                <tr key={index} className=\"\">\n                                                    <td className=\"mt-2\">\n                                                        <div className=\"d-flex align-items-center mt-2\">\n                                                            <div className=\"\">\n                                                                <img style={{ height: \"80px\", width: \"80px\", objectFit: \"cover\", marginRight: \"10px\" }} src={item.thumbnail} />\n                                                            </div>\n                                                            <div className=\"\">\n                                                                <a href=\"#\">\n                                                                    <p className=\"\">{item.productName}</p>\n                                                                </a>\n\n                                                            </div>\n                                                        </div>\n                                                    </td>\n                                                    <td className=\"text-center\">\n                                                        <p className='font-weight-bold'>$ {item.payablePrice} X {item.purchasedQty}</p>\n                                                    </td>\n                                                    <td className=\"text-center\">\n                                                        <p className='font-weight-bold'>$ {parseInt(item.payablePrice) * parseInt(item.purchasedQty)}</p>\n                                                    </td>\n                                                </tr>\n                                            )\n                                        })\n                                    }\n\n                                </tbody>\n                            </table>\n\n\n                            <table className='w-100 mt-4'>\n                                <tbody className='mt-4'>\n                                    <tr >\n                                        <td style={{ width: \"50%\" }}>Status: {order && order.paymentStatus}</td>\n                                        <td style={{ width: \"13%\" }}>\n                                            <span>Total price :</span>\n                                            <div className='font-weight-bold'>$ {order && order.totalAmount}</div>\n                                        </td>\n                                        <td className='text-center' style={{ width: \"13%\" }}>\n                                            <span>Total paid :</span>\n                                            <div className='font-weight-bold'>$ {order && order.paidAmount}</div>\n                                        </td>\n                                        <td className='text-center' style={{ width: \"13%\" }}>\n                                            <span >Due :</span>\n                                            <div className='font-weight-bold'>$ {order && order.totalAmount - order.paidAmount}</div>\n                                        </td>\n\n                                    </tr>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n\n                </div>\n\n\n                <div className=\"order_section\">\n                    <div className=\"section_heading\">\n                        <h6>ORDER TIMELINE</h6>\n                    </div>\n                </div>\n\n                <div className=\"steps\">\n\n\n\n                    <div className=\"container\">\n                        <div className=\"timeline\">\n\n                            {\n                                order && reverse(order.orderHistories).map((history, index) => {\n                                    return (\n                                        <div key={index} className=\"timeline-container primary\">\n                                            <div className=\"timeline-icon\">\n                                                <CheckCircleOutlineIcon className='icon' />\n                                            </div>\n                                            <div className=\"timeline-body\">\n                                                <h4 className=\"timeline-title\"><span className=\"badge\">{history.type}</span></h4>\n                                                <p>{history.note}</p>\n                                                <p className=\"timeline-subtitle\">{moment(history.date).fromNow()}</p>\n                                            </div>\n                                        </div>\n                                    )\n                                })\n                            }\n\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n        </div>\n\n    )\n}\n\nexport default OrderDetails\n\n\n\n\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}