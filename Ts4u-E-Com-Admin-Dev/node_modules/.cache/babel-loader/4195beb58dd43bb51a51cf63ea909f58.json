{"ast":null,"code":"import _objectSpread from\"/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Select,Col,Card,Input,Button,Table,Tag,Space,Image,Switch,Popconfirm,Modal,DatePicker}from'antd';import axios from'axios';import{useParams}from'react-router-dom';import AddToCamp from'./AddToCamp';var Option=Select.Option;function Campaign(){var params=useParams();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isModalVisible=_useState2[0],setIsModalVisible=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),products=_useState4[0],setProducts=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),selectedRowKeys=_useState6[0],setSelectedRowKeys=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),selectedRows=_useState8[0],setSelectedRows=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),categories=_useState10[0],setCategories=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),subCategories=_useState12[0],setSubCategories=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),category=_useState14[0],setCategory=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),subCategory=_useState16[0],setSubCategory=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),brands=_useState18[0],setBrands=_useState18[1];var _useState19=useState(''),_useState20=_slicedToArray(_useState19,2),brand=_useState20[0],setBrand=_useState20[1];var fetchCategories=function fetchCategories(){axios.get(\"/category/getcategory\").then(function(res){setCategories(res.data.categories);}).catch(function(err){console.log(err);});};var fetchBrands=function fetchBrands(){axios.get('/brand/get').then(function(res){// console.log(res.data.brands);\nsetBrands(res.data.brands);}).catch(function(err){err&&err.response&&console.log(err.response.data);});};var fetchProducts=function fetchProducts(){axios.get('/campaign/getselectedproduct/'+params.campaignid).then(function(res){setProducts(res.data.products);}).catch(function(err){err&&err.response&&console.log(err.response.data);});};useEffect(function(){fetchCategories();fetchBrands();fetchProducts();},[]);//category actions\nuseEffect(function(){if(category){var _filterd$;var filterd=categories.filter(function(cat){return cat._id===category;});setSubCategories((_filterd$=filterd[0])===null||_filterd$===void 0?void 0:_filterd$.children);setSubCategory('');}else{setSubCategories([]);setSubCategory('');}},[category]);var showModal=function showModal(){setIsModalVisible(true);};var handleOk=function handleOk(){setIsModalVisible(false);};var handleCancel=function handleCancel(){setIsModalVisible(false);};var getValueDiscount=function getValueDiscount(_id){// console.log(_id);\nvar campaigns=products.filter(function(prod){return prod._id===_id;})[0].campaigns;var discount=campaigns.filter(function(camp){return camp.campaign===params.campaignid;})[0].discount;return discount;};var columns=[{title:'Name',dataIndex:'name',render:function render(text){return/*#__PURE__*/React.createElement(\"a\",null,text);}},{title:'Thumbnail',key:'thumbnail',dataIndex:'thumbnail',render:function render(thumbnail){return/*#__PURE__*/React.createElement(Image,{width:30,src:thumbnail,fallback:\"data:image/png;base64,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\"});}},{title:'price',dataIndex:'price',key:'price',render:function render(price){return/*#__PURE__*/React.createElement(\"span\",null,\"$ \",price);}},{title:'Previous Discount',key:'discount',dataIndex:'discount',render:function render(discount){return discount.value>0?discount.discountType==='flat'?/*#__PURE__*/React.createElement(\"span\",{className:\"new-price\"},\"$ \",discount.value):/*#__PURE__*/React.createElement(\"span\",{className:\"new-price\"},discount.value,\" %\"):/*#__PURE__*/React.createElement(\"span\",null,\"$ 0\");}},{title:'Campaign Discount',dataIndex:'_id',key:'_id',render:function render(_id){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Input,{defaultValue:getValueDiscount(_id).value,style:{width:\"50%\",marginRight:\"10px\"},onChange:function onChange(e){return handleColumnValue(e.target.value,_id,\"discountvalue\");},type:\"number\",disabled:!selectedRowKeys.includes(_id)}),/*#__PURE__*/React.createElement(Select,{dropdownStyle:{zIndex:\"1111\"},style:{width:\"45%\"},placeholder:\"Select discount type\",onChange:function onChange(value){return handleColumnValue(value,_id,\"discounttype\");},defaultValue:getValueDiscount(_id).discountType//value={discountType}\n,disabled:!selectedRowKeys.includes(_id)},/*#__PURE__*/React.createElement(Option,{value:\"flat\"},\"Flat\"),/*#__PURE__*/React.createElement(Option,{value:\"percent\"},\"Percent\")));}}];var handleColumnValue=function handleColumnValue(value,_id,type){if(type==='discountvalue'){var selected=_toConsumableArray(selectedRows);var index=selected.findIndex(function(r){return r._id===_id;});selected[index]=_objectSpread(_objectSpread({},selected[index]),{},{campDiscountValue:value});setSelectedRows(selected);}if(type==='discounttype'){var _selected=_toConsumableArray(selectedRows);var _index=_selected.findIndex(function(r){return r._id===_id;});_selected[_index]=_objectSpread(_objectSpread({},_selected[_index]),{},{campDiscountType:value});setSelectedRows(_selected);}};var rowSelection={selectedRowKeys:selectedRowKeys,onChange:function onChange(selectedRowKeys,selectedRows){setSelectedRowKeys(selectedRowKeys);setSelectedRows(selectedRows);}};var updateToCamp=function updateToCamp(){var campaignId=params.campaignid;selectedRows.map(function(rows){var data={campaignId:campaignId,productId:rows._id,value:rows.campDiscountValue,discountType:rows.campDiscountType};axios.patch(\"/campaign/updateproducttocampaign\",data).then(function(res){var array=_toConsumableArray(products);var index=array.findIndex(function(a){return a._id===res.data.product._id;});array[index]=res.data.product;setProducts(array);setSelectedRows(function(prev){return prev.filter(function(prod){return prod._id!==res.data.product._id;});});setSelectedRowKeys(function(prev){return prev.filter(function(_id){return _id!==res.data.product._id;});});}).catch(function(err){err&&err.response&&console.log(err.response.data);});});};var removeFromCamp=function removeFromCamp(){var campaignId=params.campaignid;selectedRows.map(function(rows){var data={campaignId:campaignId,productId:rows._id};axios.patch(\"/campaign/removeproductfromcampaign\",data).then(function(res){setProducts(function(prev){return prev.filter(function(prod){return prod._id!==res.data.product._id;});});setSelectedRows(function(prev){return prev.filter(function(prod){return prod._id!==res.data.product._id;});});setSelectedRowKeys(function(prev){return prev.filter(function(_id){return _id!==res.data.product._id;});});}).catch(function(err){err&&err.response&&console.log(err.response.data);});});};return/*#__PURE__*/React.createElement(\"div\",{className:\"campaign\"},/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return showModal();}},\"Add products\"),/*#__PURE__*/React.createElement(Card,{style:{marginTop:\"15px\"},title:\"Products\"},/*#__PURE__*/React.createElement(\"div\",{className:\"campaign_wrapper\"},/*#__PURE__*/React.createElement(Button,{style:{marginRight:\"10px\"},onClick:function onClick(){return updateToCamp();},disabled:selectedRows.length===0,type:\"primary\"},\"Update Products\"),/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return removeFromCamp();},disabled:selectedRows.length===0,type:\"danger\"},\"Remove Products\"),selectedRows.length>0&&/*#__PURE__*/React.createElement(\"strong\",{style:{marginLeft:\"10px\"}},selectedRows.length,\" products seleted\"),/*#__PURE__*/React.createElement(Table,{rowSelection:rowSelection,columns:columns,dataSource:products,rowKey:\"_id\"}))),/*#__PURE__*/React.createElement(AddToCamp,{isModalVisible:isModalVisible,handleCancel:handleCancel,handleOk:handleOk,params:params,sendProduct:function sendProduct(prod){return setProducts(function(prev){return[prod].concat(_toConsumableArray(prev));});}}));}export default Campaign;","map":{"version":3,"sources":["/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/src/pages/campaigns/Campaign.js"],"names":["React","useState","useEffect","Select","Col","Card","Input","Button","Table","Tag","Space","Image","Switch","Popconfirm","Modal","DatePicker","axios","useParams","AddToCamp","Option","Campaign","params","isModalVisible","setIsModalVisible","products","setProducts","selectedRowKeys","setSelectedRowKeys","selectedRows","setSelectedRows","categories","setCategories","subCategories","setSubCategories","category","setCategory","subCategory","setSubCategory","brands","setBrands","brand","setBrand","fetchCategories","get","then","res","data","catch","err","console","log","fetchBrands","response","fetchProducts","campaignid","filterd","filter","cat","_id","children","showModal","handleOk","handleCancel","getValueDiscount","campaigns","prod","discount","camp","campaign","columns","title","dataIndex","render","text","key","thumbnail","price","value","discountType","width","marginRight","e","handleColumnValue","target","includes","zIndex","type","selected","index","findIndex","r","campDiscountValue","campDiscountType","rowSelection","onChange","updateToCamp","campaignId","map","rows","productId","patch","array","a","product","prev","removeFromCamp","marginTop","length","marginLeft"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Select, Col, Card, Input, Button, Table, Tag, Space, Image, Switch, Popconfirm, Modal, DatePicker } from 'antd';\nimport axios from 'axios'\nimport { useParams } from 'react-router-dom';\nimport AddToCamp from './AddToCamp';\nconst { Option } = Select;\n\n\n\nfunction Campaign() {\n    let params = useParams()\n    const [isModalVisible, setIsModalVisible] = useState(false);\n    const [products, setProducts] = useState([])\n\n    const [selectedRowKeys, setSelectedRowKeys] = useState([])\n    const [selectedRows, setSelectedRows] = useState([])\n\n\n    const [categories, setCategories] = useState([])\n    const [subCategories, setSubCategories] = useState([])\n    const [category, setCategory] = useState('')\n    const [subCategory, setSubCategory] = useState('')\n    const [brands, setBrands] = useState([])\n    const [brand, setBrand] = useState('')\n\n    const fetchCategories = () => {\n        axios.get(\"/category/getcategory\")\n            .then(res => {\n                setCategories(res.data.categories)\n            })\n            .catch(err => {\n                console.log(err);\n            })\n    }\n\n    const fetchBrands = () => {\n        axios.get('/brand/get')\n            .then(res => {\n                // console.log(res.data.brands);\n                setBrands(res.data.brands)\n            })\n            .catch(err => {\n                err && err.response && console.log(err.response.data)\n            })\n    }\n\n    const fetchProducts = () => {\n        axios.get('/campaign/getselectedproduct/' + params.campaignid)\n            .then(res => {\n                setProducts(res.data.products)\n            })\n            .catch(err => {\n                err && err.response && console.log(err.response.data)\n            })\n    }\n\n\n    useEffect(() => {\n        fetchCategories()\n        fetchBrands()\n        fetchProducts()\n    }, [])\n\n    //category actions\n    useEffect(() => {\n        if (category) {\n            let filterd = categories.filter(cat => cat._id === category)\n            setSubCategories(filterd[0]?.children)\n            setSubCategory('')\n\n        } else {\n            setSubCategories([])\n            setSubCategory('')\n\n        }\n    }, [category])\n\n\n    const showModal = () => {\n        setIsModalVisible(true);\n    };\n\n    const handleOk = () => {\n        setIsModalVisible(false);\n    };\n\n    const handleCancel = () => {\n        setIsModalVisible(false);\n    };\n\n\n\n    const getValueDiscount = (_id) => {\n        // console.log(_id);\n        let campaigns = products.filter(prod => prod._id === _id)[0].campaigns\n\n        let discount = campaigns.filter(camp => camp.campaign === params.campaignid)[0].discount\n        return discount\n\n    }\n    const columns = [\n        {\n            title: 'Name',\n            dataIndex: 'name',\n            render: (text) => <a>{text}</a>,\n        },\n        {\n            title: 'Thumbnail',\n            key: 'thumbnail',\n            dataIndex: 'thumbnail',\n            render: thumbnail => <Image\n                width={30}\n                src={thumbnail}\n                fallback=\"data:image/png;base64,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\"\n            />\n        },\n        {\n            title: 'price',\n            dataIndex: 'price',\n            key: 'price',\n            render: price =>\n                <span>$ {price}</span>\n\n        },\n        {\n            title: 'Previous Discount',\n            key: 'discount',\n            dataIndex: 'discount',\n            render: (discount) =>\n                discount.value > 0 ?\n                    discount.discountType === 'flat' ?\n                        <span className=\"new-price\">$ {discount.value}</span> :\n                        <span className=\"new-price\">{discount.value} %</span>\n                    : <span>$ 0</span>\n        },\n        {\n            title: 'Campaign Discount',\n            dataIndex: '_id',\n            key: '_id',\n            render: _id =>\n                <>\n                    <Input\n                        defaultValue={getValueDiscount(_id).value}\n                        style={{ width: \"50%\", marginRight: \"10px\" }}\n                        onChange={(e) => handleColumnValue(e.target.value, _id, \"discountvalue\")}\n                        type='number'\n                        disabled={!selectedRowKeys.includes(_id)}\n\n                    >\n\n                    </Input>\n                    <Select\n                        dropdownStyle={{ zIndex: \"1111\" }}\n                        style={{ width: \"45%\" }}\n                        placeholder=\"Select discount type\"\n                        onChange={(value) => handleColumnValue(value, _id, \"discounttype\")}\n                        defaultValue={getValueDiscount(_id).discountType}\n                        //value={discountType}\n                        disabled={!selectedRowKeys.includes(_id)}\n\n                    >\n                        <Option value=\"flat\">Flat</Option>\n                        <Option value=\"percent\">Percent</Option>\n                    </Select>\n                </>\n\n        },\n    ];\n\n\n\n    const handleColumnValue = (value, _id, type) => {\n\n        if (type === 'discountvalue') {\n            let selected = [...selectedRows]\n            let index = selected.findIndex(r => r._id === _id)\n            selected[index] = { ...selected[index], campDiscountValue: value }\n            setSelectedRows(selected)\n        }\n        if (type === 'discounttype') {\n            let selected = [...selectedRows]\n            let index = selected.findIndex(r => r._id === _id)\n            selected[index] = { ...selected[index], campDiscountType: value }\n            setSelectedRows(selected)\n        }\n    }\n\n\n    const rowSelection = {\n        selectedRowKeys,\n        onChange: (selectedRowKeys, selectedRows) => {\n\n            setSelectedRowKeys(selectedRowKeys);\n            setSelectedRows(selectedRows)\n        },\n    };\n\n\n\n    const updateToCamp = () => {\n        let campaignId = params.campaignid\n        selectedRows.map(rows => {\n            let data = {\n                campaignId: campaignId,\n                productId: rows._id,\n                value: rows.campDiscountValue,\n                discountType: rows.campDiscountType\n            }\n            axios.patch(`/campaign/updateproducttocampaign`, data)\n                .then(res => {\n                    let array = [...products]\n                    let index = array.findIndex(a=>a._id === res.data.product._id)\n                    array[index] = res.data.product\n                    setProducts(array)\n                    setSelectedRows(prev => prev.filter(prod => prod._id !== res.data.product._id))\n                    setSelectedRowKeys(prev => prev.filter(_id => _id !== res.data.product._id))\n                })\n                .catch(err => {\n                    err && err.response && console.log(err.response.data)\n                })\n        })\n    }\n\n\n    const removeFromCamp = () => {\n        let campaignId = params.campaignid\n        selectedRows.map(rows => {\n            let data = {\n                campaignId: campaignId,\n                productId: rows._id,\n            }\n            axios.patch(`/campaign/removeproductfromcampaign`, data)\n                .then(res => {\n                    setProducts(prev=>prev.filter(prod => prod._id !== res.data.product._id))\n                    setSelectedRows(prev => prev.filter(prod => prod._id !== res.data.product._id))\n                    setSelectedRowKeys(prev => prev.filter(_id => _id !== res.data.product._id))\n                })\n                .catch(err => {\n                    err && err.response && console.log(err.response.data)\n                })\n        })\n    }\n\n    return (\n        <div className='campaign'>\n            <Button onClick={() => showModal()}>Add products</Button>\n            <Card style={{ marginTop: \"15px\" }} title=\"Products\" >\n                <div className='campaign_wrapper'>\n\n                    <Button style={{marginRight:\"10px\"}} onClick={() => updateToCamp()} disabled={selectedRows.length === 0} type='primary'>Update Products</Button>\n                    <Button onClick={() => removeFromCamp()} disabled={selectedRows.length === 0} type='danger'>Remove Products</Button>\n                    {selectedRows.length > 0 && <strong style={{ marginLeft: \"10px\" }}>{selectedRows.length} products seleted</strong>}\n                    <Table\n                        rowSelection={rowSelection}\n                        columns={columns}\n                        dataSource={products}\n                        rowKey=\"_id\"\n\n                    />\n                </div>\n            </Card>\n            <AddToCamp\n                isModalVisible={isModalVisible}\n                handleCancel={handleCancel}\n                handleOk={handleOk}\n                params={params}\n                sendProduct={(prod)=>setProducts(prev=>[prod,...prev])}\n            />\n\n        </div>\n    )\n}\n\nexport default Campaign\n"]},"metadata":{},"sourceType":"module"}