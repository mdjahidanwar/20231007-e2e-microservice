{"ast":null,"code":"var _jsxFileName = \"/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/src/pages/product/ProductList.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport { Card, Button, Table, Space, Image, Switch, Popconfirm, Select } from 'antd';\nimport { EditOutlined, DeleteOutlined, QuestionCircleOutlined } from '@ant-design/icons';\nconst {\n  Option\n} = Select;\n\nconst ProductList = () => {\n  const history = useHistory();\n  const [isLoading, setIsLoading] = useState(false);\n  const [isLoadingButton, setIsLoadingButton] = useState(false);\n  const [products, setProducts] = useState([]);\n  const [selectedRowKeys, setSelectedRowKeys] = useState([]);\n  const [selectedRows, setSelectedRows] = useState([]);\n  const [selectedOption, setSelectedOption] = useState(\"\");\n  useEffect(() => {\n    setIsLoading(true);\n    axios.get('/product/getproductsall').then(res => {\n      setProducts(res.data.products);\n      setIsLoading(false);\n    }).catch(err => {\n      setIsLoading(false);\n      console.log(err);\n    });\n  }, []);\n\n  const deleteProduct = id => {\n    axios.delete(`/product/delete/${id}`).then(res => {\n      setProducts(prev => prev.filter(prod => prod._id !== id));\n    }).catch(err => {\n      console.log(err);\n    });\n  }; // const handleSearch = e => {\n  //     let target = e.target;\n  //     setFilterFn({\n  //         fn: items => {\n  //             if (target.value == \"\")\n  //                 return items;\n  //             else\n  //                 return items.filter(x => x.name.toLowerCase().includes(target.value))\n  //         }\n  //     })\n  // }\n\n\n  const rowSelection = {\n    selectedRowKeys,\n    onChange: (selectedRowKeys, selectedRows) => {\n      setSelectedRowKeys(selectedRowKeys);\n      setSelectedRows(selectedRows);\n    }\n  };\n  const columns = [{\n    title: 'Product Image',\n    dataIndex: 'thumbnail',\n    key: 'thumbnail',\n    render: thumbnail => /*#__PURE__*/React.createElement(Image, {\n      width: 100,\n      src: thumbnail,\n      fallback: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg==\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 34\n      }\n    })\n  }, {\n    title: 'Product Name',\n    dataIndex: 'name',\n    key: 'name'\n  }, {\n    title: 'Num of Sale',\n    dataIndex: 'sales',\n    key: 'sales',\n    sorter: (a, b) => a.sales - b.sales\n  }, {\n    title: 'Total Stock',\n    dataIndex: 'stock',\n    key: 'stock',\n    sorter: (a, b) => a.stock - b.stock\n  }, {\n    title: 'Price',\n    dataIndex: 'price',\n    key: 'price',\n    sorter: (a, b) => a.price - b.price,\n    render: price => /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }\n    }, \"$ \", price)\n  }, {\n    title: 'Discount',\n    key: 'discount',\n    dataIndex: 'discount',\n    render: discount => discount.value > 0 ? discount.discountType === 'flat' ? /*#__PURE__*/React.createElement(\"span\", {\n      className: \"new-price\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 25\n      }\n    }, \"$ \", discount.value) : /*#__PURE__*/React.createElement(\"span\", {\n      className: \"new-price\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 25\n      }\n    }, discount.value, \" %\") : /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 23\n      }\n    }, \"$ 0\")\n  }, {\n    title: 'Published',\n    key: 'isActive',\n    dataIndex: 'isActive',\n    //sorter: (a, b) => Number(a.isActive) - Number(b.isActive),\n    render: isActive => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Switch, {\n      checked: isActive,\n      onChange: null,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 21\n      }\n    })),\n    filters: [{\n      text: 'Published',\n      value: true\n    }, {\n      text: 'Unpublished',\n      value: false\n    }],\n    onFilter: (value, record) => record.isActive === value\n  }, {\n    title: 'Featured',\n    key: 'isFeatured',\n    dataIndex: 'isFeatured',\n    //sorter: (a, b) => Number(a.isFeatured) - Number(b.isFeatured),\n    render: isFeatured => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Switch, {\n      checked: isFeatured,\n      onChange: null,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 21\n      }\n    })),\n    filters: [{\n      text: 'Featured',\n      value: true\n    }, {\n      text: 'Unfeatured',\n      value: false\n    }],\n    onFilter: (value, record) => record.isFeatured === value\n  }, {\n    title: 'Action',\n    key: 'action',\n    render: (text, record) => /*#__PURE__*/React.createElement(Space, {\n      size: \"middle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: () => history.push(`/product/edit/${record.slug}`),\n      className: \"d-center\",\n      type: \"primary\",\n      icon: /*#__PURE__*/React.createElement(EditOutlined, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 132\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Popconfirm, {\n      onConfirm: () => deleteProduct(record._id),\n      title: \"Are you sure\\uFF1F\",\n      icon: /*#__PURE__*/React.createElement(QuestionCircleOutlined, {\n        style: {\n          color: 'red'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 105\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"d-center\",\n      icon: /*#__PURE__*/React.createElement(DeleteOutlined, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 60\n        }\n      }),\n      danger: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 25\n      }\n    })))\n  }];\n\n  let join = async updated => {\n    let array = [...products];\n    updated.map(u => {\n      let index = array.findIndex(arr => arr._id === u._id);\n      array[index] = u;\n    });\n    return array;\n  };\n\n  let Filter = async ids => {\n    let array = [...products];\n    ids.map(id => {\n      array = array.filter(arr => arr._id !== id);\n    });\n    return array;\n  };\n\n  const bulkDelete = () => {\n    setIsLoadingButton(true);\n    let data = {\n      ids: selectedRowKeys\n    };\n    axios.patch(\"/product/bulkdelete\", data).then(async res => {\n      let filtered = await Filter(selectedRowKeys);\n      setProducts(filtered);\n      setSelectedRowKeys([]);\n      setSelectedRows([]);\n      setIsLoadingButton(false);\n    }).catch(err => {\n      setIsLoadingButton(false);\n      console.log(err);\n    });\n  };\n\n  const bulkAction = async option => {\n    if (option === 'delete') {\n      return alert(\"You are in guest mode.So you can't perform this action\");\n      return bulkDelete();\n    }\n\n    setIsLoadingButton(true);\n    let data = {\n      ids: selectedRowKeys\n    };\n\n    if (option === \"publish\") {\n      data[\"isActive\"] = true;\n    }\n\n    if (option === \"unpublish\") {\n      data[\"isActive\"] = false;\n    }\n\n    if (option === \"feature\") {\n      data[\"isFeatured\"] = true;\n    }\n\n    if (option === \"unfeature\") {\n      data[\"isFeatured\"] = false;\n    }\n\n    axios.patch(\"/product/bulkedit\", data).then(async res => {\n      let updated = res.data.products;\n      let prod = await join(updated);\n      setProducts(prod);\n      setSelectedRowKeys([]);\n      setSelectedRows([]);\n      setIsLoadingButton(false);\n    }).catch(err => {\n      setIsLoadingButton(false);\n      console.log(err);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Card, {\n    title: \"All Products\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    disabled: selectedRows.length === 0,\n    style: {\n      width: \"180px\"\n    },\n    onChange: value => setSelectedOption(value),\n    placeholder: \"Select a action\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Option, {\n    value: \"publish\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 17\n    }\n  }, \"Make Publish\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"unpublish\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 17\n    }\n  }, \"Make Unpublish\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"feature\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 17\n    }\n  }, \"Make Featured\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"unfeature\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 17\n    }\n  }, \"Make Unfeatured\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"delete\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 17\n    }\n  }, \"Delete\")), /*#__PURE__*/React.createElement(Button, {\n    loading: isLoadingButton,\n    style: {\n      marginLeft: \"10px\"\n    },\n    onClick: () => bulkAction(selectedOption),\n    disabled: selectedRows.length === 0 || selectedOption === '',\n    type: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 13\n    }\n  }, \"Bulk action\"), selectedRows.length > 0 && /*#__PURE__*/React.createElement(\"strong\", {\n    style: {\n      marginLeft: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 41\n    }\n  }, selectedRows.length, \" Product seleted\"), /*#__PURE__*/React.createElement(Table, {\n    rowKey: \"_id\",\n    rowSelection: rowSelection,\n    loading: isLoading,\n    columns: columns,\n    dataSource: products,\n    pagination: {\n      defaultPageSize: 10,\n      showSizeChanger: true,\n      pageSizeOptions: ['10', '20', '30'],\n      showQuickJumper: true\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default ProductList;","map":{"version":3,"sources":["/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/src/pages/product/ProductList.js"],"names":["React","useEffect","useState","useHistory","axios","Card","Button","Table","Space","Image","Switch","Popconfirm","Select","EditOutlined","DeleteOutlined","QuestionCircleOutlined","Option","ProductList","history","isLoading","setIsLoading","isLoadingButton","setIsLoadingButton","products","setProducts","selectedRowKeys","setSelectedRowKeys","selectedRows","setSelectedRows","selectedOption","setSelectedOption","get","then","res","data","catch","err","console","log","deleteProduct","id","delete","prev","filter","prod","_id","rowSelection","onChange","columns","title","dataIndex","key","render","thumbnail","sorter","a","b","sales","stock","price","discount","value","discountType","isActive","filters","text","onFilter","record","isFeatured","push","slug","color","join","updated","array","map","u","index","findIndex","arr","Filter","ids","bulkDelete","patch","filtered","bulkAction","option","alert","length","width","marginLeft","defaultPageSize","showSizeChanger","pageSizeOptions","showQuickJumper"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom'\n\n\n\nimport axios from 'axios'\n\n\nimport { Card, Button, Table, Space, Image, Switch, Popconfirm, Select } from 'antd';\nimport { EditOutlined, DeleteOutlined, QuestionCircleOutlined } from '@ant-design/icons'\n\nconst { Option } = Select;\n\nconst ProductList = () => {\n    const history = useHistory()\n    const [isLoading, setIsLoading] = useState(false)\n    const [isLoadingButton, setIsLoadingButton] = useState(false)\n    const [products, setProducts] = useState([])\n    const [selectedRowKeys, setSelectedRowKeys] = useState([])\n    const [selectedRows, setSelectedRows] = useState([])\n\n    const [selectedOption, setSelectedOption] = useState(\"\")\n\n\n\n    useEffect(() => {\n        setIsLoading(true)\n        axios.get('/product/getproductsall')\n            .then(res => {\n                setProducts(res.data.products)\n                setIsLoading(false)\n            })\n            .catch(err => {\n                setIsLoading(false)\n                console.log(err);\n            })\n    }, [])\n\n    const deleteProduct=(id)=>{\n        axios.delete(`/product/delete/${id}`)\n        .then(res=>{\n            setProducts(prev=>prev.filter(prod=>prod._id !== id))\n        })\n        .catch(err=>{\n            console.log(err);\n        })\n    }\n\n    // const handleSearch = e => {\n    //     let target = e.target;\n    //     setFilterFn({\n    //         fn: items => {\n    //             if (target.value == \"\")\n    //                 return items;\n    //             else\n    //                 return items.filter(x => x.name.toLowerCase().includes(target.value))\n    //         }\n    //     })\n    // }\n\n\n\n    const rowSelection = {\n        selectedRowKeys,\n        onChange: (selectedRowKeys, selectedRows) => {\n\n            setSelectedRowKeys(selectedRowKeys);\n            setSelectedRows(selectedRows)\n        },\n    };\n\n\n\n\n    const columns = [\n\n        {\n            title: 'Product Image',\n            dataIndex: 'thumbnail',\n            key: 'thumbnail',\n            render: thumbnail => <Image\n                width={100}\n\n                src={thumbnail}\n                fallback=\"data:image/png;base64,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\"\n            />\n        },\n        {\n            title: 'Product Name',\n            dataIndex: 'name',\n            key: 'name',\n        },\n        {\n            title: 'Num of Sale',\n            dataIndex: 'sales',\n            key: 'sales',\n            sorter: (a, b) => a.sales - b.sales,\n        },\n        {\n            title: 'Total Stock',\n            dataIndex: 'stock',\n            key: 'stock',\n            sorter: (a, b) => a.stock - b.stock,\n        },\n        {\n            title: 'Price',\n            dataIndex: 'price',\n            key: 'price',\n            sorter: (a, b) => a.price - b.price,\n            render: price =>\n                <span>$ {price}</span>\n\n        },\n        {\n            title: 'Discount',\n            key: 'discount',\n            dataIndex: 'discount',\n            render: (discount) =>\n                discount.value > 0 ?\n                    discount.discountType === 'flat' ?\n                        <span className=\"new-price\">$ {discount.value}</span> :\n                        <span className=\"new-price\">{discount.value} %</span>\n                    : <span>$ 0</span>\n        },\n\n        {\n            title: 'Published',\n            key: 'isActive',\n            dataIndex: 'isActive',\n            //sorter: (a, b) => Number(a.isActive) - Number(b.isActive),\n            render: isActive => (\n                <>\n                    <Switch checked={isActive} onChange={null} />\n                </>\n            ),\n            filters: [\n                { text: 'Published', value:true },\n                { text: 'Unpublished', value: false },\n            ],\n            onFilter: (value, record) => record.isActive === value\n        },\n        {\n            title: 'Featured',\n            key: 'isFeatured',\n            dataIndex: 'isFeatured',\n            //sorter: (a, b) => Number(a.isFeatured) - Number(b.isFeatured),\n            render: isFeatured => (\n                <>\n                    <Switch checked={isFeatured} onChange={null} />\n                </>\n            ),\n            filters: [\n                { text: 'Featured', value:true },\n                { text: 'Unfeatured', value: false },\n            ],\n            onFilter: (value, record) => record.isFeatured === value\n        },\n        {\n            title: 'Action',\n            key: 'action',\n            render: (text, record) => (\n                <Space size=\"middle\">\n                    <Button onClick={() => history.push(`/product/edit/${record.slug}`)} className='d-center' type='primary' icon={<EditOutlined />}></Button>\n                    <Popconfirm onConfirm={() => deleteProduct(record._id)} title=\"Are you sureï¼Ÿ\" icon={<QuestionCircleOutlined style={{ color: 'red' }} />}>\n                        <Button className='d-center' icon={<DeleteOutlined />} danger></Button>\n                    </Popconfirm>\n\n                </Space>\n            ),\n        },\n    ];\n\n    let join=async(updated)=>{\n        let array = [...products]\n        updated.map(u=>{\n            let index = array.findIndex(arr=>arr._id === u._id)\n            array[index] = u\n        })\n        return array\n    }\n\n\n    let Filter=async(ids)=>{\n        let array = [...products]\n        ids.map(id=>{\n            array = array.filter(arr=>arr._id !==id)\n        })\n        return array\n    }\n\n    const bulkDelete=()=>{\n        setIsLoadingButton(true)\n        let data = {\n            ids :selectedRowKeys\n        }\n\n        axios.patch(\"/product/bulkdelete\",data)\n        .then(async(res)=>{\n          \n           let filtered =await Filter(selectedRowKeys)\n           setProducts(filtered)\n           setSelectedRowKeys([])\n           setSelectedRows([])\n           setIsLoadingButton(false)\n           \n        }).catch(err=>{\n            setIsLoadingButton(false)\n            console.log(err);\n        })\n    }\n\n\n    const bulkAction =async (option) => {\n        if(option === 'delete'){\n            return alert(\"You are in guest mode.So you can't perform this action\")\n            return bulkDelete()\n        }\n\n\n        setIsLoadingButton(true)\n\n        let data = {\n            ids :selectedRowKeys\n        }\n        if(option === \"publish\"){\n            data[\"isActive\"] = true\n        }\n        if(option === \"unpublish\"){\n            data[\"isActive\"] = false\n        }\n        if(option === \"feature\"){\n            data[\"isFeatured\"] = true\n        }\n        if(option === \"unfeature\"){\n            data[\"isFeatured\"] = false\n        }\n        axios.patch(\"/product/bulkedit\",data)\n        .then(async(res)=>{\n          \n           let updated = res.data.products\n           let prod =await join(updated)\n           setProducts(prod)\n           setSelectedRowKeys([])\n           setSelectedRows([])\n           setIsLoadingButton(false)\n           \n        }).catch(err=>{\n            setIsLoadingButton(false)\n            console.log(err);\n        })\n    }\n\n\n    return (\n        <Card title=\"All Products\">\n\n\n            <Select disabled={selectedRows.length === 0} style={{ width: \"180px\" }} onChange={value => setSelectedOption(value)} placeholder='Select a action'>\n                <Option value=\"publish\">Make Publish</Option>\n                <Option value=\"unpublish\">Make Unpublish</Option>\n                <Option value=\"feature\">Make Featured</Option>\n                <Option value=\"unfeature\">Make Unfeatured</Option>\n                <Option value=\"delete\">Delete</Option>\n            </Select>\n\n            <Button loading={isLoadingButton} style={{ marginLeft: \"10px\" }} onClick={() => bulkAction(selectedOption)} disabled={selectedRows.length === 0 || selectedOption === ''} type='primary'>Bulk action</Button>\n\n            {selectedRows.length > 0 && <strong style={{ marginLeft: \"10px\" }}>{selectedRows.length} Product seleted</strong>}\n\n\n\n\n            <Table\n                rowKey=\"_id\"\n                rowSelection={rowSelection}\n                loading={isLoading}\n                columns={columns}\n                dataSource={products}\n                pagination={{ defaultPageSize: 10, showSizeChanger: true, pageSizeOptions: ['10', '20', '30'], showQuickJumper: true }}\n            />\n        </Card>\n    );\n};\n\nexport default ProductList;\n\n"]},"metadata":{},"sourceType":"module"}