{"ast":null,"code":"import _defineProperty from\"/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Router,useParams,useHistory}from'react-router-dom';import{Card,Form,Input,TreeSelect,Select,Switch,Button,Alert}from'antd';import{UploadOutlined}from'@ant-design/icons';import\"./product.scss\";import'react-quill/dist/quill.snow.css';import ReactQuill from'react-quill';import axios from'axios';import{useSelector}from'react-redux';import MediaLibrary from'../../components/MediaLibrary';var TreeNode=TreeSelect.TreeNode;var Option=Select.Option;function EditProduct(){var params=useParams();var history=useHistory();var _useSelector=useSelector(function(state){return state.data;}),categories=_useSelector.categories,brands=_useSelector.brands,isCategoryLoading=_useSelector.isCategoryLoading,isBrandLoading=_useSelector.isBrandLoading;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isVarValueChanged=_useState4[0],setIsVarValueChanged=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),display=_useState6[0],setDisplay=_useState6[1];var _useState7=useState(\"thumbnail\"),_useState8=_slicedToArray(_useState7,2),imageFor=_useState8[0],setImageFor=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),errors=_useState10[0],setErrors=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),editId=_useState12[0],setEditId=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),product=_useState14[0],setProduct=_useState14[1];//-----product information---------\nvar _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),name=_useState16[0],setName=_useState16[1];// const [brands, setBrands] = useState([])\nvar _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),brand=_useState18[0],setBrand=_useState18[1];var _useState19=useState(''),_useState20=_slicedToArray(_useState19,2),unit=_useState20[0],setUnit=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),tags=_useState22[0],setTags=_useState22[1];var _useState23=useState(''),_useState24=_slicedToArray(_useState23,2),tagInput=_useState24[0],setTagInput=_useState24[1];var _useState25=useState('simple'),_useState26=_slicedToArray(_useState25,2),productType=_useState26[0],setProductType=_useState26[1];//categories\n// const [categories, setCategories] = useState([])\nvar _useState27=useState([]),_useState28=_slicedToArray(_useState27,2),subCategories=_useState28[0],setSubCategories=_useState28[1];var _useState29=useState(''),_useState30=_slicedToArray(_useState29,2),category=_useState30[0],setCategory=_useState30[1];var _useState31=useState(''),_useState32=_slicedToArray(_useState31,2),subCategory=_useState32[0],setSubCategory=_useState32[1];var _useState33=useState(''),_useState34=_slicedToArray(_useState33,2),subSubCategory=_useState34[0],setSubSubCategory=_useState34[1];var _useState35=useState([]),_useState36=_slicedToArray(_useState35,2),subSubCategories=_useState36[0],setSubSubCategories=_useState36[1];//console.log(category,subCategory,subSubCategory);\n//images\nvar _useState37=useState(''),_useState38=_slicedToArray(_useState37,2),thumbnail=_useState38[0],setThumbnail=_useState38[1];var _useState39=useState([]),_useState40=_slicedToArray(_useState39,2),gallery=_useState40[0],setGallery=_useState40[1];//attributes\nvar _useState41=useState([]),_useState42=_slicedToArray(_useState41,2),attributes=_useState42[0],setAttributes=_useState42[1];var _useState43=useState([]),_useState44=_slicedToArray(_useState43,2),selectedAttr=_useState44[0],setSelectedAttr=_useState44[1];var _useState45=useState([]),_useState46=_slicedToArray(_useState45,2),selectedAttrVal=_useState46[0],setSelectedAttrVal=_useState46[1];//price\nvar _useState47=useState(),_useState48=_slicedToArray(_useState47,2),price=_useState48[0],setPrice=_useState48[1];var _useState49=useState(0),_useState50=_slicedToArray(_useState49,2),discount=_useState50[0],setDiscount=_useState50[1];var _useState51=useState('flat'),_useState52=_slicedToArray(_useState51,2),discountType=_useState52[0],setDiscountType=_useState52[1];var _useState53=useState(0),_useState54=_slicedToArray(_useState53,2),tax=_useState54[0],setTax=_useState54[1];var _useState55=useState('flat'),_useState56=_slicedToArray(_useState55,2),taxType=_useState56[0],setTaxType=_useState56[1];//stock\nvar _useState57=useState('50'),_useState58=_slicedToArray(_useState57,2),stock=_useState58[0],setStock=_useState58[1];var _useState59=useState(''),_useState60=_slicedToArray(_useState59,2),sku=_useState60[0],setSku=_useState60[1];//variations\nvar _useState61=useState([]),_useState62=_slicedToArray(_useState61,2),variations=_useState62[0],setVariations=_useState62[1];//description\nvar _useState63=useState(''),_useState64=_slicedToArray(_useState63,2),description=_useState64[0],setDescription=_useState64[1];//shipping\nvar _useState65=useState(true),_useState66=_slicedToArray(_useState65,2),freeShipping=_useState66[0],setFreeShipping=_useState66[1];var _useState67=useState(0),_useState68=_slicedToArray(_useState67,2),cost=_useState68[0],setCost=_useState68[1];//meta\nvar _useState69=useState(''),_useState70=_slicedToArray(_useState69,2),metaTitle=_useState70[0],setMetaTitle=_useState70[1];var _useState71=useState(''),_useState72=_slicedToArray(_useState71,2),metaDescription=_useState72[0],setMetaDescription=_useState72[1];var _useState73=useState(''),_useState74=_slicedToArray(_useState73,2),metaImage=_useState74[0],setMetaImage=_useState74[1];//fetch data\nvar fetchAttributes=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:axios.get('attribute/get').then(function(res){setAttributes(res.data.attributes);}).catch(function(err){console.log(err);});case 1:case\"end\":return _context.stop();}}},_callee);}));return function fetchAttributes(){return _ref.apply(this,arguments);};}();useEffect(function(){if(variations&&productType!=='simple'){var sum=variations.reduce(function(a,b){return parseInt(a)+parseInt(b.stock);},0);setStock(sum);}},[variations]);var setProductValue=function setProductValue(product){var _product$brand,_product$categories$f,_product$categories$f2,_product$categories$f3,_filterdsub$;setName(product.name);setUnit(product.unit);setTags(product.tags);setThumbnail(product.thumbnail);setGallery(product.gallery);setPrice(product.price);setDiscount(product.discount.value);setDiscountType(product.discount.discountType);setTax(product.tax.value);setTaxType(product.tax.taxType);setSku(product.sku);setDescription(product.description);setFreeShipping(product.shipping.isFree);setCost(product.shipping.cost);setMetaTitle(product.meta.title);setMetaDescription(product.meta.description);setMetaImage(product.meta.image);setBrand(((_product$brand=product.brand)===null||_product$brand===void 0?void 0:_product$brand._id)||'');setProductType(product.productType);setStock(product.stock);var pcategory=((_product$categories$f=product.categories.filter(function(cat){return cat.level==1;})[0])===null||_product$categories$f===void 0?void 0:_product$categories$f.category)||null;var psubCategory=((_product$categories$f2=product.categories.filter(function(cat){return cat.level==2;})[0])===null||_product$categories$f2===void 0?void 0:_product$categories$f2.category)||null;var psubSubCategory=((_product$categories$f3=product.categories.filter(function(cat){return cat.level==3;})[0])===null||_product$categories$f3===void 0?void 0:_product$categories$f3.category)||null;setCategory(pcategory);var filterdsub=categories.filter(function(cat){return cat._id===pcategory;});setSubCategories((_filterdsub$=filterdsub[0])===null||_filterdsub$===void 0?void 0:_filterdsub$.children);if(psubCategory){var _filterdsub$2,_filterdsubsub$;var filterdsubsub=(_filterdsub$2=filterdsub[0])===null||_filterdsub$2===void 0?void 0:_filterdsub$2.children.filter(function(cat){return cat._id===psubCategory;});setSubSubCategories((_filterdsubsub$=filterdsubsub[0])===null||_filterdsubsub$===void 0?void 0:_filterdsubsub$.children);}psubCategory&&setSubCategory(psubCategory);psubSubCategory&&setSubSubCategory(psubSubCategory);var selected=[];if(attributes.length){product.attributes.map(function(attr){selected.push(attributes.filter(function(a){return a.name===attr.name;})[0]);//setSelectedAttr(prev=>[...prev, attributes.filter(a=>a.name === attr.name)[0]])\n});}setSelectedAttr(selected);setSelectedAttrVal(product.attributes);setVariations(product.variations);setLoading(false);};var fetchProduct=function fetchProduct(){//console.log(params.productslug);\naxios.get(\"/product/details/\".concat(params.productslug)).then(function(res){setEditId(res.data.product._id);setProduct(res.data.product);}).catch(function(err){history.push('/product/productlist');});};useEffect(function(){if(product&&categories.length>0){setProductValue(product);}},[product,categories,attributes]);useEffect(function(){if(params){fetchProduct();}},[params]);useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(true);_context2.next=3;return fetchAttributes();case 3:case\"end\":return _context2.stop();}}},_callee2);}))();},[]);//product type\nvar handleChangeProductType=function handleChangeProductType(value){if(value==='simple'){setSelectedAttr([]);setSelectedAttrVal([]);setVariations([]);}setProductType(value);};var handleChangeCategory=function handleChangeCategory(value){var _filterd$;setCategory(value);var filterd=categories.filter(function(cat){return cat._id===value;});setSubCategories((_filterd$=filterd[0])===null||_filterd$===void 0?void 0:_filterd$.children);setSubSubCategories([]);setSubCategory('');setSubSubCategory('');};var handleChangeSubCategory=function handleChangeSubCategory(value){var _filterdMain$;setSubCategory(value);var filterdMain=categories.filter(function(cat){return cat._id===category;});var filterdSub=(_filterdMain$=filterdMain[0])===null||_filterdMain$===void 0?void 0:_filterdMain$.children.filter(function(cat){return cat._id===value;})[0];if(filterdSub===null||filterdSub===void 0?void 0:filterdSub.children){setSubSubCategories(filterdSub===null||filterdSub===void 0?void 0:filterdSub.children);}setSubSubCategory('');};//tags action\nvar handleKeyPressTag=function handleKeyPressTag(e){if(e.charCode===13||e.charCode===44){setTags(function(prev){return[].concat(_toConsumableArray(prev),[tagInput.replace(',',\"\")]);});//console.log(tagInput);\nsetTagInput('');}};var handleRemoveTag=function handleRemoveTag(tname){var filtered=tags.filter(function(t){return t!==tname;});setTags(filtered);};//----------------attributes--------------------\nvar handleChangeAttr=function handleChangeAttr(value){setIsVarValueChanged(true);var filtered=attributes.filter(function(a){return a._id===value;})[0];setSelectedAttr(function(prev){return[].concat(_toConsumableArray(prev),[filtered]);});};var handleRemoveAttr=function handleRemoveAttr(value){setIsVarValueChanged(true);var filtered=selectedAttr.filter(function(a){return a._id!==value;});var selected=selectedAttr.filter(function(a){return a._id===value;})[0];setSelectedAttr(filtered);var attrval=_toConsumableArray(selectedAttrVal);var index=attrval.findIndex(function(v){return v.name===selected.name;});attrval.splice(index,1);setSelectedAttrVal(attrval);};//console.log(selectedAttr);\n//----------------variation-------------------------\nvar handleChangeAttrValue=function handleChangeAttrValue(value){var newArry=_toConsumableArray(selectedAttrVal);var index=newArry.findIndex(function(val){return val.name===value.split(\"@@@\")[1];});if(index===-1){setSelectedAttrVal([].concat(_toConsumableArray(selectedAttrVal),[{name:value.split(\"@@@\")[1],values:[value.split(\"@@@\")[0]]}]));setIsVarValueChanged(true);}else{var newVal=[].concat(_toConsumableArray(newArry[index].values),[value.split(\"@@@\")[0]]);newArry[index]={name:value.split(\"@@@\")[1],values:newVal};setSelectedAttrVal(newArry);setIsVarValueChanged(true);}};var handleRemoveAttrValue=function handleRemoveAttrValue(value){var newArry=_toConsumableArray(selectedAttrVal);var index=newArry.findIndex(function(val){return val.name===value.split(\"@@@\")[1];});if(index===-1)return;var selected=newArry[index];var newVal=selected.values.filter(function(v){return v!==value.split(\"@@@\")[0];});if(newVal.length===0){newArry.splice(index,1);setSelectedAttrVal(newArry);setIsVarValueChanged(true);}else{newArry[index]={name:value.split(\"@@@\")[1],values:newVal};setSelectedAttrVal(newArry);setIsVarValueChanged(true);}};useEffect(function(){if(!isVarValueChanged)return;if(selectedAttrVal.length<1){setVariations([]);return;}var allArraysObj={};selectedAttrVal.map(function(a){allArraysObj=_objectSpread(_objectSpread({},allArraysObj),{},_defineProperty({},a.name,a.values));});var getProducts=function getProducts(arrays){if(arrays.length===0){return[[]];}var results=[];getProducts(arrays.slice(1)).forEach(function(product){arrays[0].forEach(function(value){results.push([value].concat(product));});});return results;};var getAllCombinations=function getAllCombinations(attributes){var attributeNames=Object.keys(attributes);var attributeValues=attributeNames.map(function(name){return attributes[name];});return getProducts(attributeValues).map(function(product,index){var val=[];var obj={stock:0,image:\"\",price:0,discount:0,discountType:\"flat\",isDefault:false};attributeNames.forEach(function(name,i){obj[name]=product[i];val.push(product[i]);});if(index===0){obj['isDefault']=true;}obj[\"varname\"]=val.join(\"--\");return obj;});};//console.log(getAllCombinations(allArraysObj));\nsetVariations(getAllCombinations(allArraysObj));},[selectedAttrVal,selectedAttr]);var handleVariantInput=function handleVariantInput(varname,type,value,isDefault){if(isDefault){if(type==='price'){setPrice(value);}else if(type==='discount'){setDiscount(value);}else if(type==='discountType'){setDiscountType(value);}}var filtered=variations.findIndex(function(v){return v.varname===varname;});var arr=_toConsumableArray(variations);arr[filtered]=_objectSpread(_objectSpread({},arr[filtered]),{},_defineProperty({},type,value));setVariations(arr);};var handleVariandDefault=function handleVariandDefault(variant,value){if(value){setPrice(variant.price);setDiscount(variant.discount);setDiscountType(variant.discountType);var arr=[];variations&&variations.map(function(variation,i){if(variation.varname===variant.varname){arr.push(_objectSpread(_objectSpread({},variation),{},{isDefault:true,image:thumbnail}));}else{arr.push(_objectSpread(_objectSpread({},variation),{},{isDefault:false}));}});setVariations(arr);}else{alert('Select another');}};var saveProduct=function saveProduct(){var data={name:name,categories:[],brand:brand,unit:unit,tags:tags,thumbnail:thumbnail,gallery:gallery,attributes:selectedAttrVal,variations:variations,productType:productType,price:price,discount:{discountType:discountType,value:discount},tax:{taxType:taxType,value:discount},sku:sku,stock:stock,description:description,shipping:{isFree:freeShipping,cost:cost},meta:{title:metaTitle,description:metaDescription,image:metaImage}};if(category){data.categories.push({level:1,category:category});}if(subCategory){data.categories.push({level:2,category:subCategory});}if(subSubCategory){data.categories.push({level:3,category:subSubCategory});}if(!category){setErrors({category:\"Please select a category\"});}//console.log(data);\n// return console.log(data.categories);\naxios.patch(\"/product/edit/\".concat(editId),data).then(function(res){alert(\"product updated successfully\");setErrors([]);}).catch(function(err){window.scrollTo({top:100,behavior:'smooth'});err&&err.response&&setErrors(err.response.data);});};var handleImageselect=function handleImageselect(item){if(imageFor==='thumbnail'){setThumbnail(item.thumbnailUrl);}if(imageFor==='gallery'){setGallery(function(prev){return[].concat(_toConsumableArray(prev),[item.thumbnailUrl]);});}if(imageFor==='meta'){setMetaImage(item.thumbnailUrl);}if(imageFor.startsWith('variant@@@')){var varname=imageFor.replace(\"variant@@@\",\"\");handleVariantInput(varname,'image',item.thumbnailUrl,false);}setDisplay(false);};var productForm=function productForm(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card,{title:\"Product Information\"},/*#__PURE__*/React.createElement(\"div\",{className:\"product_information\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"Product Name \",/*#__PURE__*/React.createElement(\"span\",{className:\"required\"},\"*\")),/*#__PURE__*/React.createElement(\"div\",{className:\"width_100\"},/*#__PURE__*/React.createElement(Input,{className:errors&&errors.name&&'error',value:name,onChange:function onChange(e){return setName(e.target.value);},placeholder:\"Product name\"}),errors&&errors.name&&/*#__PURE__*/React.createElement(\"span\",{className:\"error_text\"},errors.name))),/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"Category \",/*#__PURE__*/React.createElement(\"span\",{className:\"required\"},\"*\")),/*#__PURE__*/React.createElement(\"div\",{className:\"width_100\"},/*#__PURE__*/React.createElement(Select,{showSearch:true,style:{width:\"100%\"},dropdownStyle:{maxHeight:400,overflow:'auto'},placeholder:\"Please select a category\",optionFilterProp:\"children\",onChange:function onChange(value){return handleChangeCategory(value);},value:category,filterOption:function filterOption(input,option){return option.children.toLowerCase().indexOf(input.toLowerCase())>=0;}},(categories===null||categories===void 0?void 0:categories.length)>0&&categories.map(function(cat,index){return/*#__PURE__*/React.createElement(Option,{key:index,value:cat._id},cat.name);})),errors&&errors.category&&/*#__PURE__*/React.createElement(\"span\",{className:\"error_text\"},errors.category))),(subCategories===null||subCategories===void 0?void 0:subCategories.length)>0&&/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"Sub Category \",/*#__PURE__*/React.createElement(\"span\",{className:\"required\"},\"*\")),/*#__PURE__*/React.createElement(\"div\",{className:\"width_100\"},/*#__PURE__*/React.createElement(Select,{showSearch:true,style:{width:\"100%\"},dropdownStyle:{maxHeight:400,overflow:'auto'},placeholder:\"Please select a sub category\",optionFilterProp:\"children\",onChange:function onChange(value){return handleChangeSubCategory(value);},value:subCategory,filterOption:function filterOption(input,option){return option.children.toLowerCase().indexOf(input.toLowerCase())>=0;}},(subCategories===null||subCategories===void 0?void 0:subCategories.length)>0&&subCategories.map(function(cat,index){return/*#__PURE__*/React.createElement(Option,{key:index,value:cat._id},cat.name);})),errors&&errors.category&&/*#__PURE__*/React.createElement(\"span\",{className:\"error_text\"},errors.category))),(subSubCategories===null||subSubCategories===void 0?void 0:subSubCategories.length)>0&&/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"Nested Sub Category \",/*#__PURE__*/React.createElement(\"span\",{className:\"required\"},\"*\")),/*#__PURE__*/React.createElement(\"div\",{className:\"width_100\"},/*#__PURE__*/React.createElement(Select,{showSearch:true,style:{width:\"100%\"},dropdownStyle:{maxHeight:400,overflow:'auto'},placeholder:\"Please select a sub category\",optionFilterProp:\"children\",onChange:function onChange(value){return setSubSubCategory(value);},value:subSubCategory,filterOption:function filterOption(input,option){return option.children.toLowerCase().indexOf(input.toLowerCase())>=0;}},(subSubCategories===null||subSubCategories===void 0?void 0:subSubCategories.length)>0&&subSubCategories.map(function(cat,index){return/*#__PURE__*/React.createElement(Option,{key:index,value:cat._id},cat.name);})),errors&&errors.category&&/*#__PURE__*/React.createElement(\"span\",{className:\"error_text\"},errors.category))),/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"Brand \"),/*#__PURE__*/React.createElement(Select,{showSearch:true,style:{width:\"100%\"},placeholder:\"Select a Brand\",optionFilterProp:\"children\",onChange:function onChange(value){return setBrand(value);},value:brand,filterOption:function filterOption(input,option){return option.children.toLowerCase().indexOf(input.toLowerCase())>=0;}},brands.length>0&&brands.map(function(b,index){return/*#__PURE__*/React.createElement(Option,{key:index,value:b._id},b.name);})),\",\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"Unit \",/*#__PURE__*/React.createElement(\"span\",{className:\"required\"},\"*\")),/*#__PURE__*/React.createElement(\"div\",{className:\"width_100\"},/*#__PURE__*/React.createElement(Input,{className:errors&&errors.name&&'error',value:unit,onChange:function onChange(e){return setUnit(e.target.value);},placeholder:\"Unit (e.g. KG,Pc etc)\"}),errors&&errors.unit&&/*#__PURE__*/React.createElement(\"span\",{className:\"error_text\"},errors.unit))),/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"Tags \"),/*#__PURE__*/React.createElement(\"div\",{className:\"tag_fieled\"},tags===null||tags===void 0?void 0:tags.map(function(tname,index){return/*#__PURE__*/React.createElement(\"span\",{className:\"tag_item\",key:index},tname,\" \",/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return handleRemoveTag(tname);},className:\"remove\"},\"X\"));}),/*#__PURE__*/React.createElement(Input,{onChange:function onChange(e){return setTagInput(e.target.value);},onKeyPress:handleKeyPressTag,type:\"text\",value:tagInput,placeholder:\"Enter tag name and press enter\"}))))),/*#__PURE__*/React.createElement(Card,{style:{marginTop:\"15px\"},title:\"Product Images\"},/*#__PURE__*/React.createElement(\"div\",{className:\"product_information\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"Thumbnail image \",/*#__PURE__*/React.createElement(\"span\",{className:\"required\"},\"*\")),/*#__PURE__*/React.createElement(\"div\",{style:{width:\"100%\"}},/*#__PURE__*/React.createElement(Button,{className:\"d_center\",onClick:function onClick(){setImageFor(\"thumbnail\");setDisplay(true);},type:\"primary\",shape:\"round\",icon:/*#__PURE__*/React.createElement(UploadOutlined,null),size:\"size\"},\"Upload thumbnail\"),/*#__PURE__*/React.createElement(\"div\",null,thumbnail&&/*#__PURE__*/React.createElement(\"div\",{className:\"image_container\"},/*#__PURE__*/React.createElement(\"img\",{src:thumbnail}))),errors&&errors.thumbnail&&/*#__PURE__*/React.createElement(\"span\",{className:\"error_text\"},errors.thumbnail))),/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"Gallery images \"),/*#__PURE__*/React.createElement(\"div\",{style:{width:\"100%\"}},/*#__PURE__*/React.createElement(Button,{className:\"d_center\",onClick:function onClick(){setImageFor(\"gallery\");setDisplay(true);},type:\"primary\",shape:\"round\",icon:/*#__PURE__*/React.createElement(UploadOutlined,null),size:\"size\"},\"Upload Galary\"),/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\"}},gallery.map(function(g,index){return/*#__PURE__*/React.createElement(\"div\",{key:index,className:\"image_container\"},/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){var array=_toConsumableArray(gallery);array.splice(index,1);setGallery(array);}},\"X\"),/*#__PURE__*/React.createElement(\"img\",{src:g}));})))))),/*#__PURE__*/React.createElement(Card,{style:{marginTop:\"15px\"},title:\"Product Variation\"},/*#__PURE__*/React.createElement(\"div\",{className:\"product_information\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"Product Type \"),/*#__PURE__*/React.createElement(Select,{style:{width:\"100%\"},onChange:function onChange(value){return handleChangeProductType(value);},value:productType},/*#__PURE__*/React.createElement(Option,{value:\"simple\"},\"Simple Product\"),/*#__PURE__*/React.createElement(Option,{value:\"variant\"},\"Variant Product\"))),productType==='variant'&&/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"Attributes \"),/*#__PURE__*/React.createElement(Select,{mode:\"multiple\",size:\"default\",placeholder:\"Please select\",onSelect:function onSelect(value){return handleChangeAttr(value);},style:{width:'100%'},onDeselect:function onDeselect(value){return handleRemoveAttr(value);},value:selectedAttr===null||selectedAttr===void 0?void 0:selectedAttr.map(function(at){return at===null||at===void 0?void 0:at._id;})},attributes.map(function(attr,index){return/*#__PURE__*/React.createElement(Option,{value:attr._id,key:index},attr.name);}))),selectedAttr.length>0&&selectedAttr.map(function(attr,index){var _selectedAttrVal$filt;return/*#__PURE__*/React.createElement(\"div\",{key:index,className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,attr===null||attr===void 0?void 0:attr.name,\" \",/*#__PURE__*/React.createElement(\"span\",{className:\"required\"},\"*\")),/*#__PURE__*/React.createElement(Select,{mode:\"multiple\",size:\"default\",placeholder:\"Please select\",onSelect:function onSelect(value){return handleChangeAttrValue(value);},onDeselect:function onDeselect(value){return handleRemoveAttrValue(value);},style:{width:'100%'},value:selectedAttrVal&&(selectedAttrVal===null||selectedAttrVal===void 0?void 0:(_selectedAttrVal$filt=selectedAttrVal.filter(function(selected){return(selected===null||selected===void 0?void 0:selected.name)===(attr===null||attr===void 0?void 0:attr.name);})[0])===null||_selectedAttrVal$filt===void 0?void 0:_selectedAttrVal$filt.values.map(function(val){return val+\"@@@\"+attr.name;}))},attr.values.map(function(val,index){return/*#__PURE__*/React.createElement(Option,{value:val+\"@@@\"+attr.name,key:index},val);})));}))),/*#__PURE__*/React.createElement(Card,{style:{marginTop:\"15px\"},title:\"Product price + stock\"},/*#__PURE__*/React.createElement(\"div\",{className:\"product_information\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"Unit Price \",/*#__PURE__*/React.createElement(\"span\",{className:\"required\"},\"*\")),/*#__PURE__*/React.createElement(\"div\",{className:\"width_100\"},/*#__PURE__*/React.createElement(Input,{disabled:productType==='variant',className:errors&&errors.price&&'error',value:price,onChange:function onChange(e){return setPrice(e.target.value);},placeholder:\"Product price\",type:\"number\"}),errors&&errors.price&&/*#__PURE__*/React.createElement(\"span\",{className:\"error_text\"},errors.price))),/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"Discount \"),/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",width:\"100%\"}},/*#__PURE__*/React.createElement(Input,{disabled:productType==='variant',value:discount,onChange:function onChange(e){return setDiscount(e.target.value);},style:{width:\"60%\"},placeholder:\"Discount price\",type:\"number\"}),/*#__PURE__*/React.createElement(Select,{style:{width:\"35%\"},placeholder:\"Select discount type\",optionFilterProp:\"children\",onChange:function onChange(value){return setDiscountType(value);},value:discountType,disabled:productType==='variant'},/*#__PURE__*/React.createElement(Option,{value:\"flat\"},\"Flat\"),/*#__PURE__*/React.createElement(Option,{value:\"percent\"},\"Percent\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"Tax \"),/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",width:\"100%\"}},/*#__PURE__*/React.createElement(Input,{onChange:function onChange(e){return setTax(e.target.value);},value:tax,style:{width:\"60%\"},placeholder:\"Tax value\",type:\"number\"}),/*#__PURE__*/React.createElement(Select,{style:{width:\"35%\"},placeholder:\"Select value type\",optionFilterProp:\"children\",onChange:function onChange(value){return setTaxType(value);},value:taxType},/*#__PURE__*/React.createElement(Option,{value:\"flat\"},\"Flat\"),/*#__PURE__*/React.createElement(Option,{value:\"percent\"},\"Percent\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"SKU \"),/*#__PURE__*/React.createElement(\"div\",{className:\"width_100\"},/*#__PURE__*/React.createElement(Input,{className:errors&&errors.sku&&'error',value:sku,onChange:function onChange(e){return setSku(e.target.value);},placeholder:\"Product SKU\",type:\"text\"}),errors&&errors.sku&&/*#__PURE__*/React.createElement(\"span\",{className:\"error_text\"},errors.sku))),/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"Stock \",/*#__PURE__*/React.createElement(\"span\",{className:\"required\"},\"*\")),/*#__PURE__*/React.createElement(Input,{disabled:productType==='variant',value:stock,onChange:function onChange(e){return setStock(e.target.value);},placeholder:\"Product stock\",type:\"number\"})),variations&&variations.length>0&&/*#__PURE__*/React.createElement(\"table\",{className:\"variation_table\"},/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Variant\"),/*#__PURE__*/React.createElement(\"th\",null,\"Variant Price\"),/*#__PURE__*/React.createElement(\"th\",null,\"Discount\"),/*#__PURE__*/React.createElement(\"th\",null,\"Discount Type\"),/*#__PURE__*/React.createElement(\"th\",null,\"Stock\"),/*#__PURE__*/React.createElement(\"th\",null,\"Set Default\"),/*#__PURE__*/React.createElement(\"th\",null,\"Photo\")),variations&&variations.map(function(variant,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(React.Fragment,null,Object.keys(variant).map(function(keyName,i){return keyName==='varname'||keyName==='image'||keyName==='price'||keyName==='stock'||keyName==='discount'||keyName==='discountType'||keyName===\"isDefault\"?\"\":/*#__PURE__*/React.createElement(\"span\",{key:i},/*#__PURE__*/React.createElement(\"span\",null,keyName,\" :\"),/*#__PURE__*/React.createElement(\"strong\",{style:{margin:\"0 5px\",color:\"#494A4A\"}},variant[keyName]),\",\");}))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Input,{value:variant.price,onChange:function onChange(e){return handleVariantInput(variant.varname,'price',e.target.value,variant.isDefault);},placeholder:\"Variant Price\",type:\"number\"})),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Input,{value:variant.discount,onChange:function onChange(e){return handleVariantInput(variant.varname,'discount',e.target.value,variant.isDefault);},placeholder:\"Discount\",type:\"number\"})),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Select,{style:{width:\"90%\"},placeholder:\"Select discount type\",optionFilterProp:\"children\",onChange:function onChange(value){return handleVariantInput(variant.varname,'discountType',value,variant.isDefault);},value:variant.discountType},/*#__PURE__*/React.createElement(Option,{value:\"flat\"},\"Flat\"),/*#__PURE__*/React.createElement(Option,{value:\"percent\"},\"Percent\"))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Input,{onBlur:function onBlur(e){e.target.value===''&&handleVariantInput(variant.varname,'stock',0);},value:variant.stock,onChange:function onChange(e){return handleVariantInput(variant.varname,'stock',e.target.value);},placeholder:\"Variant Stock\",type:\"number\"})),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Switch,{style:{width:\"10px\"},checked:variant.isDefault,onChange:function onChange(c){return handleVariandDefault(variant,c);}})),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Button,{className:\"d_center\",onClick:function onClick(){setImageFor(\"variant@@@\"+variant.varname);setDisplay(true);},type:\"primary\",shape:\"round\",icon:/*#__PURE__*/React.createElement(UploadOutlined,null),size:\"size\"},\"Upload Image\"),variant.image&&/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\"}},/*#__PURE__*/React.createElement(\"div\",{key:index,className:\"image_container\"},/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return handleVariantInput(variant.varname,'image',\"\");}},\"X\"),/*#__PURE__*/React.createElement(\"img\",{src:variant.image})))));}))))),/*#__PURE__*/React.createElement(Card,{style:{marginTop:\"15px\"},title:\"Product Description\"},/*#__PURE__*/React.createElement(\"div\",{className:\"product_information\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"Description \"),/*#__PURE__*/React.createElement(ReactQuill,{value:description,onChange:function onChange(value){return setDescription(value);},style:{width:\"100%\",marginBottom:\"20px\"}})))),/*#__PURE__*/React.createElement(Card,{style:{marginTop:\"15px\"},title:\"Product shipping cost\"},/*#__PURE__*/React.createElement(\"div\",{className:\"product_information\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"Free shipping \",/*#__PURE__*/React.createElement(\"span\",{className:\"required\"},\"*\")),/*#__PURE__*/React.createElement(Switch,{style:{width:\"10px\"},checked:freeShipping,onChange:function onChange(c){return setFreeShipping(c);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"Shipping cost  \"),/*#__PURE__*/React.createElement(Input,{value:cost,onChange:function onChange(e){return setCost(cost);},disabled:freeShipping,placeholder:\"shipping cost\",type:\"number\",style:{width:\"20%\"}})))),/*#__PURE__*/React.createElement(Card,{style:{marginTop:\"15px\"},title:\"SEO Meta Tags\"},/*#__PURE__*/React.createElement(\"div\",{className:\"product_information\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"Meta title \"),/*#__PURE__*/React.createElement(Input,{value:metaTitle,onChange:function onChange(e){return setMetaTitle(e.target.value);},type:\"text\",placeholder:\"product meta title\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"Meta description \"),/*#__PURE__*/React.createElement(Input.TextArea,{value:metaDescription,onChange:function onChange(e){return setMetaDescription(e.target.value);},type:\"text\",placeholder:\"product meta description\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"Meta Image \"),/*#__PURE__*/React.createElement(\"div\",{style:{width:\"100%\"}},/*#__PURE__*/React.createElement(Button,{className:\"d_center\",onClick:function onClick(){setImageFor(\"meta\");setDisplay(true);},type:\"primary\",shape:\"round\",icon:/*#__PURE__*/React.createElement(UploadOutlined,null),size:\"size\"},\"Upload meta image\"),/*#__PURE__*/React.createElement(\"div\",null,metaImage&&/*#__PURE__*/React.createElement(\"div\",{className:\"image_container\"},/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return setMetaImage('');}},\"X\"),/*#__PURE__*/React.createElement(\"img\",{src:metaImage}))))))),/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return saveProduct();},size:\"large\",style:{float:\"right\",margin:\"15px 0\"},type:\"primary\"},\"Edit Product\"));};return/*#__PURE__*/React.createElement(\"div\",{className:\"product_create\"},/*#__PURE__*/React.createElement(MediaLibrary,{display:display,onHide:function onHide(){return setDisplay(false);},selectCallback:function selectCallback(item){return handleImageselect(item);}}),isCategoryLoading||isBrandLoading||loading?\"Loading\":productForm());}export default EditProduct;","map":{"version":3,"sources":["/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/src/pages/product/EditProduct.js"],"names":["React","useState","useEffect","Router","useParams","useHistory","Card","Form","Input","TreeSelect","Select","Switch","Button","Alert","UploadOutlined","ReactQuill","axios","useSelector","MediaLibrary","TreeNode","Option","EditProduct","params","history","state","data","categories","brands","isCategoryLoading","isBrandLoading","loading","setLoading","isVarValueChanged","setIsVarValueChanged","display","setDisplay","imageFor","setImageFor","errors","setErrors","editId","setEditId","product","setProduct","name","setName","brand","setBrand","unit","setUnit","tags","setTags","tagInput","setTagInput","productType","setProductType","subCategories","setSubCategories","category","setCategory","subCategory","setSubCategory","subSubCategory","setSubSubCategory","subSubCategories","setSubSubCategories","thumbnail","setThumbnail","gallery","setGallery","attributes","setAttributes","selectedAttr","setSelectedAttr","selectedAttrVal","setSelectedAttrVal","price","setPrice","discount","setDiscount","discountType","setDiscountType","tax","setTax","taxType","setTaxType","stock","setStock","sku","setSku","variations","setVariations","description","setDescription","freeShipping","setFreeShipping","cost","setCost","metaTitle","setMetaTitle","metaDescription","setMetaDescription","metaImage","setMetaImage","fetchAttributes","get","then","res","catch","err","console","log","sum","reduce","a","b","parseInt","setProductValue","value","shipping","isFree","meta","title","image","_id","pcategory","filter","cat","level","psubCategory","psubSubCategory","filterdsub","children","filterdsubsub","selected","length","map","attr","push","fetchProduct","productslug","handleChangeProductType","handleChangeCategory","filterd","handleChangeSubCategory","filterdMain","filterdSub","handleKeyPressTag","e","charCode","prev","replace","handleRemoveTag","tname","filtered","t","handleChangeAttr","handleRemoveAttr","attrval","index","findIndex","v","splice","handleChangeAttrValue","newArry","val","split","values","newVal","handleRemoveAttrValue","allArraysObj","getProducts","arrays","results","slice","forEach","concat","getAllCombinations","attributeNames","Object","keys","attributeValues","obj","isDefault","i","join","handleVariantInput","varname","type","arr","handleVariandDefault","variant","variation","alert","saveProduct","patch","window","scrollTo","top","behavior","response","handleImageselect","item","thumbnailUrl","startsWith","productForm","target","width","maxHeight","overflow","input","option","toLowerCase","indexOf","marginTop","g","array","at","justifyContent","keyName","margin","color","c","marginBottom","float"],"mappings":"soCAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,MAAT,CAAiBC,SAAjB,CAA2BC,UAA3B,KAA6C,kBAA7C,CACA,OAASC,IAAT,CAAeC,IAAf,CAAqBC,KAArB,CAA4BC,UAA5B,CAAwCC,MAAxC,CAAgDC,MAAhD,CAAwDC,MAAxD,CAAgEC,KAAhE,KAA6E,MAA7E,CACA,OAASC,cAAT,KAA+B,mBAA/B,CACA,MAAO,gBAAP,CACA,MAAO,iCAAP,CACA,MAAOC,CAAAA,UAAP,KAAuB,aAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,MAAOC,CAAAA,YAAP,KAAyB,+BAAzB,CAEA,GAAQC,CAAAA,QAAR,CAAqBV,UAArB,CAAQU,QAAR,CACA,GAAQC,CAAAA,MAAR,CAAmBV,MAAnB,CAAQU,MAAR,CAKA,QAASC,CAAAA,WAAT,EAAuB,CACnB,GAAMC,CAAAA,MAAM,CAAGlB,SAAS,EAAxB,CACA,GAAMmB,CAAAA,OAAO,CAAGlB,UAAU,EAA1B,CACA,iBAAkEY,WAAW,CAAC,SAAAO,KAAK,QAAIA,CAAAA,KAAK,CAACC,IAAV,EAAN,CAA7E,CAAQC,UAAR,cAAQA,UAAR,CAAoBC,MAApB,cAAoBA,MAApB,CAA4BC,iBAA5B,cAA4BA,iBAA5B,CAA+CC,cAA/C,cAA+CA,cAA/C,CACA,cAA8B5B,QAAQ,CAAC,IAAD,CAAtC,wCAAO6B,OAAP,eAAgBC,UAAhB,eAEA,eAAkD9B,QAAQ,CAAC,KAAD,CAA1D,yCAAO+B,iBAAP,eAA0BC,oBAA1B,eAGA,eAA8BhC,QAAQ,CAAC,KAAD,CAAtC,yCAAOiC,OAAP,eAAgBC,UAAhB,eACA,eAAgClC,QAAQ,CAAC,WAAD,CAAxC,yCAAOmC,QAAP,eAAiBC,WAAjB,eAEA,eAA4BpC,QAAQ,CAAC,EAAD,CAApC,0CAAOqC,MAAP,gBAAeC,SAAf,gBAEA,gBAA4BtC,QAAQ,CAAC,EAAD,CAApC,2CAAOuC,MAAP,gBAAeC,SAAf,gBACA,gBAA8BxC,QAAQ,CAAC,IAAD,CAAtC,2CAAOyC,OAAP,gBAAgBC,UAAhB,gBAEA;AACA,gBAAwB1C,QAAQ,CAAC,EAAD,CAAhC,2CAAO2C,IAAP,gBAAaC,OAAb,gBACA;AACA,gBAA0B5C,QAAQ,CAAC,EAAD,CAAlC,2CAAO6C,KAAP,gBAAcC,QAAd,gBACA,gBAAwB9C,QAAQ,CAAC,EAAD,CAAhC,2CAAO+C,IAAP,gBAAaC,OAAb,gBACA,gBAAwBhD,QAAQ,CAAC,EAAD,CAAhC,2CAAOiD,IAAP,gBAAaC,OAAb,gBACA,gBAAgClD,QAAQ,CAAC,EAAD,CAAxC,2CAAOmD,QAAP,gBAAiBC,WAAjB,gBAEA,gBAAsCpD,QAAQ,CAAC,QAAD,CAA9C,2CAAOqD,WAAP,gBAAoBC,cAApB,gBAEA;AACA;AACA,gBAA0CtD,QAAQ,CAAC,EAAD,CAAlD,2CAAOuD,aAAP,gBAAsBC,gBAAtB,gBACA,gBAAgCxD,QAAQ,CAAC,EAAD,CAAxC,2CAAOyD,QAAP,gBAAiBC,WAAjB,gBACA,gBAAsC1D,QAAQ,CAAC,EAAD,CAA9C,2CAAO2D,WAAP,gBAAoBC,cAApB,gBACA,gBAA4C5D,QAAQ,CAAC,EAAD,CAApD,2CAAO6D,cAAP,gBAAuBC,iBAAvB,gBACA,gBAAgD9D,QAAQ,CAAC,EAAD,CAAxD,2CAAO+D,gBAAP,gBAAyBC,mBAAzB,gBACA;AAEA;AACA,gBAAkChE,QAAQ,CAAC,EAAD,CAA1C,2CAAOiE,SAAP,gBAAkBC,YAAlB,gBACA,gBAA8BlE,QAAQ,CAAC,EAAD,CAAtC,2CAAOmE,OAAP,gBAAgBC,UAAhB,gBAEA;AACA,gBAAoCpE,QAAQ,CAAC,EAAD,CAA5C,2CAAOqE,UAAP,gBAAmBC,aAAnB,gBACA,gBAAwCtE,QAAQ,CAAC,EAAD,CAAhD,2CAAOuE,YAAP,gBAAqBC,eAArB,gBACA,gBAA8CxE,QAAQ,CAAC,EAAD,CAAtD,2CAAOyE,eAAP,gBAAwBC,kBAAxB,gBAEA;AACA,gBAA0B1E,QAAQ,EAAlC,2CAAO2E,KAAP,gBAAcC,QAAd,gBACA,gBAAgC5E,QAAQ,CAAC,CAAD,CAAxC,2CAAO6E,QAAP,gBAAiBC,WAAjB,gBACA,gBAAwC9E,QAAQ,CAAC,MAAD,CAAhD,2CAAO+E,YAAP,gBAAqBC,eAArB,gBACA,gBAAsBhF,QAAQ,CAAC,CAAD,CAA9B,2CAAOiF,GAAP,gBAAYC,MAAZ,gBACA,gBAA8BlF,QAAQ,CAAC,MAAD,CAAtC,2CAAOmF,OAAP,gBAAgBC,UAAhB,gBAEA;AACA,gBAA0BpF,QAAQ,CAAC,IAAD,CAAlC,2CAAOqF,KAAP,gBAAcC,QAAd,gBACA,gBAAsBtF,QAAQ,CAAC,EAAD,CAA9B,2CAAOuF,GAAP,gBAAYC,MAAZ,gBAGA;AAEA,gBAAoCxF,QAAQ,CAAC,EAAD,CAA5C,2CAAOyF,UAAP,gBAAmBC,aAAnB,gBAEA;AACA,gBAAsC1F,QAAQ,CAAC,EAAD,CAA9C,2CAAO2F,WAAP,gBAAoBC,cAApB,gBAEA;AACA,gBAAwC5F,QAAQ,CAAC,IAAD,CAAhD,2CAAO6F,YAAP,gBAAqBC,eAArB,gBACA,gBAAwB9F,QAAQ,CAAC,CAAD,CAAhC,2CAAO+F,IAAP,gBAAaC,OAAb,gBAEA;AACA,gBAAkChG,QAAQ,CAAC,EAAD,CAA1C,2CAAOiG,SAAP,gBAAkBC,YAAlB,gBACA,gBAA8ClG,QAAQ,CAAC,EAAD,CAAtD,2CAAOmG,eAAP,gBAAwBC,kBAAxB,gBACA,gBAAkCpG,QAAQ,CAAC,EAAD,CAA1C,2CAAOqG,SAAP,gBAAkBC,YAAlB,gBAKA;AAGA,GAAMC,CAAAA,eAAe,0FAAG,mIACpBxF,KAAK,CAACyF,GAAN,CAAU,eAAV,EACKC,IADL,CACU,SAAAC,GAAG,CAAI,CACTpC,aAAa,CAACoC,GAAG,CAAClF,IAAJ,CAAS6C,UAAV,CAAb,CAEH,CAJL,EAKKsC,KALL,CAKW,SAAAC,GAAG,CAAI,CACVC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACH,CAPL,EADoB,sDAAH,kBAAfL,CAAAA,eAAe,0CAArB,CAYAtG,SAAS,CAAC,UAAM,CACZ,GAAIwF,UAAU,EAAIpC,WAAW,GAAI,QAAjC,CAA0C,CACtC,GAAI0D,CAAAA,GAAG,CAAGtB,UAAU,CAACuB,MAAX,CAAkB,SAAUC,CAAV,CAAaC,CAAb,CAAgB,CACxC,MAAOC,CAAAA,QAAQ,CAACF,CAAD,CAAR,CAAcE,QAAQ,CAACD,CAAC,CAAC7B,KAAH,CAA7B,CACH,CAFS,CAEP,CAFO,CAAV,CAGAC,QAAQ,CAACyB,GAAD,CAAR,CACH,CAGJ,CATQ,CASN,CAACtB,UAAD,CATM,CAAT,CAWA,GAAM2B,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAC3E,OAAD,CAAa,qGACjCG,OAAO,CAACH,OAAO,CAACE,IAAT,CAAP,CACAK,OAAO,CAACP,OAAO,CAACM,IAAT,CAAP,CACAG,OAAO,CAACT,OAAO,CAACQ,IAAT,CAAP,CACAiB,YAAY,CAACzB,OAAO,CAACwB,SAAT,CAAZ,CACAG,UAAU,CAAC3B,OAAO,CAAC0B,OAAT,CAAV,CACAS,QAAQ,CAACnC,OAAO,CAACkC,KAAT,CAAR,CACAG,WAAW,CAACrC,OAAO,CAACoC,QAAR,CAAiBwC,KAAlB,CAAX,CACArC,eAAe,CAACvC,OAAO,CAACoC,QAAR,CAAiBE,YAAlB,CAAf,CACAG,MAAM,CAACzC,OAAO,CAACwC,GAAR,CAAYoC,KAAb,CAAN,CACAjC,UAAU,CAAC3C,OAAO,CAACwC,GAAR,CAAYE,OAAb,CAAV,CACAK,MAAM,CAAC/C,OAAO,CAAC8C,GAAT,CAAN,CACAK,cAAc,CAACnD,OAAO,CAACkD,WAAT,CAAd,CACAG,eAAe,CAACrD,OAAO,CAAC6E,QAAR,CAAiBC,MAAlB,CAAf,CACAvB,OAAO,CAACvD,OAAO,CAAC6E,QAAR,CAAiBvB,IAAlB,CAAP,CACAG,YAAY,CAACzD,OAAO,CAAC+E,IAAR,CAAaC,KAAd,CAAZ,CACArB,kBAAkB,CAAC3D,OAAO,CAAC+E,IAAR,CAAa7B,WAAd,CAAlB,CACAW,YAAY,CAAC7D,OAAO,CAAC+E,IAAR,CAAaE,KAAd,CAAZ,CACA5E,QAAQ,CAAC,iBAAAL,OAAO,CAACI,KAAR,wDAAe8E,GAAf,GAAsB,EAAvB,CAAR,CACArE,cAAc,CAACb,OAAO,CAACY,WAAT,CAAd,CACAiC,QAAQ,CAAC7C,OAAO,CAAC4C,KAAT,CAAR,CAEA,GAAIuC,CAAAA,SAAS,CAAG,wBAAAnF,OAAO,CAAChB,UAAR,CAAmBoG,MAAnB,CAA0B,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,KAAJ,EAAa,CAAjB,EAA7B,EAAiD,CAAjD,uEAAqDtE,QAArD,GAAiE,IAAjF,CACA,GAAIuE,CAAAA,YAAY,CAAG,yBAAAvF,OAAO,CAAChB,UAAR,CAAmBoG,MAAnB,CAA0B,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,KAAJ,EAAa,CAAjB,EAA7B,EAAiD,CAAjD,yEAAqDtE,QAArD,GAAiE,IAApF,CACA,GAAIwE,CAAAA,eAAe,CAAG,yBAAAxF,OAAO,CAAChB,UAAR,CAAmBoG,MAAnB,CAA0B,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,KAAJ,EAAa,CAAjB,EAA7B,EAAiD,CAAjD,yEAAqDtE,QAArD,GAAiE,IAAvF,CAEAC,WAAW,CAACkE,SAAD,CAAX,CACA,GAAIM,CAAAA,UAAU,CAAGzG,UAAU,CAACoG,MAAX,CAAkB,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACH,GAAJ,GAAYC,SAAhB,EAArB,CAAjB,CACIpE,gBAAgB,eAAC0E,UAAU,CAAC,CAAD,CAAX,uCAAC,aAAeC,QAAhB,CAAhB,CACJ,GAAIH,YAAJ,CAAkB,mCAId,GAAII,CAAAA,aAAa,gBAAGF,UAAU,CAAC,CAAD,CAAb,wCAAG,cAAeC,QAAf,CAAwBN,MAAxB,CAA+B,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACH,GAAJ,GAAYK,YAAhB,EAAlC,CAApB,CACAhE,mBAAmB,kBAACoE,aAAa,CAAC,CAAD,CAAd,0CAAC,gBAAkBD,QAAnB,CAAnB,CAEH,CAIDH,YAAY,EAAIpE,cAAc,CAACoE,YAAD,CAA9B,CACAC,eAAe,EAAInE,iBAAiB,CAACmE,eAAD,CAApC,CAEA,GAAII,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAIhE,UAAU,CAACiE,MAAf,CAAuB,CACnB7F,OAAO,CAAC4B,UAAR,CAAmBkE,GAAnB,CAAuB,SAAAC,IAAI,CAAI,CAC3BH,QAAQ,CAACI,IAAT,CAAcpE,UAAU,CAACwD,MAAX,CAAkB,SAAAZ,CAAC,QAAIA,CAAAA,CAAC,CAACtE,IAAF,GAAW6F,IAAI,CAAC7F,IAApB,EAAnB,EAA6C,CAA7C,CAAd,EACA;AAEH,CAJD,EAKH,CAGD6B,eAAe,CAAC6D,QAAD,CAAf,CACA3D,kBAAkB,CAACjC,OAAO,CAAC4B,UAAT,CAAlB,CACAqB,aAAa,CAACjD,OAAO,CAACgD,UAAT,CAAb,CACA3D,UAAU,CAAC,KAAD,CAAV,CACH,CAzDD,CA8DA,GAAM4G,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACvB;AACA3H,KAAK,CAACyF,GAAN,4BAA8BnF,MAAM,CAACsH,WAArC,GACKlC,IADL,CACU,SAAAC,GAAG,CAAI,CACTlE,SAAS,CAACkE,GAAG,CAAClF,IAAJ,CAASiB,OAAT,CAAiBkF,GAAlB,CAAT,CACAjF,UAAU,CAACgE,GAAG,CAAClF,IAAJ,CAASiB,OAAV,CAAV,CACH,CAJL,EAKKkE,KALL,CAKW,SAAAC,GAAG,CAAE,CACRtF,OAAO,CAACmH,IAAR,CAAa,sBAAb,EACH,CAPL,EAQH,CAVD,CAYAxI,SAAS,CAAC,UAAM,CACZ,GAAIwC,OAAO,EAAIhB,UAAU,CAAC6G,MAAX,CAAoB,CAAnC,CAAsC,CAClClB,eAAe,CAAC3E,OAAD,CAAf,CACH,CACJ,CAJQ,CAIN,CAACA,OAAD,CAAUhB,UAAV,CAAsB4C,UAAtB,CAJM,CAAT,CAMApE,SAAS,CAAC,UAAM,CACZ,GAAIoB,MAAJ,CAAY,CACRqH,YAAY,GACf,CACJ,CAJQ,CAIN,CAACrH,MAAD,CAJM,CAAT,CAMApB,SAAS,CAAC,UAAM,CACZ,wDAAC,wIACG6B,UAAU,CAAC,IAAD,CAAV,CADH,uBAESyE,CAAAA,eAAe,EAFxB,yDAAD,KAOH,CARQ,CAQN,EARM,CAAT,CAUA;AAEA,GAAMqC,CAAAA,uBAAuB,CAAG,QAA1BA,CAAAA,uBAA0B,CAACvB,KAAD,CAAW,CACvC,GAAIA,KAAK,GAAK,QAAd,CAAwB,CACpB7C,eAAe,CAAC,EAAD,CAAf,CACAE,kBAAkB,CAAC,EAAD,CAAlB,CACAgB,aAAa,CAAC,EAAD,CAAb,CACH,CACDpC,cAAc,CAAC+D,KAAD,CAAd,CACH,CAPD,CAUA,GAAMwB,CAAAA,oBAAoB,CAAC,QAArBA,CAAAA,oBAAqB,CAACxB,KAAD,CAAS,eAChC3D,WAAW,CAAC2D,KAAD,CAAX,CACA,GAAIyB,CAAAA,OAAO,CAAGrH,UAAU,CAACoG,MAAX,CAAkB,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACH,GAAJ,GAAYN,KAAhB,EAArB,CAAd,CACA7D,gBAAgB,YAACsF,OAAO,CAAC,CAAD,CAAR,oCAAC,UAAYX,QAAb,CAAhB,CACAnE,mBAAmB,CAAC,EAAD,CAAnB,CACAJ,cAAc,CAAC,EAAD,CAAd,CACAE,iBAAiB,CAAC,EAAD,CAAjB,CACH,CAPD,CASA,GAAMiF,CAAAA,uBAAuB,CAAC,QAAxBA,CAAAA,uBAAwB,CAAC1B,KAAD,CAAS,mBACnCzD,cAAc,CAACyD,KAAD,CAAd,CACA,GAAI2B,CAAAA,WAAW,CAAGvH,UAAU,CAACoG,MAAX,CAAkB,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACH,GAAJ,GAAYlE,QAAhB,EAArB,CAAlB,CACA,GAAIwF,CAAAA,UAAU,gBAAGD,WAAW,CAAC,CAAD,CAAd,wCAAG,cAAgBb,QAAhB,CAAyBN,MAAzB,CAAgC,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACH,GAAJ,GAAYN,KAAhB,EAAnC,EAA0D,CAA1D,CAAjB,CACA,GAAG4B,UAAH,SAAGA,UAAH,iBAAGA,UAAU,CAAEd,QAAf,CAAwB,CACpBnE,mBAAmB,CAACiF,UAAD,SAACA,UAAD,iBAACA,UAAU,CAAEd,QAAb,CAAnB,CACH,CACDrE,iBAAiB,CAAC,EAAD,CAAjB,CACH,CARD,CAcA;AACA,GAAMoF,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,CAAD,CAAO,CAE7B,GAAIA,CAAC,CAACC,QAAF,GAAe,EAAf,EAAqBD,CAAC,CAACC,QAAF,GAAe,EAAxC,CAA4C,CACxClG,OAAO,CAAC,SAAAmG,IAAI,qCAAQA,IAAR,GAAclG,QAAQ,CAACmG,OAAT,CAAiB,GAAjB,CAAsB,EAAtB,CAAd,IAAL,CAAP,CACA;AACAlG,WAAW,CAAC,EAAD,CAAX,CACH,CACJ,CAPD,CASA,GAAMmG,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,KAAD,CAAW,CAC/B,GAAIC,CAAAA,QAAQ,CAAGxG,IAAI,CAAC4E,MAAL,CAAY,SAAA6B,CAAC,QAAIA,CAAAA,CAAC,GAAKF,KAAV,EAAb,CAAf,CACAtG,OAAO,CAACuG,QAAD,CAAP,CACH,CAHD,CAMA;AACA,GAAME,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACtC,KAAD,CAAW,CAChCrF,oBAAoB,CAAC,IAAD,CAApB,CACA,GAAIyH,CAAAA,QAAQ,CAAGpF,UAAU,CAACwD,MAAX,CAAkB,SAAAZ,CAAC,QAAIA,CAAAA,CAAC,CAACU,GAAF,GAAUN,KAAd,EAAnB,EAAwC,CAAxC,CAAf,CACA7C,eAAe,CAAC,SAAA6E,IAAI,qCAAQA,IAAR,GAAcI,QAAd,IAAL,CAAf,CAEH,CALD,CAMA,GAAMG,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACvC,KAAD,CAAW,CAChCrF,oBAAoB,CAAC,IAAD,CAApB,CACA,GAAIyH,CAAAA,QAAQ,CAAGlF,YAAY,CAACsD,MAAb,CAAoB,SAAAZ,CAAC,QAAIA,CAAAA,CAAC,CAACU,GAAF,GAAUN,KAAd,EAArB,CAAf,CACA,GAAIgB,CAAAA,QAAQ,CAAG9D,YAAY,CAACsD,MAAb,CAAoB,SAAAZ,CAAC,QAAIA,CAAAA,CAAC,CAACU,GAAF,GAAUN,KAAd,EAArB,EAA0C,CAA1C,CAAf,CACA7C,eAAe,CAACiF,QAAD,CAAf,CAGA,GAAII,CAAAA,OAAO,oBAAOpF,eAAP,CAAX,CACA,GAAIqF,CAAAA,KAAK,CAAGD,OAAO,CAACE,SAAR,CAAkB,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACrH,IAAF,GAAW0F,QAAQ,CAAC1F,IAAxB,EAAnB,CAAZ,CACAkH,OAAO,CAACI,MAAR,CAAeH,KAAf,CAAsB,CAAtB,EACApF,kBAAkB,CAACmF,OAAD,CAAlB,CAEH,CAZD,CAaA;AAEA;AACA,GAAMK,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAAC7C,KAAD,CAAW,CAErC,GAAI8C,CAAAA,OAAO,oBAAO1F,eAAP,CAAX,CACA,GAAIqF,CAAAA,KAAK,CAAGK,OAAO,CAACJ,SAAR,CAAkB,SAAAK,GAAG,QAAIA,CAAAA,GAAG,CAACzH,IAAJ,GAAa0E,KAAK,CAACgD,KAAN,CAAY,KAAZ,EAAmB,CAAnB,CAAjB,EAArB,CAAZ,CAGA,GAAIP,KAAK,GAAK,CAAC,CAAf,CAAkB,CACdpF,kBAAkB,8BAAKD,eAAL,GAAsB,CAAE9B,IAAI,CAAE0E,KAAK,CAACgD,KAAN,CAAY,KAAZ,EAAmB,CAAnB,CAAR,CAA+BC,MAAM,CAAE,CAACjD,KAAK,CAACgD,KAAN,CAAY,KAAZ,EAAmB,CAAnB,CAAD,CAAvC,CAAtB,GAAlB,CACArI,oBAAoB,CAAC,IAAD,CAApB,CACH,CAHD,IAGO,CACH,GAAIuI,CAAAA,MAAM,8BAAOJ,OAAO,CAACL,KAAD,CAAP,CAAeQ,MAAtB,GAA8BjD,KAAK,CAACgD,KAAN,CAAY,KAAZ,EAAmB,CAAnB,CAA9B,EAAV,CACAF,OAAO,CAACL,KAAD,CAAP,CAAiB,CAAEnH,IAAI,CAAE0E,KAAK,CAACgD,KAAN,CAAY,KAAZ,EAAmB,CAAnB,CAAR,CAA+BC,MAAM,CAAEC,MAAvC,CAAjB,CACA7F,kBAAkB,CAACyF,OAAD,CAAlB,CACAnI,oBAAoB,CAAC,IAAD,CAApB,CACH,CAIJ,CAlBD,CAoBA,GAAMwI,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAACnD,KAAD,CAAW,CAErC,GAAI8C,CAAAA,OAAO,oBAAO1F,eAAP,CAAX,CACA,GAAIqF,CAAAA,KAAK,CAAGK,OAAO,CAACJ,SAAR,CAAkB,SAAAK,GAAG,QAAIA,CAAAA,GAAG,CAACzH,IAAJ,GAAa0E,KAAK,CAACgD,KAAN,CAAY,KAAZ,EAAmB,CAAnB,CAAjB,EAArB,CAAZ,CAEA,GAAIP,KAAK,GAAK,CAAC,CAAf,CAAkB,OAClB,GAAIzB,CAAAA,QAAQ,CAAG8B,OAAO,CAACL,KAAD,CAAtB,CAEA,GAAIS,CAAAA,MAAM,CAAGlC,QAAQ,CAACiC,MAAT,CAAgBzC,MAAhB,CAAuB,SAAAmC,CAAC,QAAIA,CAAAA,CAAC,GAAK3C,KAAK,CAACgD,KAAN,CAAY,KAAZ,EAAmB,CAAnB,CAAV,EAAxB,CAAb,CAGA,GAAIE,MAAM,CAACjC,MAAP,GAAkB,CAAtB,CAAyB,CAErB6B,OAAO,CAACF,MAAR,CAAeH,KAAf,CAAsB,CAAtB,EACApF,kBAAkB,CAACyF,OAAD,CAAlB,CACAnI,oBAAoB,CAAC,IAAD,CAApB,CACH,CALD,IAKO,CACHmI,OAAO,CAACL,KAAD,CAAP,CAAiB,CAAEnH,IAAI,CAAE0E,KAAK,CAACgD,KAAN,CAAY,KAAZ,EAAmB,CAAnB,CAAR,CAA+BC,MAAM,CAAEC,MAAvC,CAAjB,CACA7F,kBAAkB,CAACyF,OAAD,CAAlB,CACAnI,oBAAoB,CAAC,IAAD,CAApB,CACH,CAGJ,CAvBD,CA6BA/B,SAAS,CAAC,UAAM,CACZ,GAAI,CAAC8B,iBAAL,CAAwB,OACxB,GAAI0C,eAAe,CAAC6D,MAAhB,CAAyB,CAA7B,CAAgC,CAC5B5C,aAAa,CAAC,EAAD,CAAb,CACA,OACH,CAED,GAAI+E,CAAAA,YAAY,CAAG,EAAnB,CACAhG,eAAe,CAAC8D,GAAhB,CAAoB,SAAAtB,CAAC,CAAI,CACrBwD,YAAY,gCAAQA,YAAR,wBAAuBxD,CAAC,CAACtE,IAAzB,CAAgCsE,CAAC,CAACqD,MAAlC,EAAZ,CACH,CAFD,EAKA,GAAII,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,MAAD,CAAY,CAC1B,GAAIA,MAAM,CAACrC,MAAP,GAAkB,CAAtB,CAAyB,CACrB,MAAO,CAAC,EAAD,CAAP,CACH,CAED,GAAIsC,CAAAA,OAAO,CAAG,EAAd,CAEAF,WAAW,CAACC,MAAM,CAACE,KAAP,CAAa,CAAb,CAAD,CAAX,CAA6BC,OAA7B,CAAqC,SAACrI,OAAD,CAAa,CAC9CkI,MAAM,CAAC,CAAD,CAAN,CAAUG,OAAV,CAAkB,SAACzD,KAAD,CAAW,CACzBuD,OAAO,CAACnC,IAAR,CAAa,CAACpB,KAAD,EAAQ0D,MAAR,CAAetI,OAAf,CAAb,EACH,CAFD,EAGH,CAJD,EAMA,MAAOmI,CAAAA,OAAP,CACH,CAdD,CAgBA,GAAII,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAC3G,UAAD,CAAgB,CAErC,GAAI4G,CAAAA,cAAc,CAAGC,MAAM,CAACC,IAAP,CAAY9G,UAAZ,CAArB,CAEA,GAAI+G,CAAAA,eAAe,CAAGH,cAAc,CAAC1C,GAAf,CAAmB,SAAC5F,IAAD,QAAU0B,CAAAA,UAAU,CAAC1B,IAAD,CAApB,EAAnB,CAAtB,CAEA,MAAO+H,CAAAA,WAAW,CAACU,eAAD,CAAX,CAA6B7C,GAA7B,CAAiC,SAAC9F,OAAD,CAAUqH,KAAV,CAAoB,CACxD,GAAIM,CAAAA,GAAG,CAAG,EAAV,CACA,GAAIiB,CAAAA,GAAG,CAAG,CAAEhG,KAAK,CAAE,CAAT,CAAYqC,KAAK,CAAE,EAAnB,CAAuB/C,KAAK,CAAE,CAA9B,CAAiCE,QAAQ,CAAE,CAA3C,CAA8CE,YAAY,CAAE,MAA5D,CAAoEuG,SAAS,CAAE,KAA/E,CAAV,CACAL,cAAc,CAACH,OAAf,CAAuB,SAACnI,IAAD,CAAO4I,CAAP,CAAa,CAChCF,GAAG,CAAC1I,IAAD,CAAH,CAAYF,OAAO,CAAC8I,CAAD,CAAnB,CACAnB,GAAG,CAAC3B,IAAJ,CAAShG,OAAO,CAAC8I,CAAD,CAAhB,EAGH,CALD,EAMA,GAAIzB,KAAK,GAAK,CAAd,CAAiB,CACbuB,GAAG,CAAC,WAAD,CAAH,CAAmB,IAAnB,CAEH,CACDA,GAAG,CAAC,SAAD,CAAH,CAAkBjB,GAAG,CAACoB,IAAJ,CAAS,IAAT,CAAlB,CACA,MAAOH,CAAAA,GAAP,CACH,CAfM,CAAP,CAgBH,CAtBD,CAuBA;AACA3F,aAAa,CAACsF,kBAAkB,CAACP,YAAD,CAAnB,CAAb,CACH,CAtDQ,CAsDN,CAAChG,eAAD,CAAkBF,YAAlB,CAtDM,CAAT,CAyDA,GAAMkH,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,OAAD,CAAUC,IAAV,CAAgBtE,KAAhB,CAAuBiE,SAAvB,CAAqC,CAC5D,GAAIA,SAAJ,CAAe,CACX,GAAIK,IAAI,GAAK,OAAb,CAAsB,CAClB/G,QAAQ,CAACyC,KAAD,CAAR,CACH,CAFD,IAEO,IAAIsE,IAAI,GAAK,UAAb,CAAyB,CAC5B7G,WAAW,CAACuC,KAAD,CAAX,CACH,CAFM,IAEA,IAAIsE,IAAI,GAAK,cAAb,CAA6B,CAChC3G,eAAe,CAACqC,KAAD,CAAf,CACH,CACJ,CACD,GAAIoC,CAAAA,QAAQ,CAAGhE,UAAU,CAACsE,SAAX,CAAqB,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAAC0B,OAAF,GAAcA,OAAlB,EAAtB,CAAf,CACA,GAAIE,CAAAA,GAAG,oBAAOnG,UAAP,CAAP,CACAmG,GAAG,CAACnC,QAAD,CAAH,gCAAqBmC,GAAG,CAACnC,QAAD,CAAxB,wBAAqCkC,IAArC,CAA4CtE,KAA5C,GACA3B,aAAa,CAACkG,GAAD,CAAb,CACH,CAdD,CAgBA,GAAMC,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAACC,OAAD,CAAUzE,KAAV,CAAoB,CAC7C,GAAIA,KAAJ,CAAW,CACPzC,QAAQ,CAACkH,OAAO,CAACnH,KAAT,CAAR,CACAG,WAAW,CAACgH,OAAO,CAACjH,QAAT,CAAX,CACAG,eAAe,CAAC8G,OAAO,CAAC/G,YAAT,CAAf,CACA,GAAI6G,CAAAA,GAAG,CAAG,EAAV,CACAnG,UAAU,EAAIA,UAAU,CAAC8C,GAAX,CAAe,SAACwD,SAAD,CAAYR,CAAZ,CAAkB,CAC3C,GAAIQ,SAAS,CAACL,OAAV,GAAsBI,OAAO,CAACJ,OAAlC,CAA2C,CACvCE,GAAG,CAACnD,IAAJ,gCAAcsD,SAAd,MAAyBT,SAAS,CAAE,IAApC,CAA0C5D,KAAK,CAAEzD,SAAjD,IACH,CAFD,IAEO,CACH2H,GAAG,CAACnD,IAAJ,gCAAcsD,SAAd,MAAyBT,SAAS,CAAE,KAApC,IACH,CACJ,CANa,CAAd,CAQA5F,aAAa,CAACkG,GAAD,CAAb,CACH,CAdD,IAcO,CACHI,KAAK,CAAC,gBAAD,CAAL,CACH,CAIJ,CArBD,CA6BA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtB,GAAIzK,CAAAA,IAAI,CAAG,CACPmB,IAAI,CAAJA,IADO,CAEPlB,UAAU,CAAE,EAFL,CAGPoB,KAAK,CAALA,KAHO,CAIPE,IAAI,CAAJA,IAJO,CAKPE,IAAI,CAAJA,IALO,CAMPgB,SAAS,CAATA,SANO,CAOPE,OAAO,CAAPA,OAPO,CAQPE,UAAU,CAAEI,eARL,CASPgB,UAAU,CAAVA,UATO,CAUPpC,WAAW,CAAXA,WAVO,CAWPsB,KAAK,CAALA,KAXO,CAYPE,QAAQ,CAAE,CACNE,YAAY,CAAZA,YADM,CAENsC,KAAK,CAAExC,QAFD,CAZH,CAgBPI,GAAG,CAAE,CACDE,OAAO,CAAPA,OADC,CAEDkC,KAAK,CAAExC,QAFN,CAhBE,CAoBPU,GAAG,CAAHA,GApBO,CAqBPF,KAAK,CAALA,KArBO,CAsBPM,WAAW,CAAXA,WAtBO,CAuBP2B,QAAQ,CAAE,CACNC,MAAM,CAAE1B,YADF,CAENE,IAAI,CAAJA,IAFM,CAvBH,CA2BPyB,IAAI,CAAE,CACFC,KAAK,CAAExB,SADL,CAEFN,WAAW,CAAEQ,eAFX,CAGFuB,KAAK,CAAErB,SAHL,CA3BC,CAAX,CAkCA,GAAI5C,QAAJ,CAAc,CACVjC,IAAI,CAACC,UAAL,CAAgBgH,IAAhB,CAAqB,CAAEV,KAAK,CAAE,CAAT,CAAYtE,QAAQ,CAARA,QAAZ,CAArB,EACH,CACD,GAAIE,WAAJ,CAAiB,CACbnC,IAAI,CAACC,UAAL,CAAgBgH,IAAhB,CAAqB,CAAEV,KAAK,CAAE,CAAT,CAAYtE,QAAQ,CAAEE,WAAtB,CAArB,EACH,CACD,GAAIE,cAAJ,CAAoB,CAChBrC,IAAI,CAACC,UAAL,CAAgBgH,IAAhB,CAAqB,CAAEV,KAAK,CAAE,CAAT,CAAYtE,QAAQ,CAAEI,cAAtB,CAArB,EACH,CAED,GAAI,CAACJ,QAAL,CAAe,CACXnB,SAAS,CAAC,CAAEmB,QAAQ,CAAE,0BAAZ,CAAD,CAAT,CACH,CAED;AACA;AACA1C,KAAK,CAACmL,KAAN,yBAA6B3J,MAA7B,EAAuCf,IAAvC,EACKiF,IADL,CACU,SAAAC,GAAG,CAAI,CACTsF,KAAK,CAAC,8BAAD,CAAL,CACA1J,SAAS,CAAC,EAAD,CAAT,CACH,CAJL,EAKKqE,KALL,CAKW,SAAAC,GAAG,CAAI,CACVuF,MAAM,CAACC,QAAP,CAAgB,CACZC,GAAG,CAAE,GADO,CAGZC,QAAQ,CAAE,QAHE,CAAhB,EAKA1F,GAAG,EAAIA,GAAG,CAAC2F,QAAX,EAAuBjK,SAAS,CAACsE,GAAG,CAAC2F,QAAJ,CAAa/K,IAAd,CAAhC,CACH,CAZL,EAaH,CAhED,CAmEA,GAAMgL,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,IAAD,CAAU,CAChC,GAAItK,QAAQ,GAAK,WAAjB,CAA8B,CAC1B+B,YAAY,CAACuI,IAAI,CAACC,YAAN,CAAZ,CACH,CACD,GAAIvK,QAAQ,GAAK,SAAjB,CAA4B,CACxBiC,UAAU,CAAC,SAAAiF,IAAI,qCAAQA,IAAR,GAAcoD,IAAI,CAACC,YAAnB,IAAL,CAAV,CACH,CACD,GAAIvK,QAAQ,GAAK,MAAjB,CAAyB,CACrBmE,YAAY,CAACmG,IAAI,CAACC,YAAN,CAAZ,CACH,CAED,GAAIvK,QAAQ,CAACwK,UAAT,CAAoB,YAApB,CAAJ,CAAuC,CACnC,GAAIjB,CAAAA,OAAO,CAAGvJ,QAAQ,CAACmH,OAAT,CAAiB,YAAjB,CAA+B,EAA/B,CAAd,CACAmC,kBAAkB,CAACC,OAAD,CAAU,OAAV,CAAmBe,IAAI,CAACC,YAAxB,CAAsC,KAAtC,CAAlB,CACH,CAEDxK,UAAU,CAAC,KAAD,CAAV,CACH,CAjBD,CAqBA,GAAM0K,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,sBAChB,qDACI,oBAAC,IAAD,EAAM,KAAK,CAAC,qBAAZ,eACI,2BAAK,SAAS,CAAC,qBAAf,eACI,2BAAK,SAAS,CAAC,YAAf,eACI,8DAAoB,4BAAM,SAAS,CAAC,UAAhB,MAApB,CADJ,cAEI,2BAAK,SAAS,CAAC,WAAf,eACI,oBAAC,KAAD,EAAO,SAAS,CAAEvK,MAAM,EAAIA,MAAM,CAACM,IAAjB,EAAyB,OAA3C,CAAoD,KAAK,CAAEA,IAA3D,CAAiE,QAAQ,CAAE,kBAACwG,CAAD,QAAOvG,CAAAA,OAAO,CAACuG,CAAC,CAAC0D,MAAF,CAASxF,KAAV,CAAd,EAA3E,CAA2G,WAAW,CAAC,cAAvH,EADJ,CAEKhF,MAAM,EAAIA,MAAM,CAACM,IAAjB,eAAyB,4BAAM,SAAS,CAAC,YAAhB,EAA8BN,MAAM,CAACM,IAArC,CAF9B,CAFJ,CADJ,cAaI,2BAAK,SAAS,CAAC,YAAf,eACI,0DAAgB,4BAAM,SAAS,CAAC,UAAhB,MAAhB,CADJ,cAEI,2BAAK,SAAS,CAAC,WAAf,eACI,oBAAC,MAAD,EACI,UAAU,KADd,CAEI,KAAK,CAAE,CAAEmK,KAAK,CAAE,MAAT,CAFX,CAGI,aAAa,CAAE,CAAEC,SAAS,CAAE,GAAb,CAAkBC,QAAQ,CAAE,MAA5B,CAHnB,CAII,WAAW,CAAC,0BAJhB,CAKI,gBAAgB,CAAC,UALrB,CAMI,QAAQ,CAAE,kBAAC3F,KAAD,QAAWwB,CAAAA,oBAAoB,CAACxB,KAAD,CAA/B,EANd,CAOI,KAAK,CAAE5D,QAPX,CAQI,YAAY,CAAE,sBAACwJ,KAAD,CAAQC,MAAR,QACVA,CAAAA,MAAM,CAAC/E,QAAP,CAAgBgF,WAAhB,GAA8BC,OAA9B,CAAsCH,KAAK,CAACE,WAAN,EAAtC,GAA8D,CADpD,EARlB,EAaQ,CAAA1L,UAAU,OAAV,EAAAA,UAAU,SAAV,QAAAA,UAAU,CAAE6G,MAAZ,EAAqB,CAArB,EAA0B7G,UAAU,CAAC8G,GAAX,CAAe,SAACT,GAAD,CAAMgC,KAAN,CAAgB,CACrD,mBACI,oBAAC,MAAD,EAAQ,GAAG,CAAEA,KAAb,CAAoB,KAAK,CAAEhC,GAAG,CAACH,GAA/B,EAAqCG,GAAG,CAACnF,IAAzC,CADJ,CAIH,CALyB,CAblC,CADJ,CAwBKN,MAAM,EAAIA,MAAM,CAACoB,QAAjB,eAA6B,4BAAM,SAAS,CAAC,YAAhB,EAA8BpB,MAAM,CAACoB,QAArC,CAxBlC,CAFJ,CAbJ,CAkDQ,CAAAF,aAAa,OAAb,EAAAA,aAAa,SAAb,QAAAA,aAAa,CAAE+E,MAAf,EAAwB,CAAxB,eACA,2BAAK,SAAS,CAAC,YAAf,eACI,8DAAoB,4BAAM,SAAS,CAAC,UAAhB,MAApB,CADJ,cAEI,2BAAK,SAAS,CAAC,WAAf,eACI,oBAAC,MAAD,EACI,UAAU,KADd,CAEI,KAAK,CAAE,CAAEwE,KAAK,CAAE,MAAT,CAFX,CAGI,aAAa,CAAE,CAAEC,SAAS,CAAE,GAAb,CAAkBC,QAAQ,CAAE,MAA5B,CAHnB,CAII,WAAW,CAAC,8BAJhB,CAKI,gBAAgB,CAAC,UALrB,CAMI,QAAQ,CAAE,kBAAC3F,KAAD,QAAU0B,CAAAA,uBAAuB,CAAC1B,KAAD,CAAjC,EANd,CAOI,KAAK,CAAE1D,WAPX,CAQI,YAAY,CAAE,sBAACsJ,KAAD,CAAQC,MAAR,QACVA,CAAAA,MAAM,CAAC/E,QAAP,CAAgBgF,WAAhB,GAA8BC,OAA9B,CAAsCH,KAAK,CAACE,WAAN,EAAtC,GAA8D,CADpD,EARlB,EAaQ,CAAA5J,aAAa,OAAb,EAAAA,aAAa,SAAb,QAAAA,aAAa,CAAE+E,MAAf,EAAwB,CAAxB,EAA6B/E,aAAa,CAACgF,GAAd,CAAkB,SAACT,GAAD,CAAMgC,KAAN,CAAgB,CAC3D,mBACI,oBAAC,MAAD,EAAQ,GAAG,CAAEA,KAAb,CAAoB,KAAK,CAAEhC,GAAG,CAACH,GAA/B,EAAqCG,GAAG,CAACnF,IAAzC,CADJ,CAIH,CAL4B,CAbrC,CADJ,CAyBKN,MAAM,EAAIA,MAAM,CAACoB,QAAjB,eAA6B,4BAAM,SAAS,CAAC,YAAhB,EAA8BpB,MAAM,CAACoB,QAArC,CAzBlC,CAFJ,CAnDR,CAsFQ,CAAAM,gBAAgB,OAAhB,EAAAA,gBAAgB,SAAhB,QAAAA,gBAAgB,CAAEuE,MAAlB,EAA2B,CAA3B,eACA,2BAAK,SAAS,CAAC,YAAf,eACI,qEAA2B,4BAAM,SAAS,CAAC,UAAhB,MAA3B,CADJ,cAEI,2BAAK,SAAS,CAAC,WAAf,eACI,oBAAC,MAAD,EACI,UAAU,KADd,CAEI,KAAK,CAAE,CAAEwE,KAAK,CAAE,MAAT,CAFX,CAGI,aAAa,CAAE,CAAEC,SAAS,CAAE,GAAb,CAAkBC,QAAQ,CAAE,MAA5B,CAHnB,CAII,WAAW,CAAC,8BAJhB,CAKI,gBAAgB,CAAC,UALrB,CAMI,QAAQ,CAAE,kBAAC3F,KAAD,QAAUvD,CAAAA,iBAAiB,CAACuD,KAAD,CAA3B,EANd,CAOI,KAAK,CAAExD,cAPX,CAQI,YAAY,CAAE,sBAACoJ,KAAD,CAAQC,MAAR,QACVA,CAAAA,MAAM,CAAC/E,QAAP,CAAgBgF,WAAhB,GAA8BC,OAA9B,CAAsCH,KAAK,CAACE,WAAN,EAAtC,GAA8D,CADpD,EARlB,EAaQ,CAAApJ,gBAAgB,OAAhB,EAAAA,gBAAgB,SAAhB,QAAAA,gBAAgB,CAAEuE,MAAlB,EAA2B,CAA3B,EAAgCvE,gBAAgB,CAACwE,GAAjB,CAAqB,SAACT,GAAD,CAAMgC,KAAN,CAAgB,CACjE,mBACI,oBAAC,MAAD,EAAQ,GAAG,CAAEA,KAAb,CAAoB,KAAK,CAAEhC,GAAG,CAACH,GAA/B,EAAqCG,GAAG,CAACnF,IAAzC,CADJ,CAIH,CAL+B,CAbxC,CADJ,CAwBKN,MAAM,EAAIA,MAAM,CAACoB,QAAjB,eAA6B,4BAAM,SAAS,CAAC,YAAhB,EAA8BpB,MAAM,CAACoB,QAArC,CAxBlC,CAFJ,CAvFR,cAyHI,2BAAK,SAAS,CAAC,YAAf,eACI,0CADJ,cAEI,oBAAC,MAAD,EACI,UAAU,KADd,CAEI,KAAK,CAAE,CAAEqJ,KAAK,CAAE,MAAT,CAFX,CAGI,WAAW,CAAC,gBAHhB,CAII,gBAAgB,CAAC,UAJrB,CAKI,QAAQ,CAAE,kBAACzF,KAAD,QAAWvE,CAAAA,QAAQ,CAACuE,KAAD,CAAnB,EALd,CAMI,KAAK,CAAExE,KANX,CAOI,YAAY,CAAE,sBAACoK,KAAD,CAAQC,MAAR,QACVA,CAAAA,MAAM,CAAC/E,QAAP,CAAgBgF,WAAhB,GAA8BC,OAA9B,CAAsCH,KAAK,CAACE,WAAN,EAAtC,GAA8D,CADpD,EAPlB,EAYQzL,MAAM,CAAC4G,MAAP,CAAgB,CAAhB,EAAqB5G,MAAM,CAAC6G,GAAP,CAAW,SAACrB,CAAD,CAAI4C,KAAJ,CAAc,CAC1C,mBACI,oBAAC,MAAD,EAAQ,GAAG,CAAEA,KAAb,CAAoB,KAAK,CAAE5C,CAAC,CAACS,GAA7B,EAAmCT,CAAC,CAACvE,IAArC,CADJ,CAIH,CALoB,CAZ7B,CAFJ,KAzHJ,cAmJI,2BAAK,SAAS,CAAC,YAAf,eACI,sDAAY,4BAAM,SAAS,CAAC,UAAhB,MAAZ,CADJ,cAEI,2BAAK,SAAS,CAAC,WAAf,eACI,oBAAC,KAAD,EAAO,SAAS,CAAEN,MAAM,EAAIA,MAAM,CAACM,IAAjB,EAAyB,OAA3C,CAAoD,KAAK,CAAEI,IAA3D,CAAiE,QAAQ,CAAE,kBAACoG,CAAD,QAAOnG,CAAAA,OAAO,CAACmG,CAAC,CAAC0D,MAAF,CAASxF,KAAV,CAAd,EAA3E,CAA2G,WAAW,CAAC,uBAAvH,EADJ,CAEKhF,MAAM,EAAIA,MAAM,CAACU,IAAjB,eAAyB,4BAAM,SAAS,CAAC,YAAhB,EAA8BV,MAAM,CAACU,IAArC,CAF9B,CAFJ,CAnJJ,cA2JI,2BAAK,SAAS,CAAC,YAAf,eACI,yCADJ,cAEI,2BAAK,SAAS,CAAC,YAAf,EAEQE,IAFR,SAEQA,IAFR,iBAEQA,IAAI,CAAEsF,GAAN,CAAU,SAACiB,KAAD,CAAQM,KAAR,CAAkB,CACxB,mBACI,4BAAM,SAAS,CAAC,UAAhB,CAA2B,GAAG,CAAEA,KAAhC,EAAwCN,KAAxC,kBAA+C,4BAAM,OAAO,CAAE,yBAAMD,CAAAA,eAAe,CAACC,KAAD,CAArB,EAAf,CAA6C,SAAS,CAAC,QAAvD,MAA/C,CADJ,CAGH,CAJD,CAFR,cAQI,oBAAC,KAAD,EAAO,QAAQ,CAAE,kBAACL,CAAD,QAAO/F,CAAAA,WAAW,CAAC+F,CAAC,CAAC0D,MAAF,CAASxF,KAAV,CAAlB,EAAjB,CAAqD,UAAU,CAAE6B,iBAAjE,CAAoF,IAAI,CAAC,MAAzF,CAAgG,KAAK,CAAE/F,QAAvG,CAAiH,WAAW,CAAC,gCAA7H,EARJ,CAFJ,CA3JJ,CADJ,CADJ,cA8KI,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAEkK,SAAS,CAAE,MAAb,CAAb,CAAoC,KAAK,CAAC,gBAA1C,eACI,2BAAK,SAAS,CAAC,qBAAf,eACI,2BAAK,SAAS,CAAC,YAAf,eACI,iEAAuB,4BAAM,SAAS,CAAC,UAAhB,MAAvB,CADJ,cAEI,2BAAK,KAAK,CAAE,CAAEP,KAAK,CAAE,MAAT,CAAZ,eACI,oBAAC,MAAD,EACI,SAAS,CAAC,UADd,CAEI,OAAO,CAAE,kBAAM,CACX1K,WAAW,CAAC,WAAD,CAAX,CACAF,UAAU,CAAC,IAAD,CAAV,CACH,CALL,CAMI,IAAI,CAAC,SANT,CAOI,KAAK,CAAC,OAPV,CAQI,IAAI,cAAE,oBAAC,cAAD,MARV,CASI,IAAI,CAAE,MATV,qBADJ,cAaI,+BAEQ+B,SAAS,eAAI,2BAAK,SAAS,CAAC,iBAAf,eAET,2BAAK,GAAG,CAAEA,SAAV,EAFS,CAFrB,CAbJ,CAuBK5B,MAAM,EAAIA,MAAM,CAAC4B,SAAjB,eAA8B,4BAAM,SAAS,CAAC,YAAhB,EAA8B5B,MAAM,CAAC4B,SAArC,CAvBnC,CAFJ,CADJ,cAgCI,2BAAK,SAAS,CAAC,YAAf,eACI,mDADJ,cAEI,2BAAK,KAAK,CAAE,CAAE6I,KAAK,CAAE,MAAT,CAAZ,eACI,oBAAC,MAAD,EACI,SAAS,CAAC,UADd,CAEI,OAAO,CAAE,kBAAM,CACX1K,WAAW,CAAC,SAAD,CAAX,CACAF,UAAU,CAAC,IAAD,CAAV,CACH,CALL,CAMI,IAAI,CAAC,SANT,CAOI,KAAK,CAAC,OAPV,CAQI,IAAI,cAAE,oBAAC,cAAD,MARV,CASI,IAAI,CAAE,MATV,kBADJ,cAaI,2BAAK,KAAK,CAAE,CAAED,OAAO,CAAE,MAAX,CAAZ,EAEQkC,OAAO,CAACoE,GAAR,CAAY,SAAC+E,CAAD,CAAIxD,KAAJ,CAAc,CACtB,mBACI,2BAAK,GAAG,CAAEA,KAAV,CAAiB,SAAS,CAAC,iBAA3B,eACI,4BAAM,OAAO,CAAE,kBAAM,CACjB,GAAIyD,CAAAA,KAAK,oBAAOpJ,OAAP,CAAT,CACAoJ,KAAK,CAACtD,MAAN,CAAaH,KAAb,CAAoB,CAApB,EACA1F,UAAU,CAACmJ,KAAD,CAAV,CACH,CAJD,MADJ,cAMI,2BAAK,GAAG,CAAED,CAAV,EANJ,CADJ,CAUH,CAXD,CAFR,CAbJ,CAFJ,CAhCJ,CADJ,CA9KJ,cAwPI,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAED,SAAS,CAAE,MAAb,CAAb,CAAoC,KAAK,CAAC,mBAA1C,eACI,2BAAK,SAAS,CAAC,qBAAf,eACI,2BAAK,SAAS,CAAC,YAAf,eACI,iDADJ,cAEI,oBAAC,MAAD,EACI,KAAK,CAAE,CAAEP,KAAK,CAAE,MAAT,CADX,CAEI,QAAQ,CAAE,kBAACzF,KAAD,QAAWuB,CAAAA,uBAAuB,CAACvB,KAAD,CAAlC,EAFd,CAGI,KAAK,CAAEhE,WAHX,eAKI,oBAAC,MAAD,EAAQ,KAAK,CAAC,QAAd,mBALJ,cAMI,oBAAC,MAAD,EAAQ,KAAK,CAAC,SAAd,oBANJ,CAFJ,CADJ,CAeQA,WAAW,GAAK,SAAhB,eAA6B,2BAAK,SAAS,CAAC,YAAf,eACzB,+CADyB,cAEzB,oBAAC,MAAD,EACI,IAAI,CAAC,UADT,CAEI,IAAI,CAAC,SAFT,CAGI,WAAW,CAAC,eAHhB,CAII,QAAQ,CAAE,kBAACgE,KAAD,QAAWsC,CAAAA,gBAAgB,CAACtC,KAAD,CAA3B,EAJd,CAKI,KAAK,CAAE,CAAEyF,KAAK,CAAE,MAAT,CALX,CAMI,UAAU,CAAE,oBAACzF,KAAD,QAAWuC,CAAAA,gBAAgB,CAACvC,KAAD,CAA3B,EANhB,CAOI,KAAK,CAAE9C,YAAF,SAAEA,YAAF,iBAAEA,YAAY,CAAEgE,GAAd,CAAkB,SAAAiF,EAAE,QAAIA,CAAAA,EAAJ,SAAIA,EAAJ,iBAAIA,EAAE,CAAE7F,GAAR,EAApB,CAPX,EAUQtD,UAAU,CAACkE,GAAX,CAAe,SAACC,IAAD,CAAOsB,KAAP,CAAiB,CAC5B,mBACI,oBAAC,MAAD,EAAQ,KAAK,CAAEtB,IAAI,CAACb,GAApB,CAAyB,GAAG,CAAEmC,KAA9B,EAAsCtB,IAAI,CAAC7F,IAA3C,CADJ,CAGH,CAJD,CAVR,CAFyB,CAfrC,CAuCQ4B,YAAY,CAAC+D,MAAb,CAAsB,CAAtB,EACA/D,YAAY,CAACgE,GAAb,CAAiB,SAACC,IAAD,CAAOsB,KAAP,CAAiB,2BAC9B,mBACI,2BAAK,GAAG,CAAEA,KAAV,CAAiB,SAAS,CAAC,YAA3B,eACI,iCAAQtB,IAAR,SAAQA,IAAR,iBAAQA,IAAI,CAAE7F,IAAd,kBAAoB,4BAAM,SAAS,CAAC,UAAhB,MAApB,CADJ,cAEI,oBAAC,MAAD,EACI,IAAI,CAAC,UADT,CAEI,IAAI,CAAC,SAFT,CAGI,WAAW,CAAC,eAHhB,CAII,QAAQ,CAAE,kBAAC0E,KAAD,QAAW6C,CAAAA,qBAAqB,CAAC7C,KAAD,CAAhC,EAJd,CAKI,UAAU,CAAE,oBAACA,KAAD,QAAWmD,CAAAA,qBAAqB,CAACnD,KAAD,CAAhC,EALhB,CAMI,KAAK,CAAE,CAAEyF,KAAK,CAAE,MAAT,CANX,CAOI,KAAK,CAAErI,eAAe,GAAIA,eAAJ,SAAIA,eAAJ,wCAAIA,eAAe,CAAEoD,MAAjB,CAAwB,SAAAQ,QAAQ,QAAI,CAAAA,QAAQ,OAAR,EAAAA,QAAQ,SAAR,QAAAA,QAAQ,CAAE1F,IAAV,KAAmB6F,IAAnB,SAAmBA,IAAnB,iBAAmBA,IAAI,CAAE7F,IAAzB,CAAJ,EAAhC,EAAmE,CAAnE,CAAJ,gDAAI,sBAAuE2H,MAAvE,CAA8E/B,GAA9E,CAAkF,SAAA6B,GAAG,QAAIA,CAAAA,GAAG,CAAG,KAAN,CAAc5B,IAAI,CAAC7F,IAAvB,EAArF,CAAJ,CAP1B,EAWQ6F,IAAI,CAAC8B,MAAL,CAAY/B,GAAZ,CAAgB,SAAC6B,GAAD,CAAMN,KAAN,CAAgB,CAC5B,mBACI,oBAAC,MAAD,EAAQ,KAAK,CAAEM,GAAG,CAAG,KAAN,CAAc5B,IAAI,CAAC7F,IAAlC,CAAwC,GAAG,CAAEmH,KAA7C,EAAqDM,GAArD,CADJ,CAGH,CAJD,CAXR,CAFJ,CADJ,CAuBH,CAxBD,CAxCR,CADJ,CAxPJ,cAgUI,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAEiD,SAAS,CAAE,MAAb,CAAb,CAAoC,KAAK,CAAC,uBAA1C,eACI,2BAAK,SAAS,CAAC,qBAAf,eACI,2BAAK,SAAS,CAAC,YAAf,eACI,4DAAkB,4BAAM,SAAS,CAAC,UAAhB,MAAlB,CADJ,cAEI,2BAAK,SAAS,CAAC,WAAf,eACI,oBAAC,KAAD,EAAO,QAAQ,CAAEhK,WAAW,GAAK,SAAjC,CAA4C,SAAS,CAAEhB,MAAM,EAAIA,MAAM,CAACsC,KAAjB,EAA0B,OAAjF,CAA0F,KAAK,CAAEA,KAAjG,CAAwG,QAAQ,CAAE,kBAACwE,CAAD,QAAOvE,CAAAA,QAAQ,CAACuE,CAAC,CAAC0D,MAAF,CAASxF,KAAV,CAAf,EAAlH,CAAmJ,WAAW,CAAC,eAA/J,CAA+K,IAAI,CAAC,QAApL,EADJ,CAEKhF,MAAM,EAAIA,MAAM,CAACsC,KAAjB,eAA0B,4BAAM,SAAS,CAAC,YAAhB,EAA8BtC,MAAM,CAACsC,KAArC,CAF/B,CAFJ,CADJ,cASI,2BAAK,SAAS,CAAC,YAAf,eACI,6CADJ,cAEI,2BAAK,KAAK,CAAE,CAAE1C,OAAO,CAAE,MAAX,CAAmBwL,cAAc,CAAE,eAAnC,CAAoDX,KAAK,CAAE,MAA3D,CAAZ,eACI,oBAAC,KAAD,EAAO,QAAQ,CAAEzJ,WAAW,GAAK,SAAjC,CAA4C,KAAK,CAAEwB,QAAnD,CAA6D,QAAQ,CAAE,kBAACsE,CAAD,QAAOrE,CAAAA,WAAW,CAACqE,CAAC,CAAC0D,MAAF,CAASxF,KAAV,CAAlB,EAAvE,CAA2G,KAAK,CAAE,CAAEyF,KAAK,CAAE,KAAT,CAAlH,CAAoI,WAAW,CAAC,gBAAhJ,CAAiK,IAAI,CAAC,QAAtK,EADJ,cAEI,oBAAC,MAAD,EACI,KAAK,CAAE,CAAEA,KAAK,CAAE,KAAT,CADX,CAEI,WAAW,CAAC,sBAFhB,CAGI,gBAAgB,CAAC,UAHrB,CAII,QAAQ,CAAE,kBAACzF,KAAD,QAAWrC,CAAAA,eAAe,CAACqC,KAAD,CAA1B,EAJd,CAKI,KAAK,CAAEtC,YALX,CAMI,QAAQ,CAAE1B,WAAW,GAAK,SAN9B,eASI,oBAAC,MAAD,EAAQ,KAAK,CAAC,MAAd,SATJ,cAUI,oBAAC,MAAD,EAAQ,KAAK,CAAC,SAAd,YAVJ,CAFJ,CAFJ,CATJ,cA4BI,2BAAK,SAAS,CAAC,YAAf,eACI,wCADJ,cAEI,2BAAK,KAAK,CAAE,CAAEpB,OAAO,CAAE,MAAX,CAAmBwL,cAAc,CAAE,eAAnC,CAAoDX,KAAK,CAAE,MAA3D,CAAZ,eACI,oBAAC,KAAD,EAAO,QAAQ,CAAE,kBAAC3D,CAAD,QAAOjE,CAAAA,MAAM,CAACiE,CAAC,CAAC0D,MAAF,CAASxF,KAAV,CAAb,EAAjB,CAAgD,KAAK,CAAEpC,GAAvD,CAA4D,KAAK,CAAE,CAAE6H,KAAK,CAAE,KAAT,CAAnE,CAAqF,WAAW,CAAC,WAAjG,CAA6G,IAAI,CAAC,QAAlH,EADJ,cAEI,oBAAC,MAAD,EACI,KAAK,CAAE,CAAEA,KAAK,CAAE,KAAT,CADX,CAEI,WAAW,CAAC,mBAFhB,CAGI,gBAAgB,CAAC,UAHrB,CAII,QAAQ,CAAE,kBAACzF,KAAD,QAAWjC,CAAAA,UAAU,CAACiC,KAAD,CAArB,EAJd,CAKI,KAAK,CAAElC,OALX,eAQI,oBAAC,MAAD,EAAQ,KAAK,CAAC,MAAd,SARJ,cASI,oBAAC,MAAD,EAAQ,KAAK,CAAC,SAAd,YATJ,CAFJ,CAFJ,CA5BJ,cA8CI,2BAAK,SAAS,CAAC,YAAf,eACI,wCADJ,cAEI,2BAAK,SAAS,CAAC,WAAf,eACI,oBAAC,KAAD,EAAO,SAAS,CAAE9C,MAAM,EAAIA,MAAM,CAACkD,GAAjB,EAAwB,OAA1C,CAAmD,KAAK,CAAEA,GAA1D,CAA+D,QAAQ,CAAE,kBAAC4D,CAAD,QAAO3D,CAAAA,MAAM,CAAC2D,CAAC,CAAC0D,MAAF,CAASxF,KAAV,CAAb,EAAzE,CAAwG,WAAW,CAAC,aAApH,CAAkI,IAAI,CAAC,MAAvI,EADJ,CAEKhF,MAAM,EAAIA,MAAM,CAACkD,GAAjB,eAAwB,4BAAM,SAAS,CAAC,YAAhB,EAA8BlD,MAAM,CAACkD,GAArC,CAF7B,CAFJ,CA9CJ,cAsDI,2BAAK,SAAS,CAAC,YAAf,eACI,uDAAa,4BAAM,SAAS,CAAC,UAAhB,MAAb,CADJ,cAEI,oBAAC,KAAD,EAAO,QAAQ,CAAElC,WAAW,GAAK,SAAjC,CAA4C,KAAK,CAAEgC,KAAnD,CAA0D,QAAQ,CAAE,kBAAC8D,CAAD,QAAO7D,CAAAA,QAAQ,CAAC6D,CAAC,CAAC0D,MAAF,CAASxF,KAAV,CAAf,EAApE,CAAqG,WAAW,CAAC,eAAjH,CAAiI,IAAI,CAAC,QAAtI,EAFJ,CAtDJ,CA2DQ5B,UAAU,EAAIA,UAAU,CAAC6C,MAAX,CAAoB,CAAlC,eACA,6BAAO,SAAS,CAAC,iBAAjB,eACI,8CACI,2CACI,wCADJ,cAEI,8CAFJ,cAGI,yCAHJ,cAII,8CAJJ,cAKI,sCALJ,cAMI,4CANJ,cAOI,sCAPJ,CADJ,CAWQ7C,UAAU,EAAIA,UAAU,CAAC8C,GAAX,CAAe,SAACuD,OAAD,CAAUhC,KAAV,CAAoB,CAC7C,mBACI,0BAAI,GAAG,CAAEA,KAAT,eACI,2CACI,wCAEQoB,MAAM,CAACC,IAAP,CAAYW,OAAZ,EAAqBvD,GAArB,CAAyB,SAACmF,OAAD,CAAUnC,CAAV,QACrBmC,CAAAA,OAAO,GAAK,SAAZ,EAAyBA,OAAO,GAAK,OAArC,EAAgDA,OAAO,GAAK,OAA5D,EAAuEA,OAAO,GAAK,OAAnF,EAA8FA,OAAO,GAAK,UAA1G,EAAwHA,OAAO,GAAK,cAApI,EAAsJA,OAAO,GAAK,WAAlK,CAAgL,EAAhL,cACI,4BAAM,GAAG,CAAEnC,CAAX,eAEI,gCAAQmC,OAAR,MAFJ,cAGI,8BAAQ,KAAK,CAAE,CAAEC,MAAM,CAAE,OAAV,CAAmBC,KAAK,CAAE,SAA1B,CAAf,EAAuD9B,OAAO,CAAC4B,OAAD,CAA9D,CAHJ,KAFiB,EAAzB,CAFR,CADJ,CADJ,cAiBI,2CACI,oBAAC,KAAD,EAAO,KAAK,CAAE5B,OAAO,CAACnH,KAAtB,CAA6B,QAAQ,CAAE,kBAACwE,CAAD,QAAOsC,CAAAA,kBAAkB,CAACK,OAAO,CAACJ,OAAT,CAAkB,OAAlB,CAA2BvC,CAAC,CAAC0D,MAAF,CAASxF,KAApC,CAA2CyE,OAAO,CAACR,SAAnD,CAAzB,EAAvC,CAA+H,WAAW,CAAC,eAA3I,CAA2J,IAAI,CAAC,QAAhK,EADJ,CAjBJ,cAoBI,2CACI,oBAAC,KAAD,EAAO,KAAK,CAAEQ,OAAO,CAACjH,QAAtB,CAAgC,QAAQ,CAAE,kBAACsE,CAAD,QAAOsC,CAAAA,kBAAkB,CAACK,OAAO,CAACJ,OAAT,CAAkB,UAAlB,CAA8BvC,CAAC,CAAC0D,MAAF,CAASxF,KAAvC,CAA8CyE,OAAO,CAACR,SAAtD,CAAzB,EAA1C,CAAqI,WAAW,CAAC,UAAjJ,CAA4J,IAAI,CAAC,QAAjK,EADJ,CApBJ,cAuBI,2CACI,oBAAC,MAAD,EACI,KAAK,CAAE,CAAEwB,KAAK,CAAE,KAAT,CADX,CAEI,WAAW,CAAC,sBAFhB,CAGI,gBAAgB,CAAC,UAHrB,CAII,QAAQ,CAAE,kBAACzF,KAAD,QAAWoE,CAAAA,kBAAkB,CAACK,OAAO,CAACJ,OAAT,CAAkB,cAAlB,CAAkCrE,KAAlC,CAAyCyE,OAAO,CAACR,SAAjD,CAA7B,EAJd,CAKI,KAAK,CAAEQ,OAAO,CAAC/G,YALnB,eAQI,oBAAC,MAAD,EAAQ,KAAK,CAAC,MAAd,SARJ,cASI,oBAAC,MAAD,EAAQ,KAAK,CAAC,SAAd,YATJ,CADJ,CAvBJ,cAoCI,2CACI,oBAAC,KAAD,EAAO,MAAM,CAAE,gBAACoE,CAAD,CAAO,CAAEA,CAAC,CAAC0D,MAAF,CAASxF,KAAT,GAAmB,EAAnB,EAAyBoE,kBAAkB,CAACK,OAAO,CAACJ,OAAT,CAAkB,OAAlB,CAA2B,CAA3B,CAA3C,CAA0E,CAAlG,CAAoG,KAAK,CAAEI,OAAO,CAACzG,KAAnH,CAA0H,QAAQ,CAAE,kBAAC8D,CAAD,QAAOsC,CAAAA,kBAAkB,CAACK,OAAO,CAACJ,OAAT,CAAkB,OAAlB,CAA2BvC,CAAC,CAAC0D,MAAF,CAASxF,KAApC,CAAzB,EAApI,CAAyM,WAAW,CAAC,eAArN,CAAqO,IAAI,CAAC,QAA1O,EADJ,CApCJ,cAuCI,2CACI,oBAAC,MAAD,EAAQ,KAAK,CAAE,CAAEyF,KAAK,CAAE,MAAT,CAAf,CAAkC,OAAO,CAAEhB,OAAO,CAACR,SAAnD,CAA8D,QAAQ,CAAE,kBAACuC,CAAD,QAAOhC,CAAAA,oBAAoB,CAACC,OAAD,CAAU+B,CAAV,CAA3B,EAAxE,EADJ,CAvCJ,cA0CI,2CAGI,oBAAC,MAAD,EACI,SAAS,CAAC,UADd,CAEI,OAAO,CAAE,kBAAM,CACXzL,WAAW,CAAC,aAAe0J,OAAO,CAACJ,OAAxB,CAAX,CACAxJ,UAAU,CAAC,IAAD,CAAV,CACH,CALL,CAMI,IAAI,CAAC,SANT,CAOI,KAAK,CAAC,OAPV,CAQI,IAAI,cAAE,oBAAC,cAAD,MARV,CASI,IAAI,CAAE,MATV,iBAHJ,CAgBQ4J,OAAO,CAACpE,KAAR,eAAiB,2BAAK,KAAK,CAAE,CAAEzF,OAAO,CAAE,MAAX,CAAZ,eACb,2BAAK,GAAG,CAAE6H,KAAV,CAAiB,SAAS,CAAC,iBAA3B,eACI,4BAAM,OAAO,CAAE,yBAAM2B,CAAAA,kBAAkB,CAACK,OAAO,CAACJ,OAAT,CAAkB,OAAlB,CAA2B,EAA3B,CAAxB,EAAf,MADJ,cAEI,2BAAK,GAAG,CAAEI,OAAO,CAACpE,KAAlB,EAFJ,CADa,CAhBzB,CA1CJ,CADJ,CA0EH,CA3Ea,CAXtB,CADJ,CA5DR,CADJ,CAhUJ,cAgeI,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAE2F,SAAS,CAAE,MAAb,CAAb,CAAoC,KAAK,CAAC,qBAA1C,eACI,2BAAK,SAAS,CAAC,qBAAf,eACI,2BAAK,SAAS,CAAC,YAAf,eACI,gDADJ,cAEI,oBAAC,UAAD,EACI,KAAK,CAAE1H,WADX,CAEI,QAAQ,CAAE,kBAAC0B,KAAD,QAAWzB,CAAAA,cAAc,CAACyB,KAAD,CAAzB,EAFd,CAGI,KAAK,CAAE,CAAEyF,KAAK,CAAE,MAAT,CAAiBgB,YAAY,CAAE,MAA/B,CAHX,EAFJ,CADJ,CADJ,CAheJ,cAifI,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAET,SAAS,CAAE,MAAb,CAAb,CAAoC,KAAK,CAAC,uBAA1C,eACI,2BAAK,SAAS,CAAC,qBAAf,eACI,2BAAK,SAAS,CAAC,YAAf,eACI,+DAAqB,4BAAM,SAAS,CAAC,UAAhB,MAArB,CADJ,cAEI,oBAAC,MAAD,EAAQ,KAAK,CAAE,CAAEP,KAAK,CAAE,MAAT,CAAf,CAAkC,OAAO,CAAEjH,YAA3C,CAAyD,QAAQ,CAAE,kBAACgI,CAAD,QAAO/H,CAAAA,eAAe,CAAC+H,CAAD,CAAtB,EAAnE,EAFJ,CADJ,cAKI,2BAAK,SAAS,CAAC,YAAf,eACI,mDADJ,cAEI,oBAAC,KAAD,EAAO,KAAK,CAAE9H,IAAd,CAAoB,QAAQ,CAAE,kBAACoD,CAAD,QAAOnD,CAAAA,OAAO,CAACD,IAAD,CAAd,EAA9B,CAAoD,QAAQ,CAAEF,YAA9D,CAA4E,WAAW,CAAC,eAAxF,CAAwG,IAAI,CAAC,QAA7G,CAAsH,KAAK,CAAE,CAAEiH,KAAK,CAAE,KAAT,CAA7H,EAFJ,CALJ,CADJ,CAjfJ,cAkgBI,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAEO,SAAS,CAAE,MAAb,CAAb,CAAoC,KAAK,CAAC,eAA1C,eACI,2BAAK,SAAS,CAAC,qBAAf,eACI,2BAAK,SAAS,CAAC,YAAf,eACI,+CADJ,cAEI,oBAAC,KAAD,EAAO,KAAK,CAAEpH,SAAd,CAAyB,QAAQ,CAAE,kBAACkD,CAAD,QAAOjD,CAAAA,YAAY,CAACiD,CAAC,CAAC0D,MAAF,CAASxF,KAAV,CAAnB,EAAnC,CAAwE,IAAI,CAAC,MAA7E,CAAoF,WAAW,CAAC,oBAAhG,EAFJ,CADJ,cAKI,2BAAK,SAAS,CAAC,YAAf,eACI,qDADJ,cAEI,oBAAC,KAAD,CAAO,QAAP,EAAgB,KAAK,CAAElB,eAAvB,CAAwC,QAAQ,CAAE,kBAACgD,CAAD,QAAO/C,CAAAA,kBAAkB,CAAC+C,CAAC,CAAC0D,MAAF,CAASxF,KAAV,CAAzB,EAAlD,CAA6F,IAAI,CAAC,MAAlG,CAAyG,WAAW,CAAC,0BAArH,EAFJ,CALJ,cASI,2BAAK,SAAS,CAAC,YAAf,eACI,+CADJ,cAEI,2BAAK,KAAK,CAAE,CAAEyF,KAAK,CAAE,MAAT,CAAZ,eACI,oBAAC,MAAD,EACI,SAAS,CAAC,UADd,CAEI,OAAO,CAAE,kBAAM,CACX1K,WAAW,CAAC,MAAD,CAAX,CACAF,UAAU,CAAC,IAAD,CAAV,CACH,CALL,CAMI,IAAI,CAAC,SANT,CAOI,KAAK,CAAC,OAPV,CAQI,IAAI,cAAE,oBAAC,cAAD,MARV,CASI,IAAI,CAAE,MATV,sBADJ,cAaI,+BAEQmE,SAAS,eAAI,2BAAK,SAAS,CAAC,iBAAf,eACT,4BAAM,OAAO,CAAE,yBAAMC,CAAAA,YAAY,CAAC,EAAD,CAAlB,EAAf,MADS,cAET,2BAAK,GAAG,CAAED,SAAV,EAFS,CAFrB,CAbJ,CAFJ,CATJ,CADJ,CAlgBJ,cA6iBI,oBAAC,MAAD,EAAQ,OAAO,CAAE,yBAAM4F,CAAAA,WAAW,EAAjB,EAAjB,CAAsC,IAAI,CAAC,OAA3C,CAAmD,KAAK,CAAE,CAAE8B,KAAK,CAAE,OAAT,CAAkBJ,MAAM,CAAE,QAA1B,CAA1D,CAAgG,IAAI,CAAC,SAArG,iBA7iBJ,CADgB,EAApB,CAkjBA,mBACI,2BAAK,SAAS,CAAC,gBAAf,eACI,oBAAC,YAAD,EAAc,OAAO,CAAE1L,OAAvB,CAAgC,MAAM,CAAE,wBAAMC,CAAAA,UAAU,CAAC,KAAD,CAAhB,EAAxC,CAAiE,cAAc,CAAE,wBAACuK,IAAD,QAAUD,CAAAA,iBAAiB,CAACC,IAAD,CAA3B,EAAjF,EADJ,CAGQ9K,iBAAiB,EAAIC,cAArB,EAAuCC,OAAvC,CAAiD,SAAjD,CAA6D+K,WAAW,EAHhF,CADJ,CAQH,CAED,cAAexL,CAAAA,WAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Router, useParams,useHistory } from 'react-router-dom'\nimport { Card, Form, Input, TreeSelect, Select, Switch, Button, Alert } from 'antd';\nimport { UploadOutlined } from '@ant-design/icons'\nimport \"./product.scss\"\nimport 'react-quill/dist/quill.snow.css';\nimport ReactQuill from 'react-quill'\nimport axios from 'axios'\nimport { useSelector } from 'react-redux'\nimport MediaLibrary from '../../components/MediaLibrary';\n \nconst { TreeNode } = TreeSelect;\nconst { Option } = Select;\n\n\n\n\nfunction EditProduct() {\n    const params = useParams()\n    const history = useHistory()\n    const { categories, brands, isCategoryLoading, isBrandLoading } = useSelector(state => state.data)\n    const [loading, setLoading] = useState(true)\n\n    const [isVarValueChanged, setIsVarValueChanged] = useState(false)\n\n\n    const [display, setDisplay] = useState(false)\n    const [imageFor, setImageFor] = useState(\"thumbnail\")\n\n    const [errors, setErrors] = useState([])\n\n    const [editId, setEditId] = useState('')\n    const [product, setProduct] = useState(null)\n\n    //-----product information---------\n    const [name, setName] = useState('')\n    // const [brands, setBrands] = useState([])\n    const [brand, setBrand] = useState('')\n    const [unit, setUnit] = useState('')\n    const [tags, setTags] = useState([])\n    const [tagInput, setTagInput] = useState('')\n\n    const [productType, setProductType] = useState('simple')\n\n    //categories\n    // const [categories, setCategories] = useState([])\n    const [subCategories, setSubCategories] = useState([])\n    const [category, setCategory] = useState('')\n    const [subCategory, setSubCategory] = useState('')\n    const [subSubCategory, setSubSubCategory] = useState('')\n    const [subSubCategories, setSubSubCategories] = useState([])\n    //console.log(category,subCategory,subSubCategory);\n\n    //images\n    const [thumbnail, setThumbnail] = useState('')\n    const [gallery, setGallery] = useState([])\n\n    //attributes\n    const [attributes, setAttributes] = useState([])\n    const [selectedAttr, setSelectedAttr] = useState([])\n    const [selectedAttrVal, setSelectedAttrVal] = useState([])\n\n    //price\n    const [price, setPrice] = useState()\n    const [discount, setDiscount] = useState(0)\n    const [discountType, setDiscountType] = useState('flat')\n    const [tax, setTax] = useState(0)\n    const [taxType, setTaxType] = useState('flat')\n\n    //stock\n    const [stock, setStock] = useState('50')\n    const [sku, setSku] = useState('')\n\n\n    //variations\n\n    const [variations, setVariations] = useState([])\n\n    //description\n    const [description, setDescription] = useState('')\n\n    //shipping\n    const [freeShipping, setFreeShipping] = useState(true)\n    const [cost, setCost] = useState(0)\n\n    //meta\n    const [metaTitle, setMetaTitle] = useState('')\n    const [metaDescription, setMetaDescription] = useState('')\n    const [metaImage, setMetaImage] = useState('')\n\n\n\n\n    //fetch data\n\n\n    const fetchAttributes = async () => {\n        axios.get('attribute/get')\n            .then(res => {\n                setAttributes(res.data.attributes)\n\n            })\n            .catch(err => {\n                console.log(err);\n            })\n    }\n\n\n    useEffect(() => {\n        if (variations && productType !=='simple'){\n            var sum = variations.reduce(function (a, b) {\n                return parseInt(a) + parseInt(b.stock);\n            }, 0);\n            setStock(sum);\n        }\n\n        \n    }, [variations])\n\n    const setProductValue = (product) => {\n        setName(product.name)\n        setUnit(product.unit)\n        setTags(product.tags)\n        setThumbnail(product.thumbnail)\n        setGallery(product.gallery)\n        setPrice(product.price)\n        setDiscount(product.discount.value)\n        setDiscountType(product.discount.discountType)\n        setTax(product.tax.value)\n        setTaxType(product.tax.taxType)\n        setSku(product.sku)\n        setDescription(product.description)\n        setFreeShipping(product.shipping.isFree)\n        setCost(product.shipping.cost)\n        setMetaTitle(product.meta.title)\n        setMetaDescription(product.meta.description)\n        setMetaImage(product.meta.image)\n        setBrand(product.brand?._id || '')\n        setProductType(product.productType)\n        setStock(product.stock)\n\n        let pcategory = product.categories.filter(cat => cat.level == 1)[0]?.category || null\n        let psubCategory = product.categories.filter(cat => cat.level == 2)[0]?.category || null\n        let psubSubCategory = product.categories.filter(cat => cat.level == 3)[0]?.category || null\n\n        setCategory(pcategory)\n        let filterdsub = categories.filter(cat => cat._id === pcategory)\n            setSubCategories(filterdsub[0]?.children)\n        if (psubCategory) {\n            \n\n\n            let filterdsubsub = filterdsub[0]?.children.filter(cat => cat._id === psubCategory)\n            setSubSubCategories(filterdsubsub[0]?.children)\n\n        }\n\n\n\n        psubCategory && setSubCategory(psubCategory)\n        psubSubCategory && setSubSubCategory(psubSubCategory)\n\n        let selected = []\n        if (attributes.length) {\n            product.attributes.map(attr => {\n                selected.push(attributes.filter(a => a.name === attr.name)[0])\n                //setSelectedAttr(prev=>[...prev, attributes.filter(a=>a.name === attr.name)[0]])\n\n            })\n        }\n\n\n        setSelectedAttr(selected)\n        setSelectedAttrVal(product.attributes)\n        setVariations(product.variations)\n        setLoading(false)\n    }\n\n\n\n\n    const fetchProduct = () => {\n        //console.log(params.productslug);\n        axios.get(`/product/details/${params.productslug}`)\n            .then(res => {\n                setEditId(res.data.product._id);\n                setProduct(res.data.product);\n            })\n            .catch(err=>{\n                history.push('/product/productlist')\n            })\n    }\n\n    useEffect(() => {\n        if (product && categories.length > 0) {\n            setProductValue(product)\n        }\n    }, [product, categories, attributes])\n\n    useEffect(() => {\n        if (params) {\n            fetchProduct()\n        }\n    }, [params])\n\n    useEffect(() => {\n        (async function () {\n            setLoading(true)\n            await fetchAttributes()\n\n        })();\n\n\n    }, [])\n\n    //product type\n\n    const handleChangeProductType = (value) => {\n        if (value === 'simple') {\n            setSelectedAttr([])\n            setSelectedAttrVal([])\n            setVariations([])\n        }\n        setProductType(value)\n    }\n\n\n    const handleChangeCategory=(value)=>{\n        setCategory(value)\n        let filterd = categories.filter(cat => cat._id === value)\n        setSubCategories(filterd[0]?.children)\n        setSubSubCategories([])\n        setSubCategory('')\n        setSubSubCategory('')\n    }\n\n    const handleChangeSubCategory=(value)=>{\n        setSubCategory(value)\n        let filterdMain = categories.filter(cat => cat._id === category)\n        let filterdSub = filterdMain[0]?.children.filter(cat => cat._id === value)[0]\n        if(filterdSub?.children){\n            setSubSubCategories(filterdSub?.children)\n        }\n        setSubSubCategory('')\n    }\n\n\n\n\n\n    //tags action\n    const handleKeyPressTag = (e) => {\n\n        if (e.charCode === 13 || e.charCode === 44) {\n            setTags(prev => [...prev, tagInput.replace(',', \"\")])\n            //console.log(tagInput);\n            setTagInput('')\n        }\n    }\n\n    const handleRemoveTag = (tname) => {\n        let filtered = tags.filter(t => t !== tname)\n        setTags(filtered)\n    }\n\n\n    //----------------attributes--------------------\n    const handleChangeAttr = (value) => {\n        setIsVarValueChanged(true)\n        let filtered = attributes.filter(a => a._id === value)[0]\n        setSelectedAttr(prev => [...prev, filtered])\n\n    }\n    const handleRemoveAttr = (value) => {\n        setIsVarValueChanged(true)\n        let filtered = selectedAttr.filter(a => a._id !== value)\n        let selected = selectedAttr.filter(a => a._id === value)[0]\n        setSelectedAttr(filtered)\n\n\n        let attrval = [...selectedAttrVal]\n        let index = attrval.findIndex(v => v.name === selected.name)\n        attrval.splice(index, 1)\n        setSelectedAttrVal(attrval)\n\n    }\n    //console.log(selectedAttr);\n\n    //----------------variation-------------------------\n    const handleChangeAttrValue = (value) => {\n\n        let newArry = [...selectedAttrVal]\n        let index = newArry.findIndex(val => val.name === value.split(\"@@@\")[1])\n\n\n        if (index === -1) {\n            setSelectedAttrVal([...selectedAttrVal, { name: value.split(\"@@@\")[1], values: [value.split(\"@@@\")[0]] }])\n            setIsVarValueChanged(true)\n        } else {\n            let newVal = [...newArry[index].values, value.split(\"@@@\")[0]]\n            newArry[index] = { name: value.split(\"@@@\")[1], values: newVal }\n            setSelectedAttrVal(newArry)\n            setIsVarValueChanged(true)\n        }\n\n\n\n    }\n\n    const handleRemoveAttrValue = (value) => {\n\n        let newArry = [...selectedAttrVal]\n        let index = newArry.findIndex(val => val.name === value.split(\"@@@\")[1])\n\n        if (index === -1) return\n        let selected = newArry[index]\n\n        let newVal = selected.values.filter(v => v !== value.split(\"@@@\")[0])\n\n\n        if (newVal.length === 0) {\n\n            newArry.splice(index, 1)\n            setSelectedAttrVal(newArry)\n            setIsVarValueChanged(true)\n        } else {\n            newArry[index] = { name: value.split(\"@@@\")[1], values: newVal }\n            setSelectedAttrVal(newArry)\n            setIsVarValueChanged(true)\n        }\n\n\n    }\n\n\n\n\n\n    useEffect(() => {\n        if (!isVarValueChanged) return\n        if (selectedAttrVal.length < 1) {\n            setVariations([])\n            return\n        }\n\n        var allArraysObj = {}\n        selectedAttrVal.map(a => {\n            allArraysObj = { ...allArraysObj, [a.name]: a.values }\n        })\n\n\n        let getProducts = (arrays) => {\n            if (arrays.length === 0) {\n                return [[]];\n            }\n\n            let results = [];\n\n            getProducts(arrays.slice(1)).forEach((product) => {\n                arrays[0].forEach((value) => {\n                    results.push([value].concat(product));\n                });\n            });\n\n            return results;\n        };\n\n        let getAllCombinations = (attributes) => {\n\n            let attributeNames = Object.keys(attributes);\n\n            let attributeValues = attributeNames.map((name) => attributes[name]);\n\n            return getProducts(attributeValues).map((product, index) => {\n                let val = []\n                let obj = { stock: 0, image: \"\", price: 0, discount: 0, discountType: \"flat\", isDefault: false };\n                attributeNames.forEach((name, i) => {\n                    obj[name] = product[i];\n                    val.push(product[i]);\n\n\n                });\n                if (index === 0) {\n                    obj['isDefault'] = true\n\n                }\n                obj[\"varname\"] = (val.join(\"--\"));\n                return obj;\n            });\n        };\n        //console.log(getAllCombinations(allArraysObj));\n        setVariations(getAllCombinations(allArraysObj));\n    }, [selectedAttrVal, selectedAttr])\n\n\n    const handleVariantInput = (varname, type, value, isDefault) => {\n        if (isDefault) {\n            if (type === 'price') {\n                setPrice(value)\n            } else if (type === 'discount') {\n                setDiscount(value)\n            } else if (type === 'discountType') {\n                setDiscountType(value)\n            }\n        }\n        let filtered = variations.findIndex(v => v.varname === varname)\n        let arr = [...variations]\n        arr[filtered] = { ...arr[filtered], [type]: value }\n        setVariations(arr)\n    }\n\n    const handleVariandDefault = (variant, value) => {\n        if (value) {\n            setPrice(variant.price)\n            setDiscount(variant.discount)\n            setDiscountType(variant.discountType)\n            let arr = []\n            variations && variations.map((variation, i) => {\n                if (variation.varname === variant.varname) {\n                    arr.push({ ...variation, isDefault: true, image: thumbnail })\n                } else {\n                    arr.push({ ...variation, isDefault: false })\n                }\n            });\n\n            setVariations(arr)\n        } else {\n            alert('Select another')\n        }\n\n\n\n    }\n\n\n\n\n\n\n\n    const saveProduct = () => {\n        let data = {\n            name,\n            categories: [],\n            brand,\n            unit,\n            tags,\n            thumbnail,\n            gallery,\n            attributes: selectedAttrVal,\n            variations,\n            productType,\n            price,\n            discount: {\n                discountType,\n                value: discount\n            },\n            tax: {\n                taxType,\n                value: discount\n            },\n            sku,\n            stock,\n            description,\n            shipping: {\n                isFree: freeShipping,\n                cost\n            },\n            meta: {\n                title: metaTitle,\n                description: metaDescription,\n                image: metaImage\n            }\n        }\n\n        if (category) {\n            data.categories.push({ level: 1, category })\n        }\n        if (subCategory) {\n            data.categories.push({ level: 2, category: subCategory })\n        }\n        if (subSubCategory) {\n            data.categories.push({ level: 3, category: subSubCategory })\n        }\n\n        if (!category) {\n            setErrors({ category: \"Please select a category\" })\n        }\n\n        //console.log(data);\n        // return console.log(data.categories);\n        axios.patch(`/product/edit/${editId}`, data)\n            .then(res => {\n                alert(\"product updated successfully\");\n                setErrors([])\n            })\n            .catch(err => {\n                window.scrollTo({\n                    top: 100,\n\n                    behavior: 'smooth'\n                });\n                err && err.response && setErrors(err.response.data)\n            })\n    }\n\n\n    const handleImageselect = (item) => {\n        if (imageFor === 'thumbnail') {\n            setThumbnail(item.thumbnailUrl);\n        }\n        if (imageFor === 'gallery') {\n            setGallery(prev => [...prev, item.thumbnailUrl]);\n        }\n        if (imageFor === 'meta') {\n            setMetaImage(item.thumbnailUrl);\n        }\n\n        if (imageFor.startsWith('variant@@@')) {\n            let varname = imageFor.replace(\"variant@@@\", \"\")\n            handleVariantInput(varname, 'image', item.thumbnailUrl, false)\n        }\n\n        setDisplay(false)\n    }\n\n\n\n    const productForm = () => (\n        <>\n            <Card title=\"Product Information\" >\n                <div className='product_information'>\n                    <div className='input_item'>\n                        <label>Product Name <span className='required'>*</span></label>\n                        <div className='width_100'>\n                            <Input className={errors && errors.name && 'error'} value={name} onChange={(e) => setName(e.target.value)} placeholder='Product name'></Input>\n                            {errors && errors.name && <span className='error_text'>{errors.name}</span>}\n\n\n                        </div>\n\n                    </div>\n\n                    {/* -------------------categories-------------- */}\n                    <div className='input_item'>\n                        <label>Category <span className='required'>*</span></label>\n                        <div className='width_100'>\n                            <Select\n                                showSearch\n                                style={{ width: \"100%\" }}\n                                dropdownStyle={{ maxHeight: 400, overflow: 'auto' }}\n                                placeholder=\"Please select a category\"\n                                optionFilterProp=\"children\"\n                                onChange={(value) => handleChangeCategory(value)}\n                                value={category}\n                                filterOption={(input, option) =>\n                                    option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                                }\n                            >\n                                {\n                                    categories?.length > 0 && categories.map((cat, index) => {\n                                        return (\n                                            <Option key={index} value={cat._id}>{cat.name}</Option>\n                                        )\n\n                                    })\n                                }\n\n\n                            </Select>\n                            {errors && errors.category && <span className='error_text'>{errors.category}</span>}\n\n\n\n\n                        </div>\n                    </div>\n\n\n                    {/*---------------- sub categories---------- */}\n                    {\n                        subCategories?.length > 0 &&\n                        <div className='input_item'>\n                            <label>Sub Category <span className='required'>*</span></label>\n                            <div className='width_100'>\n                                <Select\n                                    showSearch\n                                    style={{ width: \"100%\" }}\n                                    dropdownStyle={{ maxHeight: 400, overflow: 'auto' }}\n                                    placeholder=\"Please select a sub category\"\n                                    optionFilterProp=\"children\"\n                                    onChange={(value) =>handleChangeSubCategory(value)}\n                                    value={subCategory}\n                                    filterOption={(input, option) =>\n                                        option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                                    }\n                                >\n                                    {\n                                        subCategories?.length > 0 && subCategories.map((cat, index) => {\n                                            return (\n                                                <Option key={index} value={cat._id}>{cat.name}</Option>\n                                            )\n\n                                        })\n                                    }\n\n\n                                </Select>\n\n                                {errors && errors.category && <span className='error_text'>{errors.category}</span>}\n                            </div>\n                        </div>\n                    }\n\n\n                    {/*---------------- sub sub categories---------- */}\n                    {\n                        subSubCategories?.length > 0 &&\n                        <div className='input_item'>\n                            <label>Nested Sub Category <span className='required'>*</span></label>\n                            <div className='width_100'>\n                                <Select\n                                    showSearch\n                                    style={{ width: \"100%\" }}\n                                    dropdownStyle={{ maxHeight: 400, overflow: 'auto' }}\n                                    placeholder=\"Please select a sub category\"\n                                    optionFilterProp=\"children\"\n                                    onChange={(value) =>setSubSubCategory(value)}\n                                    value={subSubCategory}\n                                    filterOption={(input, option) =>\n                                        option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                                    }\n                                >\n                                    {\n                                        subSubCategories?.length > 0 && subSubCategories.map((cat, index) => {\n                                            return (\n                                                <Option key={index} value={cat._id}>{cat.name}</Option>\n                                            )\n\n                                        })\n                                    }\n\n\n                                </Select>\n                                {errors && errors.category && <span className='error_text'>{errors.category}</span>}\n                            </div>\n                        </div>\n                    }\n\n\n\n\n                    <div className='input_item'>\n                        <label>Brand </label>\n                        <Select\n                            showSearch\n                            style={{ width: \"100%\" }}\n                            placeholder=\"Select a Brand\"\n                            optionFilterProp=\"children\"\n                            onChange={(value) => setBrand(value)}\n                            value={brand}\n                            filterOption={(input, option) =>\n                                option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                            }\n                        >\n                            {\n                                brands.length > 0 && brands.map((b, index) => {\n                                    return (\n                                        <Option key={index} value={b._id}>{b.name}</Option>\n                                    )\n\n                                })\n                            }\n\n\n                        </Select>,\n                    </div>\n\n                    <div className='input_item'>\n                        <label>Unit <span className='required'>*</span></label>\n                        <div className='width_100'>\n                            <Input className={errors && errors.name && 'error'} value={unit} onChange={(e) => setUnit(e.target.value)} placeholder='Unit (e.g. KG,Pc etc)'></Input>\n                            {errors && errors.unit && <span className='error_text'>{errors.unit}</span>}\n                        </div>\n\n                    </div>\n                    <div className='input_item'>\n                        <label>Tags </label>\n                        <div className='tag_fieled'>\n                            {\n                                tags?.map((tname, index) => {\n                                    return (\n                                        <span className='tag_item' key={index}>{tname} <span onClick={() => handleRemoveTag(tname)} className='remove'>X</span></span>\n                                    )\n                                })\n                            }\n                            <Input onChange={(e) => setTagInput(e.target.value)} onKeyPress={handleKeyPressTag} type='text' value={tagInput} placeholder='Enter tag name and press enter'></Input>\n                        </div>\n                    </div>\n                </div>\n            </Card>\n\n            {/* --------product images-------------- */}\n            <Card style={{ marginTop: \"15px\" }} title=\"Product Images\" >\n                <div className='product_information'>\n                    <div className='input_item'>\n                        <label>Thumbnail image <span className='required'>*</span></label>\n                        <div style={{ width: \"100%\" }}>\n                            <Button\n                                className='d_center'\n                                onClick={() => {\n                                    setImageFor(\"thumbnail\")\n                                    setDisplay(true)\n                                }}\n                                type=\"primary\"\n                                shape=\"round\"\n                                icon={<UploadOutlined />}\n                                size={\"size\"} >\n                                Upload thumbnail\n                            </Button>\n                            <div >\n                                {\n                                    thumbnail && <div className='image_container'>\n\n                                        <img src={thumbnail}></img>\n                                    </div>\n                                }\n\n\n                            </div>\n                            {errors && errors.thumbnail && <span className='error_text'>{errors.thumbnail}</span>}\n                        </div>\n\n\n                    </div>\n\n                    <div className='input_item'>\n                        <label>Gallery images </label>\n                        <div style={{ width: \"100%\" }}>\n                            <Button\n                                className='d_center'\n                                onClick={() => {\n                                    setImageFor(\"gallery\")\n                                    setDisplay(true)\n                                }}\n                                type=\"primary\"\n                                shape=\"round\"\n                                icon={<UploadOutlined />}\n                                size={\"size\"} >\n                                Upload Galary\n                            </Button>\n                            <div style={{ display: \"flex\" }}>\n                                {\n                                    gallery.map((g, index) => {\n                                        return (\n                                            <div key={index} className='image_container'>\n                                                <span onClick={() => {\n                                                    let array = [...gallery]\n                                                    array.splice(index, 1)\n                                                    setGallery(array)\n                                                }}>X</span>\n                                                <img src={g}></img>\n                                            </div>\n                                        )\n                                    })\n                                }\n\n                            </div>\n                        </div>\n\n                    </div>\n                </div>\n\n            </Card>\n\n\n            {/* -------------product attributes----------------------- */}\n            <Card style={{ marginTop: \"15px\" }} title=\"Product Variation\" >\n                <div className='product_information'>\n                    <div className='input_item'>\n                        <label>Product Type </label>\n                        <Select\n                            style={{ width: \"100%\" }}\n                            onChange={(value) => handleChangeProductType(value)}\n                            value={productType}\n                        >\n                            <Option value='simple'>Simple Product</Option>\n                            <Option value='variant'>Variant Product</Option>\n\n                        </Select>\n                    </div>\n\n                    {\n                        productType === 'variant' && <div className='input_item'>\n                            <label>Attributes </label>\n                            <Select\n                                mode=\"multiple\"\n                                size=\"default\"\n                                placeholder=\"Please select\"\n                                onSelect={(value) => handleChangeAttr(value)}\n                                style={{ width: '100%' }}\n                                onDeselect={(value) => handleRemoveAttr(value)}\n                                value={selectedAttr?.map(at => at?._id)}\n                            >\n                                {\n                                    attributes.map((attr, index) => {\n                                        return (\n                                            <Option value={attr._id} key={index}>{attr.name}</Option>\n                                        )\n                                    })\n                                }\n                            </Select>\n                        </div>\n                    }\n\n\n                    {\n                        selectedAttr.length > 0 &&\n                        selectedAttr.map((attr, index) => {\n                            return (\n                                <div key={index} className='input_item'>\n                                    <label>{attr?.name} <span className='required'>*</span></label>\n                                    <Select\n                                        mode=\"multiple\"\n                                        size=\"default\"\n                                        placeholder=\"Please select\"\n                                        onSelect={(value) => handleChangeAttrValue(value)}\n                                        onDeselect={(value) => handleRemoveAttrValue(value)}\n                                        style={{ width: '100%' }}\n                                        value={selectedAttrVal && selectedAttrVal?.filter(selected => selected?.name === attr?.name)[0]?.values.map(val => val + \"@@@\" + attr.name)}\n\n                                    >\n                                        {\n                                            attr.values.map((val, index) => {\n                                                return (\n                                                    <Option value={val + \"@@@\" + attr.name} key={index}>{val}</Option>\n                                                )\n                                            })\n                                        }\n                                    </Select>\n                                </div>\n                            )\n                        })\n                    }\n                </div>\n            </Card>\n\n\n            {/* --------product price-------------- */}\n            <Card style={{ marginTop: \"15px\" }} title=\"Product price + stock\" >\n                <div className='product_information'>\n                    <div className='input_item'>\n                        <label>Unit Price <span className='required'>*</span></label>\n                        <div className='width_100'>\n                            <Input disabled={productType === 'variant'} className={errors && errors.price && 'error'} value={price} onChange={(e) => setPrice(e.target.value)} placeholder='Product price' type='number'></Input>\n                            {errors && errors.price && <span className='error_text'>{errors.price}</span>}\n                        </div>\n\n                    </div>\n                    <div className='input_item'>\n                        <label>Discount </label>\n                        <div style={{ display: \"flex\", justifyContent: \"space-between\", width: \"100%\" }}>\n                            <Input disabled={productType === 'variant'} value={discount} onChange={(e) => setDiscount(e.target.value)} style={{ width: \"60%\" }} placeholder='Discount price' type='number'></Input>\n                            <Select\n                                style={{ width: \"35%\" }}\n                                placeholder=\"Select discount type\"\n                                optionFilterProp=\"children\"\n                                onChange={(value) => setDiscountType(value)}\n                                value={discountType}\n                                disabled={productType === 'variant'}\n\n                            >\n                                <Option value=\"flat\">Flat</Option>\n                                <Option value=\"percent\">Percent</Option>\n                            </Select>\n                        </div>\n\n                    </div>\n                    <div className='input_item'>\n                        <label>Tax </label>\n                        <div style={{ display: \"flex\", justifyContent: \"space-between\", width: \"100%\" }}>\n                            <Input onChange={(e) => setTax(e.target.value)} value={tax} style={{ width: \"60%\" }} placeholder='Tax value' type='number'></Input>\n                            <Select\n                                style={{ width: \"35%\" }}\n                                placeholder=\"Select value type\"\n                                optionFilterProp=\"children\"\n                                onChange={(value) => setTaxType(value)}\n                                value={taxType}\n\n                            >\n                                <Option value=\"flat\">Flat</Option>\n                                <Option value=\"percent\">Percent</Option>\n                            </Select>\n                        </div>\n\n                    </div>\n                    <div className='input_item'>\n                        <label>SKU </label>\n                        <div className='width_100'>\n                            <Input className={errors && errors.sku && 'error'} value={sku} onChange={(e) => setSku(e.target.value)} placeholder='Product SKU' type='text'></Input>\n                            {errors && errors.sku && <span className='error_text'>{errors.sku}</span>}\n                        </div>\n                    </div>\n\n                    <div className='input_item'>\n                        <label>Stock <span className='required'>*</span></label>\n                        <Input disabled={productType === 'variant'} value={stock} onChange={(e) => setStock(e.target.value)} placeholder='Product stock' type='number'></Input>\n                    </div>\n                    {\n                        variations && variations.length > 0 &&\n                        <table className='variation_table'>\n                            <tbody>\n                                <tr>\n                                    <th>Variant</th>\n                                    <th>Variant Price</th>\n                                    <th>Discount</th>\n                                    <th>Discount Type</th>\n                                    <th>Stock</th>\n                                    <th>Set Default</th>\n                                    <th>Photo</th>\n                                </tr>\n                                {\n                                    variations && variations.map((variant, index) => {\n                                        return (\n                                            <tr key={index}>\n                                                <td>\n                                                    <>\n                                                        {\n                                                            Object.keys(variant).map((keyName, i) => (\n                                                                keyName === 'varname' || keyName === 'image' || keyName === 'price' || keyName === 'stock' || keyName === 'discount' || keyName === 'discountType' || keyName === \"isDefault\" ? \"\" :\n                                                                    <span key={i} >\n\n                                                                        <span >{keyName} :</span>\n                                                                        <strong style={{ margin: \"0 5px\", color: \"#494A4A\" }}>{variant[keyName]}</strong>,\n\n                                                        </span>\n                                                            ))\n                                                        }\n\n                                                    </>\n                                                </td>\n                                                <td>\n                                                    <Input value={variant.price} onChange={(e) => handleVariantInput(variant.varname, 'price', e.target.value, variant.isDefault)} placeholder='Variant Price' type='number'></Input>\n                                                </td>\n                                                <td>\n                                                    <Input value={variant.discount} onChange={(e) => handleVariantInput(variant.varname, 'discount', e.target.value, variant.isDefault)} placeholder='Discount' type='number'></Input>\n                                                </td>\n                                                <td>\n                                                    <Select\n                                                        style={{ width: \"90%\" }}\n                                                        placeholder=\"Select discount type\"\n                                                        optionFilterProp=\"children\"\n                                                        onChange={(value) => handleVariantInput(variant.varname, 'discountType', value, variant.isDefault)}\n                                                        value={variant.discountType}\n\n                                                    >\n                                                        <Option value=\"flat\">Flat</Option>\n                                                        <Option value=\"percent\">Percent</Option>\n                                                    </Select>\n                                                </td>\n                                                <td>\n                                                    <Input onBlur={(e) => { e.target.value === '' && handleVariantInput(variant.varname, 'stock', 0) }} value={variant.stock} onChange={(e) => handleVariantInput(variant.varname, 'stock', e.target.value)} placeholder='Variant Stock' type='number'></Input>\n                                                </td>\n                                                <td>\n                                                    <Switch style={{ width: \"10px\" }} checked={variant.isDefault} onChange={(c) => handleVariandDefault(variant, c)} />\n                                                </td>\n                                                <td>\n\n\n                                                    <Button\n                                                        className='d_center'\n                                                        onClick={() => {\n                                                            setImageFor(\"variant@@@\" + variant.varname)\n                                                            setDisplay(true)\n                                                        }}\n                                                        type=\"primary\"\n                                                        shape=\"round\"\n                                                        icon={<UploadOutlined />}\n                                                        size={\"size\"} >\n                                                        Upload Image\n                                                </Button>\n                                                    {\n                                                        variant.image && <div style={{ display: \"flex\" }}>\n                                                            <div key={index} className='image_container'>\n                                                                <span onClick={() => handleVariantInput(variant.varname, 'image', \"\")}>X</span>\n                                                                <img src={variant.image}></img>\n                                                            </div>\n\n                                                        </div>\n                                                    }\n\n\n                                                </td>\n\n\n                                            </tr>\n                                        )\n                                    })\n                                }\n                            </tbody>\n                        </table>\n                    }\n                </div>\n\n            </Card>\n\n\n\n            {/* --------product Description-------------- */}\n            <Card style={{ marginTop: \"15px\" }} title=\"Product Description\" >\n                <div className='product_information'>\n                    <div className='input_item'>\n                        <label>Description </label>\n                        <ReactQuill\n                            value={description}\n                            onChange={(value) => setDescription(value)}\n                            style={{ width: \"100%\", marginBottom: \"20px\" }}\n                        />\n                    </div>\n\n                </div>\n\n            </Card>\n\n\n            {/* --------product shipping-------------- */}\n            <Card style={{ marginTop: \"15px\" }} title=\"Product shipping cost\" >\n                <div className='product_information'>\n                    <div className='input_item'>\n                        <label>Free shipping <span className='required'>*</span></label>\n                        <Switch style={{ width: \"10px\" }} checked={freeShipping} onChange={(c) => setFreeShipping(c)} />\n                    </div>\n                    <div className='input_item'>\n                        <label>Shipping cost  </label>\n                        <Input value={cost} onChange={(e) => setCost(cost)} disabled={freeShipping} placeholder='shipping cost' type='number' style={{ width: \"20%\" }}></Input>\n                    </div>\n\n                </div>\n\n            </Card>\n\n\n            {/* --------product meta-------------- */}\n            <Card style={{ marginTop: \"15px\" }} title=\"SEO Meta Tags\" >\n                <div className='product_information'>\n                    <div className='input_item'>\n                        <label>Meta title </label>\n                        <Input value={metaTitle} onChange={(e) => setMetaTitle(e.target.value)} type='text' placeholder=\"product meta title\"></Input>\n                    </div>\n                    <div className='input_item'>\n                        <label>Meta description </label>\n                        <Input.TextArea value={metaDescription} onChange={(e) => setMetaDescription(e.target.value)} type='text' placeholder=\"product meta description\"></Input.TextArea>\n                    </div>\n                    <div className='input_item'>\n                        <label>Meta Image </label>\n                        <div style={{ width: \"100%\" }}>\n                            <Button\n                                className='d_center'\n                                onClick={() => {\n                                    setImageFor(\"meta\")\n                                    setDisplay(true)\n                                }}\n                                type=\"primary\"\n                                shape=\"round\"\n                                icon={<UploadOutlined />}\n                                size={\"size\"} >\n                                Upload meta image\n                            </Button>\n                            <div >\n                                {\n                                    metaImage && <div className='image_container'>\n                                        <span onClick={() => setMetaImage('')}>X</span>\n                                        <img src={metaImage}></img>\n                                    </div>\n                                }\n\n\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n\n            </Card>\n\n\n            <Button onClick={() => saveProduct()} size='large' style={{ float: \"right\", margin: \"15px 0\" }} type=\"primary\">Edit Product</Button>\n        </>\n    )\n\n    return (\n        <div className=\"product_create\">\n            <MediaLibrary display={display} onHide={() => setDisplay(false)} selectCallback={(item) => handleImageselect(item)} />\n            {\n                isCategoryLoading || isBrandLoading || loading ? \"Loading\" : productForm()\n            }\n        </div>\n    )\n}\n\nexport default EditProduct\n"]},"metadata":{},"sourceType":"module"}