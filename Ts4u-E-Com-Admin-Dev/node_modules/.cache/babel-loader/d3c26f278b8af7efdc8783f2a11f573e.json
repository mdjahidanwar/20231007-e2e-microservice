{"ast":null,"code":"import _toConsumableArray from\"/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Row,Col,Card,Input,Button,Table,Tag,Space,Image,Switch,Popconfirm,Modal,DatePicker}from'antd';import{UploadOutlined,EditOutlined,DeleteOutlined,QuestionCircleOutlined}from'@ant-design/icons';import\"./campaigns.scss\";import axios from'axios';import MediaLibrary from'../../components/MediaLibrary';import{useHistory}from'react-router-dom';import moment from'moment';var RangePicker=DatePicker.RangePicker;function range(start,end){var result=[];for(var i=start;i<end;i++){result.push(i);}return result;}function disabledDate(current){// Can not select days before today and today\nreturn current&&current<moment().endOf('day');}function disabledDateTime(){return{disabledHours:function disabledHours(){return range(0,24).splice(4,20);},disabledMinutes:function disabledMinutes(){return range(30,60);},disabledSeconds:function disabledSeconds(){return[55,56];}};}function disabledRangeTime(_,type){if(type==='start'){return{disabledHours:function disabledHours(){return range(0,60).splice(4,20);},disabledMinutes:function disabledMinutes(){return range(30,60);},disabledSeconds:function disabledSeconds(){return[55,56];}};}}function Campaigns(){var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isModalVisible=_useState2[0],setIsModalVisible=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),display=_useState4[0],setDisplay=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),campaigns=_useState8[0],setCampaigns=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),campaignName=_useState10[0],setCampaignName=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),image=_useState12[0],setImage=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),startAt=_useState14[0],setStartAt=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),endAt=_useState16[0],setEndAt=_useState16[1];var _useState17=useState(true),_useState18=_slicedToArray(_useState17,2),status=_useState18[0],setStatus=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),editCamp=_useState20[0],setEditCamp=_useState20[1];var clearFields=function clearFields(){setCampaignName(\"\");setImage('');setStartAt('');setEndAt(\"\");setStatus(true);setEditCamp(null);setIsModalVisible(false);};var createCamp=function createCamp(){setIsLoading(true);var data={name:campaignName,image:image,startAt:startAt,endAt:endAt,isActive:status};axios.post('/campaign/create',data).then(function(res){setCampaigns(function(prev){return[res.data.campaign].concat(_toConsumableArray(prev));});setIsLoading(false);clearFields();}).catch(function(err){setIsLoading(false);err&&err.response&&console.log(err.response.data);});};var getCamp=function getCamp(){axios.get('/campaign/getall').then(function(res){setCampaigns(res.data.campaigns);console.log(res.data.campaigns);}).catch(function(err){err&&err.response&&console.log(err.response.data);});};var deleteCamp=function deleteCamp(id){axios.delete(\"/campaign/delete/\".concat(id)).then(function(res){if(res.data.success){var filter=campaigns.filter(function(b){return b._id!==id;});setCampaigns(filter);}}).catch(function(err){err&&err.response&&console.log(err.response.data);});};var handleEditCamp=function handleEditCamp(camp){setCampaignName(camp.name);setImage(camp.image);setStatus(camp.isActive);setStartAt(camp.startAt);setEndAt(camp.endAt);setEditCamp(camp._id);setIsModalVisible(true);};var updateCamp=function updateCamp(){setIsLoading(true);var data={name:campaignName,image:image,startAt:startAt,endAt:endAt,isActive:status};axios.patch(\"/campaign/update/\".concat(editCamp),data).then(function(res){if(res.data.success){setIsLoading(false);var campArray=_toConsumableArray(campaigns);var index=campArray.findIndex(function(c){return c._id===res.data.campaign._id;});campArray[index]=res.data.campaign;setCampaigns(campArray);clearFields();}}).catch(function(err){setIsLoading(false);err&&err.response&&console.log(err.response.data);});};useEffect(function(){getCamp();},[]);var handleImageselect=function handleImageselect(item){setImage(item.thumbnailUrl);setDisplay(false);};var columns=[{title:'Name',dataIndex:'name',key:'name'},{title:'Banner',key:'image',dataIndex:'image',render:function render(image){return/*#__PURE__*/React.createElement(Image,{width:100,src:image,fallback:\"data:image/png;base64,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\"});}},{title:'Status',key:'isActive',dataIndex:'isActive',render:function render(isActive){return/*#__PURE__*/React.createElement(React.Fragment,null,isActive==true?/*#__PURE__*/React.createElement(Tag,{color:\"green\"},\"Active\"):/*#__PURE__*/React.createElement(Tag,{color:\"red\"},\"Inactive\"));}},{title:'Start Date',key:'startAt',dataIndex:'startAt',render:function render(startAt){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"strong\",null,moment(startAt).format(\"D MMM YYYY HH:mm:ss\")));}},{title:'End Date',key:'endAt',dataIndex:'endAt',render:function render(endAt){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"strong\",null,moment(endAt).format(\"D MMM YYYY HH:mm:ss\")));}},{title:'Action',key:'action',render:function render(text,record){return/*#__PURE__*/React.createElement(Space,{size:\"middle\"},/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return handleEditCamp(record);},className:\"d-center\",type:\"primary\",icon:/*#__PURE__*/React.createElement(EditOutlined,null)}),/*#__PURE__*/React.createElement(Popconfirm,{onConfirm:function onConfirm(){return deleteCamp(record._id);},title:\"Are you sure\\uFF1F\",icon:/*#__PURE__*/React.createElement(QuestionCircleOutlined,{style:{color:'red'}})},/*#__PURE__*/React.createElement(Button,{className:\"d-center\",icon:/*#__PURE__*/React.createElement(DeleteOutlined,null),danger:true})),/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return history.push(\"/campaigns/\".concat(record._id));},type:\"primary\"},\"Select Products\"));}}];var showModal=function showModal(){setIsModalVisible(true);};var handleOk=function handleOk(){setIsModalVisible(false);};var handleCancel=function handleCancel(){setIsModalVisible(false);clearFields();};var handleCampDate=function handleCampDate(dates){setStartAt(moment(dates[0]._d).format());setEndAt(moment(dates[1]._d).format());};return/*#__PURE__*/React.createElement(\"div\",{className:\"campaigns\"},/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return showModal();}},\"Create New Campaign\"),/*#__PURE__*/React.createElement(MediaLibrary,{display:display,onHide:function onHide(){return setDisplay(false);},selectCallback:function selectCallback(item){return handleImageselect(item);}}),/*#__PURE__*/React.createElement(Row,{gutter:16},/*#__PURE__*/React.createElement(Col,{className:\"gutter-row\",lg:24,md:24,sm:24},/*#__PURE__*/React.createElement(Card,{style:{marginTop:\"15px\"},title:\"Brands\"},/*#__PURE__*/React.createElement(Table,{columns:columns,dataSource:campaigns})))),/*#__PURE__*/React.createElement(Modal,{zIndex:1111,title:\"Campaigns\",visible:isModalVisible,onOk:handleOk,onCancel:handleCancel,footer:[/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return clearFields();},className:\"submit_btn\",type:\"primary\",danger:true},\"Cancel\"),editCamp?/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return updateCamp();},className:\"submit_btn\",type:\"primary\"},\"Update\"):/*#__PURE__*/React.createElement(Button,{loading:isLoading,onClick:function onClick(){return createCamp();},className:\"submit_btn\",type:\"primary\"},\"Create\"))]},/*#__PURE__*/React.createElement(\"div\",{className:\"campaigns_wrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"Campaign name \",/*#__PURE__*/React.createElement(\"span\",{className:\"required\"},\"*\")),/*#__PURE__*/React.createElement(Input,{value:campaignName,onChange:function onChange(e){return setCampaignName(e.target.value);},type:\"text\",placeholder:\"Enter campaign name\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"Campaign image \",/*#__PURE__*/React.createElement(\"span\",{className:\"required\"},\"*\")),/*#__PURE__*/React.createElement(\"div\",{style:{width:\"100%\"}},/*#__PURE__*/React.createElement(Button,{className:\"d-center\",onClick:function onClick(){return setDisplay(true);},type:\"primary\",shape:\"round\",icon:/*#__PURE__*/React.createElement(UploadOutlined,null),size:\"size\"},\"Upload image \"),image&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"image_container\"},/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return setImage('');}},\"X\"),/*#__PURE__*/React.createElement(\"img\",{src:image}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"input_item\"},/*#__PURE__*/React.createElement(\"label\",null,\"Active \",/*#__PURE__*/React.createElement(\"span\",{className:\"required\"},\"*\")),/*#__PURE__*/React.createElement(Switch,{checked:status,onChange:function onChange(checked){return setStatus(checked);}})),/*#__PURE__*/React.createElement(RangePicker,{ranges:{Today:[moment(Date.now()),moment()],'This Month':[moment().startOf('month'),moment().endOf('month')]},showTime:true,format:\"YYYY/MM/DD HH:mm:ss\",onChange:handleCampDate,value:startAt&&endAt?[moment(startAt),moment(endAt)]:[moment('00:00:00','HH:mm:ss'),moment('11:59:59','HH:mm:ss')]}))));}export default Campaigns;","map":{"version":3,"sources":["/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/src/pages/campaigns/Campaigns.js"],"names":["React","useState","useEffect","Row","Col","Card","Input","Button","Table","Tag","Space","Image","Switch","Popconfirm","Modal","DatePicker","UploadOutlined","EditOutlined","DeleteOutlined","QuestionCircleOutlined","axios","MediaLibrary","useHistory","moment","RangePicker","range","start","end","result","i","push","disabledDate","current","endOf","disabledDateTime","disabledHours","splice","disabledMinutes","disabledSeconds","disabledRangeTime","_","type","Campaigns","history","isModalVisible","setIsModalVisible","display","setDisplay","isLoading","setIsLoading","campaigns","setCampaigns","campaignName","setCampaignName","image","setImage","startAt","setStartAt","endAt","setEndAt","status","setStatus","editCamp","setEditCamp","clearFields","createCamp","data","name","isActive","post","then","res","prev","campaign","catch","err","response","console","log","getCamp","get","deleteCamp","id","delete","success","filter","b","_id","handleEditCamp","camp","updateCamp","patch","campArray","index","findIndex","c","handleImageselect","item","thumbnailUrl","columns","title","dataIndex","key","render","format","text","record","color","showModal","handleOk","handleCancel","handleCampDate","dates","_d","marginTop","e","target","value","width","checked","Today","Date","now","startOf"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Row, Col, Card, Input, Button, Table, Tag, Space, Image, Switch, Popconfirm, Modal, DatePicker } from 'antd';\nimport { UploadOutlined, EditOutlined, DeleteOutlined, QuestionCircleOutlined } from '@ant-design/icons'\nimport \"./campaigns.scss\"\nimport axios from 'axios'\nimport MediaLibrary from '../../components/MediaLibrary';\nimport { useHistory } from 'react-router-dom'\nimport moment from 'moment';\nconst { RangePicker } = DatePicker;\n\n\n\nfunction range(start, end) {\n    const result = [];\n    for (let i = start; i < end; i++) {\n        result.push(i);\n    }\n    return result;\n}\n\nfunction disabledDate(current) {\n    // Can not select days before today and today\n    return current && current < moment().endOf('day');\n}\n\nfunction disabledDateTime() {\n    return {\n        disabledHours: () => range(0, 24).splice(4, 20),\n        disabledMinutes: () => range(30, 60),\n        disabledSeconds: () => [55, 56],\n    };\n}\n\nfunction disabledRangeTime(_, type) {\n    if (type === 'start') {\n        return {\n            disabledHours: () => range(0, 60).splice(4, 20),\n            disabledMinutes: () => range(30, 60),\n            disabledSeconds: () => [55, 56],\n        };\n    }\n}\n\n\nfunction Campaigns() {\n    const history = useHistory()\n    const [isModalVisible, setIsModalVisible] = useState(false);\n\n    const [display, setDisplay] = useState(false)\n    const [isLoading, setIsLoading] = useState(false)\n\n    const [campaigns, setCampaigns] = useState([])\n\n    const [campaignName, setCampaignName] = useState('')\n    const [image, setImage] = useState('')\n    const [startAt, setStartAt] = useState('')\n    const [endAt, setEndAt] = useState('')\n    const [status, setStatus] = useState(true)\n\n    const [editCamp, setEditCamp] = useState(null)\n\n\n    const clearFields = () => {\n        setCampaignName(\"\")\n        setImage('')\n        setStartAt('')\n        setEndAt(\"\")\n        setStatus(true)\n        setEditCamp(null)\n        setIsModalVisible(false)\n    }\n\n\n    const createCamp = () => {\n        setIsLoading(true)\n        let data = {\n            name: campaignName,\n            image,\n            startAt,\n            endAt,\n            isActive: status\n        }\n        axios.post('/campaign/create', data)\n            .then(res => {\n                setCampaigns(prev => [res.data.campaign, ...prev])\n                setIsLoading(false)\n                clearFields()\n            })\n            .catch(err => {\n                setIsLoading(false)\n                err && err.response && console.log(err.response.data)\n            })\n    }\n\n    const getCamp = () => {\n        axios.get('/campaign/getall')\n            .then(res => {\n                setCampaigns(res.data.campaigns)\n                console.log(res.data.campaigns);\n            })\n            .catch(err => {\n                err && err.response && console.log(err.response.data)\n            })\n    }\n    const deleteCamp = (id) => {\n        axios.delete(`/campaign/delete/${id}`)\n            .then(res => {\n                if (res.data.success) {\n                    let filter = campaigns.filter(b => b._id !== id)\n                    setCampaigns(filter)\n                }\n            })\n            .catch(err => {\n                err && err.response && console.log(err.response.data)\n            })\n    }\n\n    const handleEditCamp = (camp) => {\n        setCampaignName(camp.name)\n        setImage(camp.image)\n        setStatus(camp.isActive)\n        setStartAt(camp.startAt)\n        setEndAt(camp.endAt)\n        setEditCamp(camp._id)\n        setIsModalVisible(true)\n\n    }\n\n    const updateCamp = () => {\n        setIsLoading(true)\n        let data = {\n            name: campaignName,\n            image,\n            startAt,\n            endAt,\n            isActive: status\n        }\n        axios.patch(`/campaign/update/${editCamp}`, data)\n            .then(res => {\n                if (res.data.success) {\n                    setIsLoading(false)\n                    let campArray = [...campaigns]\n                    let index = campArray.findIndex(c => c._id === res.data.campaign._id)\n                    campArray[index] = res.data.campaign\n                    setCampaigns(campArray)\n                    clearFields()\n                }\n            })\n            .catch(err => {\n                setIsLoading(false)\n                err && err.response && console.log(err.response.data)\n            })\n    }\n\n\n\n    useEffect(() => {\n        getCamp()\n\n    }, [])\n\n\n\n    const handleImageselect = (item) => {\n        setImage(item.thumbnailUrl);\n        setDisplay(false)\n    }\n\n\n\n\n    const columns = [\n\n        {\n            title: 'Name',\n            dataIndex: 'name',\n            key: 'name',\n        },\n\n\n        {\n            title: 'Banner',\n            key: 'image',\n            dataIndex: 'image',\n            render: image => <Image\n                width={100}\n                src={image}\n                fallback=\"data:image/png;base64,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\"\n            />\n        },\n        {\n            title: 'Status',\n            key: 'isActive',\n            dataIndex: 'isActive',\n            render: isActive => (\n                <>\n                    {\n                        isActive == true ? <Tag color=\"green\">Active</Tag> : <Tag color=\"red\">Inactive</Tag>\n                    }\n                </>\n            ),\n        },\n        {\n            title: 'Start Date',\n            key: 'startAt',\n            dataIndex: 'startAt',\n            render: startAt => (\n                <>\n                    <strong>{moment(startAt).format(\"D MMM YYYY HH:mm:ss\")}</strong>\n                </>\n            ),\n        },\n        {\n            title: 'End Date',\n            key: 'endAt',\n            dataIndex: 'endAt',\n            render: endAt => (\n                <>\n                    <strong>{moment(endAt).format(\"D MMM YYYY HH:mm:ss\")}</strong>\n                </>\n            ),\n        },\n        {\n            title: 'Action',\n            key: 'action',\n            render: (text, record) => (\n                <Space size=\"middle\">\n                    <Button onClick={() => handleEditCamp(record)} className='d-center' type='primary' icon={<EditOutlined />}></Button>\n                    <Popconfirm onConfirm={() => deleteCamp(record._id)} title=\"Are you sure？\" icon={<QuestionCircleOutlined style={{ color: 'red' }} />}>\n                        <Button className='d-center' icon={<DeleteOutlined />} danger></Button>\n                    </Popconfirm>\n                    <Button onClick={() => history.push(`/campaigns/${record._id}`)} type='primary'>Select Products</Button>\n\n                </Space>\n            ),\n        },\n    ];\n\n\n\n\n    const showModal = () => {\n        setIsModalVisible(true);\n    };\n\n    const handleOk = () => {\n        setIsModalVisible(false);\n    };\n\n    const handleCancel = () => {\n        setIsModalVisible(false);\n        clearFields()\n    };\n\n\n    const handleCampDate = (dates) => {\n        setStartAt(moment(dates[0]._d).format())\n        setEndAt(moment(dates[1]._d).format())\n    }\n\n\n    return (\n        <div className='campaigns'>\n            <Button onClick={() => showModal()}>Create New Campaign</Button>\n            <MediaLibrary display={display} onHide={() => setDisplay(false)} selectCallback={(item) => handleImageselect(item)} />\n            <Row gutter={16}>\n                <Col className=\"gutter-row\" lg={24} md={24} sm={24}>\n                    <Card style={{ marginTop: \"15px\" }} title=\"Brands\" >\n                        <Table columns={columns} dataSource={campaigns} />\n                    </Card>\n                </Col>\n            </Row>\n\n\n            <Modal\n                zIndex={1111}\n                title=\"Campaigns\"\n                visible={isModalVisible}\n                onOk={handleOk}\n                onCancel={handleCancel}\n                footer={[\n                    <>\n                        <Button onClick={() => clearFields()} className='submit_btn' type=\"primary\" danger>Cancel</Button>\n                        {\n                            editCamp ?\n                                <Button onClick={() => updateCamp()} className='submit_btn' type=\"primary\">Update</Button> :\n                                <Button loading={isLoading} onClick={() => createCamp()} className='submit_btn' type=\"primary\">Create</Button>\n                        }\n\n                    </>\n                ]}\n            >\n\n                <div className='campaigns_wrapper'>\n                    <div className='input_item'>\n                        <label>Campaign name <span className='required'>*</span></label>\n                        <Input\n                            value={campaignName}\n                            onChange={(e) => setCampaignName(e.target.value)}\n                            type=\"text\"\n                            placeholder='Enter campaign name'>\n                        </Input>\n\n                    </div>\n\n                    <div className='input_item'>\n                        <label>Campaign image <span className='required'>*</span></label>\n                        <div style={{ width: \"100%\" }}>\n                            <Button className='d-center' onClick={() => setDisplay(true)} type=\"primary\" shape=\"round\" icon={<UploadOutlined />} size={\"size\"} >Upload image </Button>\n\n                            {\n                                image && <>\n                                    <div className='image_container'>\n                                        <span onClick={() => setImage('')}>X</span>\n                                        <img src={image}></img>\n                                    </div>\n                                </>\n                            }\n                        </div>\n\n                    </div>\n\n                    <div className='input_item'>\n                        <label>Active <span className='required'>*</span></label>\n                        <Switch checked={status} onChange={(checked) => setStatus(checked)} />\n\n                    </div>\n\n                    {/* <RangePicker\n                        style={{ margin: \"10px 0\" }}\n                        disabledDate={disabledDate}\n                        disabledTime={disabledRangeTime}\n                        showTime={{\n                            hideDisabledOptions: true,\n                            defaultValue: [moment('00:00:00', 'HH:mm:ss'), moment('11:59:59', 'HH:mm:ss')],\n                        }}\n                        format=\"D MMM YYYY HH:mm:ss\"\n                        onChange={(e) => handleCampDate(e)}\n                        allowEmpty={false}\n                        value={startAt && endAt ? [moment(startAt), moment(endAt)]: [moment('00:00:00', 'HH:mm:ss'), moment('11:59:59', 'HH:mm:ss')]}\n                        \n                \n                    /> */}\n\n\n\n\n\n\n                    <RangePicker\n                        ranges={{\n                            Today: [moment(Date.now()), moment()],\n                            'This Month': [moment().startOf('month'), moment().endOf('month')],\n                        }}\n                        showTime\n                        format=\"YYYY/MM/DD HH:mm:ss\"\n                        onChange={handleCampDate}\n                        value={startAt && endAt ? [moment(startAt), moment(endAt)]: [moment('00:00:00', 'HH:mm:ss'), moment('11:59:59', 'HH:mm:ss')]}\n                    />\n\n\n                </div>\n\n            </Modal>\n        </div>\n    )\n}\n\nexport default Campaigns\n\n"]},"metadata":{},"sourceType":"module"}