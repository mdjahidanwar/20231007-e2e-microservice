{"ast":null,"code":"import _slicedToArray from\"/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Card,Button}from'antd';import{UploadOutlined}from'@ant-design/icons';import axios from'axios';import{CSVLink}from\"react-csv\";import'./bulk.scss';var headers=[{label:\"name *\",key:\"name\"},{label:\"thumbnail *\",key:\"thumbnail\"},{label:\"gallery\",key:\"gallery\"},{label:\"category *\",key:\"categories.category\"},{label:\"brand\",key:\"brand\"},{label:\"Price *\",key:\"price\"},{label:\"discount_type_(flat/percent)\",key:\"discount.discountType\"},{label:\"discount_value\",key:\"discount.value\"},{label:\"tax_type (flat/percent)\",key:\"tax.taxType\"},{label:\"tax_value\",key:\"tax.value\"},{label:\"unit *\",key:\"unit\"},{label:\"sku *\",key:\"sku\"},{label:\"stock *\",key:\"stock\"},{label:\"description\",key:\"description\"},{label:\"shipping_fee\",key:\"shipping.cost\"},{label:\"tags\",key:\"tags\"},{label:\"meta_title\",key:\"meta.title\"},{label:\"meta_description\",key:\"meta.description\"},{label:\"meta_image\",key:\"meta.image\"}];var brandHeaders=[{label:\"name *\",key:\"name\"},{label:\"ID *\",key:\"_id\"}];var categoriesHeaders=[{label:\"name *\",key:\"name\"},{label:\"ID *\",key:\"_id\"}];function BulkImport(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),csv=_useState2[0],setCsv=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),brands=_useState6[0],setBrands=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),categories=_useState8[0],setCategories=_useState8[1];var getBrands=function getBrands(){axios.get('/brand/downloadbulk').then(function(res){setBrands(res.data.brands);}).catch(function(err){err&&err.response&&alert(err.response.data.error);});};var getCategories=function getCategories(){axios.get('/category/downloadbulk').then(function(res){setCategories(res.data.categories);}).catch(function(err){err&&err.response&&alert(err.response.data.error);});};useEffect(function(){getBrands();getCategories();},[]);var handleSaveCsv=function handleSaveCsv(){setIsLoading(true);var formData=new FormData();formData.append('file',csv);axios.post('/product/bulkupload',formData).then(function(res){alert(\"\".concat(res.data.count,\" products added\"));setCsv(null);setIsLoading(false);}).catch(function(err){setIsLoading(false);err&&err.response&&alert(err.response.data.error);});};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card,{title:\"Product Bulk Upload \"},/*#__PURE__*/React.createElement(\"div\",{className:\"bulk_info\"},/*#__PURE__*/React.createElement(\"strong\",null,\"Step 1:\"),/*#__PURE__*/React.createElement(\"li\",null,\"1. Download the skeleton file and fill it with proper data.\"),/*#__PURE__*/React.createElement(\"li\",null,\"2. You can download the example file to understand how the data must be filled.\"),/*#__PURE__*/React.createElement(\"li\",null,\"3. Once you have downloaded and filled the skeleton file, upload it in the form below and submit.\"),/*#__PURE__*/React.createElement(\"li\",null,\"4. After uploading products you need to edit them and set product's variations.\")),/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:\"15px\"}},/*#__PURE__*/React.createElement(CSVLink,{data:[],headers:headers},/*#__PURE__*/React.createElement(Button,{type:\"primary\"},\"Download skeleton CSV\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"bulk_info\"},/*#__PURE__*/React.createElement(\"strong\",null,\"Step 2:\"),/*#__PURE__*/React.createElement(\"li\",null,\"1. Category and Brand should be in id.\"),/*#__PURE__*/React.createElement(\"li\",null,\"2. You can download the JSON to get Category and Brand id.\")),/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:\"15px\"}},/*#__PURE__*/React.createElement(CSVLink,{data:categories,headers:categoriesHeaders,asyncOnClick:true,onClick:function onClick(event,done){categories.length>0?done():done(false);}},/*#__PURE__*/React.createElement(Button,{disabled:categories.length===0,type:\"primary\",style:{marginRight:\"20px\"}},\"Download Category\")),/*#__PURE__*/React.createElement(CSVLink,{data:brands,headers:brandHeaders,asyncOnClick:true,onClick:function onClick(event,done){brands.length>0?done():done(false);}},/*#__PURE__*/React.createElement(Button,{disabled:brands.length===0,type:\"primary\"},\"Download Brand\")))),/*#__PURE__*/React.createElement(Card,{title:\"Upload file\",style:{marginTop:\"20px\"}},/*#__PURE__*/React.createElement(\"label\",{class:\"file\"},/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(e){return setCsv(e.target.files[0]);},type:\"file\",id:\"file\",\"aria-label\":\"Browse csv file\",accept:\".csv\"}),/*#__PURE__*/React.createElement(\"span\",{class:\"file-custom\"},csv&&csv.name)),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Button,{disabled:!csv,loading:isLoading,onClick:function onClick(){return handleSaveCsv();},className:\"d-center\",type:\"primary\",icon:/*#__PURE__*/React.createElement(UploadOutlined,null),size:\"size\"},\"Upload File \")));}export default BulkImport;","map":{"version":3,"sources":["/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/src/pages/product/BulkImport.js"],"names":["React","useState","useEffect","Card","Button","UploadOutlined","axios","CSVLink","headers","label","key","brandHeaders","categoriesHeaders","BulkImport","csv","setCsv","isLoading","setIsLoading","brands","setBrands","categories","setCategories","getBrands","get","then","res","data","catch","err","response","alert","error","getCategories","handleSaveCsv","formData","FormData","append","post","count","marginTop","event","done","length","marginRight","e","target","files","name"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Card, Button } from 'antd'\nimport { UploadOutlined } from '@ant-design/icons'\nimport axios from 'axios'\nimport { CSVLink } from \"react-csv\";\n\nimport './bulk.scss'\n\nconst headers = [\n    { label: \"name *\", key: \"name\" },\n    { label: \"thumbnail *\", key: \"thumbnail\" },\n    { label: \"gallery\", key: \"gallery\" },\n    { label: \"category *\", key: \"categories.category\" },\n    { label: \"brand\", key: \"brand\" },\n    { label: \"Price *\", key: \"price\" },\n    { label: \"discount_type_(flat/percent)\", key: \"discount.discountType\" },\n    { label: \"discount_value\", key: \"discount.value\" },\n    { label: \"tax_type (flat/percent)\", key: \"tax.taxType\" },\n    { label: \"tax_value\", key: \"tax.value\" },\n    { label: \"unit *\", key: \"unit\" },\n    { label: \"sku *\", key: \"sku\" },\n    { label: \"stock *\", key: \"stock\" },\n    { label: \"description\", key: \"description\" },\n    { label: \"shipping_fee\", key: \"shipping.cost\" },\n    { label: \"tags\", key: \"tags\" },\n    { label: \"meta_title\", key: \"meta.title\" },\n    { label: \"meta_description\", key: \"meta.description\" },\n    { label: \"meta_image\", key: \"meta.image\" },\n\n];\n\n\nconst brandHeaders = [\n    { label: \"name *\", key: \"name\" },\n    { label: \"ID *\", key: \"_id\" },\n\n];\n\n\nconst categoriesHeaders = [\n    { label: \"name *\", key: \"name\" },\n    { label: \"ID *\", key: \"_id\" },\n\n];\n\n\nfunction BulkImport() {\n    const [csv, setCsv] = useState(null)\n    const [isLoading, setIsLoading] = useState(false)\n\n    const [brands, setBrands] = useState([])\n    const [categories, setCategories] = useState([])\n\n\n\n    const getBrands = () => {\n        axios.get('/brand/downloadbulk')\n            .then(res => {\n                setBrands(res.data.brands);\n            })\n            .catch(err => {\n                err && err.response && alert(err.response.data.error)\n            })\n    }\n\n    const getCategories = () => {\n        axios.get('/category/downloadbulk')\n            .then(res => {\n                setCategories(res.data.categories);\n            })\n            .catch(err => {\n                err && err.response && alert(err.response.data.error)\n            })\n    }\n\n\n    useEffect(() => {\n        getBrands()\n        getCategories()\n    }, [])\n\n\n    const handleSaveCsv = () => {\n        setIsLoading(true)\n        let formData = new FormData()\n        formData.append('file', csv)\n        axios.post('/product/bulkupload', formData)\n            .then(res => {\n                alert(`${res.data.count} products added`)\n                setCsv(null)\n                setIsLoading(false)\n            })\n            .catch(err => {\n                setIsLoading(false)\n                err && err.response && alert(err.response.data.error)\n            })\n    }\n\n\n    return (\n        <>\n            <Card title=\"Product Bulk Upload \">\n                <div className=\"bulk_info\">\n                    <strong>Step 1:</strong>\n                    <li>1. Download the skeleton file and fill it with proper data.</li>\n                    <li>2. You can download the example file to understand how the data must be filled.</li>\n                    <li>3. Once you have downloaded and filled the skeleton file, upload it in the form below and submit.</li>\n                    <li>4. After uploading products you need to edit them and set product's variations.</li>\n                </div>\n                <div style={{ marginTop: \"15px\" }}>\n                    <CSVLink\n                        data={[]}\n                        headers={headers}\n                    >\n                        <Button type=\"primary\">Download skeleton CSV</Button>\n                    </CSVLink>\n                </div>\n                <div className=\"bulk_info\">\n                    <strong>Step 2:</strong>\n                    <li>1. Category and Brand should be in id.</li>\n                    <li>2. You can download the JSON to get Category and Brand id.</li>\n                </div>\n                <div style={{ marginTop: \"15px\" }}>\n\n\n                    <CSVLink\n                        data={categories}\n                        headers={categoriesHeaders}\n                        asyncOnClick={true}\n                        onClick={(event, done) => {\n                            categories.length > 0 ? done()\n                                : done(false)\n                        }}\n                    >\n                        <Button disabled={categories.length===0} type=\"primary\" style={{ marginRight: \"20px\" }}>Download Category</Button>\n                    </CSVLink>\n\n                    <CSVLink\n                        data={brands}\n                        headers={brandHeaders}\n                        asyncOnClick={true}\n                        onClick={(event, done) => {\n                            brands.length > 0 ? done()\n                                : done(false)\n                        }}\n                    >\n                    <Button disabled={brands.length===0} type=\"primary\">Download Brand</Button>\n                    </CSVLink>\n                </div>\n            </Card>\n            <Card title=\"Upload file\" style={{ marginTop: \"20px\" }}>\n                <label class=\"file\">\n                    <input onChange={(e) => setCsv(e.target.files[0])} type=\"file\" id=\"file\" aria-label=\"Browse csv file\" accept='.csv' />\n                    <span class=\"file-custom\">{csv && csv.name}</span>\n                </label>\n                <br></br>\n                <Button  disabled={!csv} loading={isLoading} onClick={() => handleSaveCsv()} className='d-center' type=\"primary\" icon={<UploadOutlined />} size={\"size\"} >Upload File </Button>\n            </Card>\n        </>\n    )\n}\n\nexport default BulkImport\n"]},"metadata":{},"sourceType":"module"}