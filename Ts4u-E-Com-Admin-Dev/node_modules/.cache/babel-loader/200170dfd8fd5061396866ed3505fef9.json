{"ast":null,"code":"import _slicedToArray from\"/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import axios from'axios';import{useHistory}from'react-router-dom';import{Card,Button,Table,Space,Input}from'antd';import{EyeOutlined}from'@ant-design/icons';var Search=Input.Search;function Orders(){var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),orders=_useState4[0],setOrders=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),records=_useState6[0],setRecords=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),selectedRowKeys=_useState8[0],setSelectedRowKeys=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),selectedRows=_useState10[0],setSelectedRows=_useState10[1];useEffect(function(){setIsLoading(true);axios.get(\"order/allorders\").then(function(res){setOrders(res.data.orders);setRecords(res.data.orders);setIsLoading(false);}).catch(function(err){setIsLoading(false);});},[]);var handleSearch=function handleSearch(val){if(val==\"\")setOrders(records);else setOrders(records.filter(function(x){return x.invoice.includes(val);}));};var rowSelection={selectedRowKeys:selectedRowKeys,onChange:function onChange(selectedRowKeys,selectedRows){setSelectedRowKeys(selectedRowKeys);setSelectedRows(selectedRows);}};var columns=[{title:'Invoice',dataIndex:'invoice',key:'invoice'},{title:'Num of Products',dataIndex:'items',key:'items',sorter:function sorter(a,b){return a.items.length-b.items.length;},render:function render(items){return/*#__PURE__*/React.createElement(\"span\",null,items.length);}},{title:'Customer',dataIndex:'user',key:'user',render:function render(user){return/*#__PURE__*/React.createElement(\"span\",null,user===null||user===void 0?void 0:user.name);}},{title:'Amount',dataIndex:'totalAmount',key:'totalAmount',sorter:function sorter(a,b){return a.totalAmount-b.totalAmount;},render:function render(amount){return/*#__PURE__*/React.createElement(\"span\",null,\"$ \",amount);}},{title:'Delivery Status',key:'orderStatus',dataIndex:'orderStatus',filters:[{text:'Pending',value:'pending'},{text:'Processing',value:'processing'},{text:'Packed',value:'packed'},{text:'Shipped',value:'shipped'},{text:'Delivered',value:'delivered'},{text:'Cancelled',value:'cancelled'}],onFilter:function onFilter(value,record){return record.orderStatus.includes(value);}},{title:'Payment Status',key:'paymentStatus',dataIndex:'paymentStatus',filters:[{text:'Unpaid',value:'unpaid'},{text:'Paid',value:'paid'},{text:'COD',value:'cod'},{text:'Partial',value:'partial'},{text:'Refund Requested',value:'refundRequested'},{text:'Refunded',value:'refunded'}],onFilter:function onFilter(value,record){return record.paymentStatus.includes(value)&&record.paymentStatus===value&&record.paymentStatus.includes(value);}},{title:'Action',key:'action',render:function render(text,record){return/*#__PURE__*/React.createElement(Space,{size:\"middle\"},/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return history.push(\"/order/details/\".concat(record.invoice));},className:\"d-center\",type:\"primary\",icon:/*#__PURE__*/React.createElement(EyeOutlined,null)}));}}];return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Card,{title:\"All Orders\"},/*#__PURE__*/React.createElement(Search,{placeholder:\"Enter Invoice\",onSearch:handleSearch,style:{width:200}}),/*#__PURE__*/React.createElement(Table,{rowKey:\"_id\"//rowSelection={rowSelection}\n,loading:isLoading,columns:columns,dataSource:orders,pagination:{defaultPageSize:10,showSizeChanger:true,pageSizeOptions:['10','20','30'],showQuickJumper:true}})));}export default Orders;","map":{"version":3,"sources":["/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/src/pages/orders/Orders.js"],"names":["React","useEffect","useState","axios","useHistory","Card","Button","Table","Space","Input","EyeOutlined","Search","Orders","history","isLoading","setIsLoading","orders","setOrders","records","setRecords","selectedRowKeys","setSelectedRowKeys","selectedRows","setSelectedRows","get","then","res","data","catch","err","handleSearch","val","filter","x","invoice","includes","rowSelection","onChange","columns","title","dataIndex","key","sorter","a","b","items","length","render","user","name","totalAmount","amount","filters","text","value","onFilter","record","orderStatus","paymentStatus","push","width","defaultPageSize","showSizeChanger","pageSizeOptions","showQuickJumper"],"mappings":"gMAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,IAAT,CAAeC,MAAf,CAAuBC,KAAvB,CAA8BC,KAA9B,CAAqCC,KAArC,KAAkD,MAAlD,CACA,OAASC,WAAT,KAA4B,mBAA5B,CACA,GAAMC,CAAAA,MAAM,CAAGF,KAAK,CAACE,MAArB,CAQA,QAASC,CAAAA,MAAT,EAAkB,CACd,GAAMC,CAAAA,OAAO,CAAGT,UAAU,EAA1B,CACA,cAAkCF,QAAQ,CAAC,KAAD,CAA1C,wCAAOY,SAAP,eAAkBC,YAAlB,eAEA,eAA4Bb,QAAQ,CAAC,EAAD,CAApC,yCAAOc,MAAP,eAAeC,SAAf,eACA,eAA8Bf,QAAQ,CAAC,EAAD,CAAtC,yCAAOgB,OAAP,eAAgBC,UAAhB,eACA,eAA8CjB,QAAQ,CAAC,EAAD,CAAtD,yCAAOkB,eAAP,eAAwBC,kBAAxB,eACA,eAAwCnB,QAAQ,CAAC,EAAD,CAAhD,0CAAOoB,YAAP,gBAAqBC,eAArB,gBAGAtB,SAAS,CAAC,UAAM,CACZc,YAAY,CAAC,IAAD,CAAZ,CACAZ,KAAK,CAACqB,GAAN,CAAU,iBAAV,EACKC,IADL,CACU,SAAAC,GAAG,CAAI,CACTT,SAAS,CAACS,GAAG,CAACC,IAAJ,CAASX,MAAV,CAAT,CACAG,UAAU,CAACO,GAAG,CAACC,IAAJ,CAASX,MAAV,CAAV,CACAD,YAAY,CAAC,KAAD,CAAZ,CACH,CALL,EAMKa,KANL,CAMW,SAAAC,GAAG,CAAI,CACVd,YAAY,CAAC,KAAD,CAAZ,CACH,CARL,EASH,CAXQ,CAWN,EAXM,CAAT,CAcA,GAAMe,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAC,GAAG,CAAI,CAEhB,GAAIA,GAAG,EAAI,EAAX,CACId,SAAS,CAACC,OAAD,CAAT,CADJ,IAGAD,CAAAA,SAAS,CAACC,OAAO,CAACc,MAAR,CAAe,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,OAAF,CAAUC,QAAV,CAAmBJ,GAAnB,CAAJ,EAAhB,CAAD,CAAT,CAEX,CAPD,CASA,GAAMK,CAAAA,YAAY,CAAG,CACjBhB,eAAe,CAAfA,eADiB,CAEjBiB,QAAQ,CAAE,kBAACjB,eAAD,CAAkBE,YAAlB,CAAmC,CAEzCD,kBAAkB,CAACD,eAAD,CAAlB,CACAG,eAAe,CAACD,YAAD,CAAf,CACH,CANgB,CAArB,CAUA,GAAMgB,CAAAA,OAAO,CAAG,CACZ,CACIC,KAAK,CAAE,SADX,CAEIC,SAAS,CAAE,SAFf,CAGIC,GAAG,CAAE,SAHT,CADY,CAMZ,CACIF,KAAK,CAAE,iBADX,CAEIC,SAAS,CAAE,OAFf,CAGIC,GAAG,CAAE,OAHT,CAIIC,MAAM,CAAE,gBAACC,CAAD,CAAIC,CAAJ,QAAUD,CAAAA,CAAC,CAACE,KAAF,CAAQC,MAAR,CAAiBF,CAAC,CAACC,KAAF,CAAQC,MAAnC,EAJZ,CAKIC,MAAM,CAAE,gBAAAF,KAAK,qBACT,gCAAOA,KAAK,CAACC,MAAb,CADS,EALjB,CANY,CAcZ,CACIP,KAAK,CAAE,UADX,CAEIC,SAAS,CAAE,MAFf,CAGIC,GAAG,CAAE,MAHT,CAIIM,MAAM,CAAE,gBAAAC,IAAI,qBACR,gCAAOA,IAAP,SAAOA,IAAP,iBAAOA,IAAI,CAAEC,IAAb,CADQ,EAJhB,CAdY,CAqBZ,CACIV,KAAK,CAAE,QADX,CAEIC,SAAS,CAAE,aAFf,CAGIC,GAAG,CAAE,aAHT,CAIIC,MAAM,CAAE,gBAACC,CAAD,CAAIC,CAAJ,QAAUD,CAAAA,CAAC,CAACO,WAAF,CAAgBN,CAAC,CAACM,WAA5B,EAJZ,CAKIH,MAAM,CAAE,gBAAAI,MAAM,qBACV,qCAASA,MAAT,CADU,EALlB,CArBY,CA8BZ,CACIZ,KAAK,CAAE,iBADX,CAEIE,GAAG,CAAE,aAFT,CAGID,SAAS,CAAE,aAHf,CAIIY,OAAO,CAAE,CACL,CAAEC,IAAI,CAAE,SAAR,CAAmBC,KAAK,CAAE,SAA1B,CADK,CAEL,CAAED,IAAI,CAAE,YAAR,CAAsBC,KAAK,CAAE,YAA7B,CAFK,CAGL,CAAED,IAAI,CAAE,QAAR,CAAkBC,KAAK,CAAE,QAAzB,CAHK,CAIL,CAAED,IAAI,CAAE,SAAR,CAAmBC,KAAK,CAAE,SAA1B,CAJK,CAKL,CAAED,IAAI,CAAE,WAAR,CAAqBC,KAAK,CAAE,WAA5B,CALK,CAML,CAAED,IAAI,CAAE,WAAR,CAAqBC,KAAK,CAAE,WAA5B,CANK,CAJb,CAYIC,QAAQ,CAAE,kBAACD,KAAD,CAAQE,MAAR,QAAmBA,CAAAA,MAAM,CAACC,WAAP,CAAmBtB,QAAnB,CAA4BmB,KAA5B,CAAnB,EAZd,CA9BY,CA4CZ,CACIf,KAAK,CAAE,gBADX,CAEIE,GAAG,CAAE,eAFT,CAGID,SAAS,CAAE,eAHf,CAIIY,OAAO,CAAE,CACL,CAAEC,IAAI,CAAE,QAAR,CAAkBC,KAAK,CAAE,QAAzB,CADK,CAEL,CAAED,IAAI,CAAE,MAAR,CAAgBC,KAAK,CAAE,MAAvB,CAFK,CAGL,CAAED,IAAI,CAAE,KAAR,CAAeC,KAAK,CAAE,KAAtB,CAHK,CAIL,CAAED,IAAI,CAAE,SAAR,CAAmBC,KAAK,CAAE,SAA1B,CAJK,CAKL,CAAED,IAAI,CAAE,kBAAR,CAA4BC,KAAK,CAAE,iBAAnC,CALK,CAML,CAAED,IAAI,CAAE,UAAR,CAAoBC,KAAK,CAAE,UAA3B,CANK,CAJb,CAYIC,QAAQ,CAAE,kBAACD,KAAD,CAAQE,MAAR,QAAmBA,CAAAA,MAAM,CAACE,aAAP,CAAqBvB,QAArB,CAA8BmB,KAA9B,GAAwCE,MAAM,CAACE,aAAP,GAAyBJ,KAAjE,EAA0EE,MAAM,CAACE,aAAP,CAAqBvB,QAArB,CAA8BmB,KAA9B,CAA7F,EAZd,CA5CY,CA0DZ,CACIf,KAAK,CAAE,QADX,CAEIE,GAAG,CAAE,QAFT,CAGIM,MAAM,CAAE,gBAACM,IAAD,CAAOG,MAAP,qBACJ,oBAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,eACI,oBAAC,MAAD,EAAQ,OAAO,CAAE,yBAAM3C,CAAAA,OAAO,CAAC8C,IAAR,0BAA+BH,MAAM,CAACtB,OAAtC,EAAN,EAAjB,CAAyE,SAAS,CAAC,UAAnF,CAA8F,IAAI,CAAC,SAAnG,CAA6G,IAAI,cAAE,oBAAC,WAAD,MAAnH,EADJ,CADI,EAHZ,CA1DY,CAAhB,CAsEA,mBACI,4CACI,oBAAC,IAAD,EAAM,KAAK,CAAC,YAAZ,eAII,oBAAC,MAAD,EACI,WAAW,CAAC,eADhB,CAEI,QAAQ,CAAEJ,YAFd,CAGI,KAAK,CAAE,CAAE8B,KAAK,CAAE,GAAT,CAHX,EAJJ,cASI,oBAAC,KAAD,EACI,MAAM,CAAC,KACP;AAFJ,CAGI,OAAO,CAAE9C,SAHb,CAII,OAAO,CAAEwB,OAJb,CAKI,UAAU,CAAEtB,MALhB,CAMI,UAAU,CAAE,CAAE6C,eAAe,CAAE,EAAnB,CAAuBC,eAAe,CAAE,IAAxC,CAA8CC,eAAe,CAAE,CAAC,IAAD,CAAO,IAAP,CAAa,IAAb,CAA/D,CAAmFC,eAAe,CAAE,IAApG,CANhB,EATJ,CADJ,CADJ,CAsBH,CAED,cAAepD,CAAAA,MAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport axios from 'axios'\n\nimport { useHistory } from 'react-router-dom'\nimport { Card, Button, Table, Space, Input } from 'antd';\nimport { EyeOutlined } from '@ant-design/icons'\nconst Search = Input.Search;\n\n\n\n\n\n\n\nfunction Orders() {\n    const history = useHistory()\n    const [isLoading, setIsLoading] = useState(false)\n\n    const [orders, setOrders] = useState([])\n    const [records, setRecords] = useState([])\n    const [selectedRowKeys, setSelectedRowKeys] = useState([])\n    const [selectedRows, setSelectedRows] = useState([])\n\n\n    useEffect(() => {\n        setIsLoading(true)\n        axios.get(\"order/allorders\")\n            .then(res => {\n                setOrders(res.data.orders);\n                setRecords(res.data.orders);\n                setIsLoading(false)\n            })\n            .catch(err => {\n                setIsLoading(false)\n            })\n    }, [])\n\n\n    const handleSearch = val => {\n       \n                if (val == \"\")\n                    setOrders(records);\n                else\n                setOrders(records.filter(x => x.invoice.includes(val)))\n            \n    }\n\n    const rowSelection = {\n        selectedRowKeys,\n        onChange: (selectedRowKeys, selectedRows) => {\n\n            setSelectedRowKeys(selectedRowKeys);\n            setSelectedRows(selectedRows)\n        },\n    };\n\n\n    const columns = [\n        {\n            title: 'Invoice',\n            dataIndex: 'invoice',\n            key: 'invoice',\n        },\n        {\n            title: 'Num of Products',\n            dataIndex: 'items',\n            key: 'items',\n            sorter: (a, b) => a.items.length - b.items.length,\n            render: items =>\n                <span>{items.length}</span>\n        },\n        {\n            title: 'Customer',\n            dataIndex: 'user',\n            key: 'user',\n            render: user =>\n                <span>{user?.name}</span>\n        },\n        {\n            title: 'Amount',\n            dataIndex: 'totalAmount',\n            key: 'totalAmount',\n            sorter: (a, b) => a.totalAmount - b.totalAmount,\n            render: amount =>\n                <span>$ {amount}</span>\n\n        },\n        {\n            title: 'Delivery Status',\n            key: 'orderStatus',\n            dataIndex: 'orderStatus',\n            filters: [\n                { text: 'Pending', value: 'pending' },\n                { text: 'Processing', value: 'processing' },\n                { text: 'Packed', value: 'packed' },\n                { text: 'Shipped', value: 'shipped' },\n                { text: 'Delivered', value: 'delivered' },\n                { text: 'Cancelled', value: 'cancelled' },\n            ],\n            onFilter: (value, record) => record.orderStatus.includes(value)\n        },\n        {\n            title: 'Payment Status',\n            key: 'paymentStatus',\n            dataIndex: 'paymentStatus',\n            filters: [\n                { text: 'Unpaid', value: 'unpaid' },\n                { text: 'Paid', value: 'paid' },\n                { text: 'COD', value: 'cod' },\n                { text: 'Partial', value: 'partial' },\n                { text: 'Refund Requested', value: 'refundRequested' },\n                { text: 'Refunded', value: 'refunded' },\n            ],\n            onFilter: (value, record) => record.paymentStatus.includes(value) && record.paymentStatus === value && record.paymentStatus.includes(value)\n        },\n        {\n            title: 'Action',\n            key: 'action',\n            render: (text, record) => (\n                <Space size=\"middle\">\n                    <Button onClick={() => history.push(`/order/details/${record.invoice}`)} className='d-center' type='primary' icon={<EyeOutlined />}></Button>\n\n                </Space>\n            ),\n        },\n    ];\n\n    return (\n        <div>\n            <Card title=\"All Orders\">\n\n\n\n                <Search\n                    placeholder=\"Enter Invoice\"\n                    onSearch={handleSearch}\n                    style={{ width: 200 }}\n                />\n                <Table\n                    rowKey=\"_id\"\n                    //rowSelection={rowSelection}\n                    loading={isLoading}\n                    columns={columns}\n                    dataSource={orders}\n                    pagination={{ defaultPageSize: 10, showSizeChanger: true, pageSizeOptions: ['10', '20', '30'], showQuickJumper: true }}\n                />\n            </Card>\n        </div>\n    )\n}\n\nexport default Orders\n"]},"metadata":{},"sourceType":"module"}