{"ast":null,"code":"import _slicedToArray from\"/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import axios from'axios';import Cookies from'js-cookie';import{Form,Input,Button,Checkbox,Alert}from'antd';import'./auth.scss';var layout={labelCol:{span:6},wrapperCol:{span:18}};function Login(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var onFinish=function onFinish(values){setLoading(true);axios.post('/admin/signin',values).then(function(res){setLoading(false);console.log(res.data);if(res.status===200){if(res.data.user.role==='user'){return setError({message:\"Access denied\"});}//console.log(res.data.token);\nCookies.set(\"ecom\",res.data.token);window.location.pathname='/';}}).catch(function(err){setLoading(false);setError(err&&err.response&&err.response.data);//console.log(err && err.response && err.response.data);\n});};var onFinishFailed=function onFinishFailed(errorInfo){console.log('Failed:',errorInfo);};var onCloseAlert=function onCloseAlert(){setError(null);};return/*#__PURE__*/React.createElement(\"div\",{className:\"auth_container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"auth\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3\"},error&&error.message&&/*#__PURE__*/React.createElement(Alert,{message:error.message,type:\"error\",closable:true,onClose:onCloseAlert})),/*#__PURE__*/React.createElement(Form,Object.assign({},layout,{name:\"basic\",initialValues:{remember:true},onFinish:onFinish,onFinishFailed:onFinishFailed}),/*#__PURE__*/React.createElement(Form.Item,{initialValue:\"demo@demo.com\",label:\"Emai\",name:\"email\",className:\"label mb-3\",validateStatus:error&&error.email?\"error\":\"succcess\",help:error&&error.email?error.email:null},/*#__PURE__*/React.createElement(Input,{placeholder:\"Enter your email\"})),/*#__PURE__*/React.createElement(Form.Item,{initialValue:\"123456\",label:\"Password\",name:\"password\",className:\"label\",validateStatus:error&&error.password?\"error\":\"succcess\",help:error&&error.password?error.password:null},/*#__PURE__*/React.createElement(Input.Password,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"text-center\"},/*#__PURE__*/React.createElement(Button,{loading:loading,className:\"primary_btn my-3\",type:\"primary\",htmlType:\"submit\"},\"Login\")))));}export default Login;","map":{"version":3,"sources":["/home/e2e/e2e-microservice/20231007-e2e-microservice/Ts4u-E-Com-Admin-Dev/src/pages/auth/Login.js"],"names":["React","useState","axios","Cookies","Form","Input","Button","Checkbox","Alert","layout","labelCol","span","wrapperCol","Login","error","setError","loading","setLoading","onFinish","values","post","then","res","console","log","data","status","user","role","message","set","token","window","location","pathname","catch","err","response","onFinishFailed","errorInfo","onCloseAlert","remember","email","password"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport axios from 'axios'\nimport Cookies from 'js-cookie'\nimport { Form, Input, Button, Checkbox,Alert } from 'antd';\nimport './auth.scss'\nconst layout = {\n  labelCol: {\n    span: 6,\n  },\n  wrapperCol: {\n    span: 18,\n  },\n};\n\nfunction Login() {\n  const [error, setError] = useState(null)\n  const [loading, setLoading] = useState(false)\n\n  const onFinish = (values) => {\n    setLoading(true)\n      axios.post('/admin/signin',values)\n      .then(res=>{\n        setLoading(false)\n        console.log( res.data);\n        if(res.status === 200){\n          if (res.data.user.role === 'user') {\n            return setError({message:\"Access denied\"})\n          }\n         \n          //console.log(res.data.token);\n          Cookies.set(\"ecom\", res.data.token);\n          \n              window.location.pathname = '/'\n        \n      }\n      })\n      .catch(err=>{\n        setLoading(false)\n        setError(err && err.response && err.response.data);\n        //console.log(err && err.response && err.response.data);\n      })\n    \n  };\n\n  const onFinishFailed = (errorInfo) => {\n    console.log('Failed:', errorInfo);\n  };\n\n  const onCloseAlert=()=>{\n      setError(null)\n  }\n\n\n\n  return (\n    <div className=\"auth_container\">\n    <div className=\"auth\">\n      <div className='mb-3'>\n        {\n          error && error.message && <Alert\n            message={error.message}\n            type=\"error\"\n            closable\n            onClose={onCloseAlert}\n          />\n        }\n      </div>\n      <Form\n        {...layout}\n        name=\"basic\"\n        initialValues={{\n          remember: true,\n        }}\n        onFinish={onFinish}\n        onFinishFailed={onFinishFailed}\n      >\n        <Form.Item\n        initialValue=\"demo@demo.com\"\n          label=\"Emai\"\n          name=\"email\"\n          className=\"label mb-3\"\n          validateStatus={error && error.email ? \"error\" : \"succcess\"}\n          help={error && error.email ? error.email : null}\n\n        >\n          <Input placeholder=\"Enter your email\" />\n        </Form.Item>\n\n        <Form.Item\n        initialValue=\"123456\"\n          label=\"Password\"\n          name=\"password\"\n          className=\"label\"\n          validateStatus={error && error.password ? \"error\" : \"succcess\"}\n          help={error && error.password ? error.password : null}\n        >\n          <Input.Password />\n        </Form.Item>\n\n\n\n        <div className='text-center'>\n          <Button loading={loading} className=\"primary_btn my-3\" type=\"primary\" htmlType=\"submit\">\n            Login\n    </Button>\n          {/* <span className='register'> Dont't have an account ? <Link href=\"/auth/register\"><a>register now!</a></Link></span> */}\n        </div>\n      </Form>\n    </div>\n    </div>\n  )\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}